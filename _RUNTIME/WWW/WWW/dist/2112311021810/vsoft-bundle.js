GetWindowFrame=function(t){try{return(t||window).frameElement}catch{return null}},TOP=function(){try{return VSF.Utility.GetTopWindow()}catch{return window}};var IE=navigator.appName.indexOf("Microsoft")>=0,LoginPage,VFrames=new Array,ShowLoaderDiv=!0;RemoveIfblockLazy=function(){var t=TOP();t.clearTimeout(t.ifblockTM),t.ifblockTM=t.setTimeout('typeof RemoveIfblock!=="undefined"&&RemoveIfblock(1);',3e3)},RemoveIfblock=function(t){var n=TOP();n.$("#ifblock",n.document).remove(),!t&&RemoveIfblockLazy()},RemoveIfblock(),GetIEVersion=function(){var t=navigator.appVersion.split(";");for(i=0;i<t.length;i++)if(t[i].indexOf("MSIE")>=0)return t[i].split(" ")[2]};var IEversion=GetIEVersion(),init=!1;ResizeIFrame=function(){},GetDocument2=function(t,n){var a=GetDocument(t);return a.rifAttached||(a.rifAttached=!0,$(a).click(n)),a},GetHeight=function(t){try{return $(t).find(">:visible").height()}catch{return t.document.defaultView?t.document.defaultView.$(t).find(">:visible").height():0}},CreateVFrame=function(t,n,a,r){var o=document.getElementById(t),l=document.createElement("div"),u=document.createElement("IFRAME");l.appendChild(u),u.className="CssVFrame",u.setAttribute("allowtransparency",!0),u.src="about:blank",u.scrolling=a==!0?"yes":"no",u.frameBorder="0",u.align="absmiddle",n==null&&(n="VFrame"+VFrames.length),VFrames[VFrames.length]=u,u.id=n;var f=document.createElement("div");f.className="CssVFrame_div";var v=document.createElement("div");v.className="CssVFrame_divtxt";var S=document.createElement("div");return S.className="CssVFrame_divimg",f.style.display="none",f.appendChild(S),f.appendChild(v),r&&(v.innerHTML=r),o.appendChild(l),o.appendChild(f),u.element=f,u},LoadPageFrame=function(t,n,a,r){var o=document.getElementById(t);o.isLoading=!1,ShowLoader(o),o.src=n,a!=null&&a!=""?(o.heightToSet=a,o.autoHeight=!1):(o.heightToSet=null,r!=null&&(o.autoHeight=r))},GetDocument=function(t){var n=!1;try{t.frameSet!=null?aDocument=t.frameSet.document:t.contentDocument?aDocument=t.contentDocument:t.contentWindow&&(aDocument=t.contentWindow.document),n=!0}catch{}return n?aDocument:null},EndLoadPage=function(t,n){if(t.showLoaderOnSubmit){var a=GetDocument(t);if(a!=null&&a.body!=null&&a.body){var r=TOP();r.$("#ifblock",r.document).remove();for(var o=a.getElementsByTagName("FORM"),l=0;l<o.length;l++)IE?o[l].attachEvent("onsubmit",function(){(n||a.parentWindow.event.returnValue!=!1)&&ShowLoader(t,n)}):o[l].addEventListener("submit",function(u,f){this.ownerDocument.defaultView.RefreshedUpdatePanel||ShowLoader(t,n)},!1)}}},InitlizeVFrame=function(t,n,a){var r=document.getElementById(t);if(r.loginPage=LoginPage,r.autoHeight=n,r.showLoaderOnSubmit=a,r.id&&/^popup/.test(r.id)){$(r).load(function(){HideLoader(r,1),EndLoadPage(r,1)});return}IE?r.attachEvent("onload",function(){r.style.height="100%",ResizeIFrame(r),r.frameSet=GetFrameByIFrame(r),ChceckDefaultPage(r),HideLoader(r),EndLoadPage(r)}):r.addEventListener("load",function(){r.frameSet=GetFrameByIFrame(r),r.style.height="100%",ResizeIFrame(r),ChceckDefaultPage(r,this.ownerDocument.forms),HideLoader(r),EndLoadPage(r)},!1)},ChceckDefaultPage=function(t,n){try{n==null&&(n=t.frameSet.document.forms);var a=t.loginPage;for((a==null||a=="")&&(a="account/log-in"),i=0;i<n.length;i++)if(n[i].action.indexOf(a)>-1){RedirectMainPage(AppPath+"/"+a);return}}catch{}t.src.toLowerCase().indexOf(t.loginPage)>=0&&(ShowLoader(t),RedirectMainPage(AppPath+"/"+t.loginPage))},ShowLoader=function(t,n){(VSF.Utility.GetTopWindow().IsAsynCallback==!1||n)&&(t.isLoading=!0,ShowLoaderDiv&&(!IE&&!n&&(t.style.height="100px"),setTimeout(function(){ShowLoaderDelay(t,n)},1e3)),ShowLoaderDiv=!0)},ShowLoaderDelay=function(t,n){ShowLoaderDiv&&t.isLoading&&(n?$(t).fadeOut("fast"):(t.element&&(t.element.style.height=t.style.height,t.element.style.display=""),t.style.display="none"))},HideLoader=function(t,n){t.isLoading=!1,n?$(t).fadeIn("fast"):(t.element&&(t.element.style.display="none"),t.style.display=""),ResizeIFrame(t,1)},GetTopWindow=function(){return VSF.Utility.GetTopWindow()},RedirectMainPage=function(t){var n=GetTopWindow();n.location.replace(t)},ReplaceTopWindow=function(t){RedirectMainPage(t)},ReloadMainPage=function(){var t=GetTopWindow();t.location.url=t.location.url},GetFrameByIFrame=function(t){return arrFrames=window.frames,IE?arrFrames[t.id]:null},RegisterNS=function(t){for(var n=t.split("."),a=window,r=0;r<n.length;r++)typeof a[n[r]]>"u"&&(a[n[r]]=new Object),a=a[n[r]]},RegisterNS("VSF"),RegisterNS("VSF.Utility"),VSF=function(){},VSF.Utility=function(){},VSF.Utility.AttachViewState=function(t,n,a){var r=null;n!=null&&(r=$(n).parents("span[PartialRenderControl='1']"));var o,l,u,f;n!=null&&r!=null&&r.length>0?(o=$("#V__CVS",r[0]).val(),l=$("#V__VIEWSTATE",r[0]).val(),u=$("#V__VIEWSTATEENCRYPTED",r[0]),f=$("#V__EVENTVALIDATION",r[0])):(o=$("#__CVS").val(),l=$("#__VIEWSTATE").val(),u=$("#__VIEWSTATEENCRYPTED"),f=$("#__EVENTVALIDATION")),t.push({name:"__CVS",value:o}),t.push({name:"__VIEWSTATE",value:l}),u.length>0&&t.push({name:"__VIEWSTATEENCRYPTED",value:u.val()}),f.length>0&&t.push({name:"__EVENTVALIDATION",value:f.val()}),a!=null&&t.push({name:"AspControlClientID",value:a})},VSF.Utility.RemoveAll=function(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var a in n)n.hasOwnProperty(a)&&(t=VSF.Utility.Replace(t,n[a],""));return t},VSF.Utility.Replace=function(t,n,a){if(n==a||n==null||a==null||n==""||t==null||t=="")return t;for(;t.indexOf(n)>=0;)t=t.replace(n,a);return t};var divError=null;VSF.Utility.ReportError=function(t,n,a){divError==null&&(divError=document.createElement("DIV"),divError.id="__divError",divError.name="__divError",divError.className="CssReportErrorDiv",document.body.appendChild(divError),$(divError).html(`<table cellpadding="0" cellspacing="0"  class="CssReportErrorTable"><tr><td align='center' class=CssReportErrorHeader><b>`+VSF.Utility.Localization.C_WystapilBlad+": "+t+" ("+n+`)</b></td><td align=right class="CssReportErrorClose" >&nbsp;</td></tr><tr><td colspan=2 valign='middle'><b>`+VSF.Utility.Localization.C_SzczegolyBledu+':</b></td></tr><tr><td colspan=2><div class="CssReportErrorDetails">'+a+"</div></td></tr></table>"),$(".CssReportErrorClose").click(function(r){document.body.removeChild($(r.srcElement).parent().parent().parent().parent()[0])}),$(divError).css("left",$(window).scrollLeft()+screen.availWidth/2-$(divError).width()/2),$(divError).css("top",$(window).scrollTop()+screen.availHeight/2-$(divError).height()),$(divError).show())},VSF.Utility.Contains=function(t,n){if(!/undefined/.test(t)&&!/undefined/.test(n)){for(var a=0;a<t.length;a++)if(t[a]==n)return!0}return!1},VSF.Utility.Remove=function(t,n){for(var a=[],r=0;r<t.length;r++)r!=n&&(a[a.length]=t[r]);return a},ClosePopupError=function(){divError!=null&&document.body.removeChild(divError)},GetStackTraceException=function(t,n){return n?t.responseText:t.responseText!=""&&(exArray=t.responseText.split("</html>"),exArray.length==2)?(stackTrace=exArray[1],stackTrace=stackTrace.replace("<!--",""),stackTrace=stackTrace.replace("-->",""),stackTrace):null},AjaxErrorHandler=function(t){var n="",a=t.status;if(a!=null)switch(statusNumber=Number(a),statusNumber){case 400:n=VSF.Utility.Localization.C_HttpBlad400;break;case 401:n=VSF.Utility.Localization.C_HttpBlad401;break;case 403:n=VSF.Utility.Localization.C_HttpBlad403;break;case 404:n=VSF.Utility.Localization.C_HttpBlad404;break;case 408:n=VSF.Utility.Localization.C_HttpBlad408;break;case 500:n=VSF.Utility.Localization.C_HttpBlad500;break;case 503:n=VSF.Utility.Localization.C_HttpBlad503;break;case 504:n=VSF.Utility.Localization.C_HttpBlad504;break;default:n=VSF.Utility.Localization.C_HttpOgolnyBlad;break}var r=GetStackTraceException(t,a=="200");VSF.Utility.ReportError(n,a,r)};var chNotSeparator,chSeparator;if(GetSeperator=function(){chNotSeparator=isNaN(10.1)?".":",",chSeparator=isNaN(10.1)?",":"."},GetSeperator(),VSF.Utility.ReadDecimal=function(t){return Number(t.replace(chNotSeparator,chSeparator))},VSF.Utility.DecimalToString=function(t){return t.toString().replace(chSeparator,chNotSeparator)},VSF.Utility.DisableOnSubmit=function(){var t=setTimeout(function(){VSF.Utility.DisableSubmit(),clearTimeout(t)},1);return!0},VSF.Utility.DisableOnSubmitFor5Seconds=function(){var t=setTimeout(function(){VSF.Utility.DisableSubmit(),clearTimeout(t)},1),n=setTimeout(function(){VSF.Utility.EnableSubmit(),clearTimeout(n)},5e3);return!0},VSF.Utility.AddDisableOnSubmit=function(){for(i=0;i<document.forms.length;++i)document.forms[i].onsubmit=VSF.Utility.DisableOnSubmit},VSF.Utility.AddDisableOnSubmitFor5Seconds=function(){for(i=0;i<document.forms.length;++i)document.forms[i].onsubmit=VSF.Utility.DisableOnSubmitFor5Seconds},VSF.Utility.DisableSubmit=function(){$("input[type=submit],input[type=button],.k-button").each(function(){this.disabled||(this._disabled_=this.disabled||!1,this.disabled=!0,$(this).css({"-webkit-touch-callout":"none","-webkit-user-select":"none",opacity:.5}),this.oHref=this.href,this.removeAttribute("href"),this.oClick=this.onclick,this.onclick=function(){return!1})})},VSF.Utility.EnableSubmit=function(){$("input[type=submit],input[type=button],.k-button").each(function(){typeof this._disabled_<"u"&&(this.disabled=this._disabled_,$(this).css({"-webkit-touch-callout":"","-webkit-user-select":"",opacity:1}),typeof this.oHref<"u"&&(this.href=this.oHref),typeof this.oClick<"u"&&(this.onclick=this.oClick))})},VSF.Utility.SetDefaultFrameFocus=function(){if(document.forms.length>0)for(i=0;i<document.forms(0).length;++i){var t=document.forms(0).item(i);if(t.tagName=="INPUT"&&t.type=="text"&&t.disabled==!1&&(t.visible==null||t.visible!=null&&t.visible==!0)){t.focus(),t.select();break}}},VSF.Utility.GetParentWindow=function(t){t==null&&(t=window);try{return t&&t.frameElement?t.frameElement.ownerDocument.parentWindow?t.frameElement.ownerDocument.parentWindow:t.frameElement.ownerDocument.defaultView:null}catch{}return null},_topWindow=null,VSF.Utility.GetTopWindow=function(){if(_topWindow==null)for(_topWindow=window;_topWindow!=null&&GetWindowFrame(_topWindow)!=null&&VSF.Utility.GetParentWindow(_topWindow)!=null;)_topWindow=VSF.Utility.GetParentWindow(_topWindow);return _topWindow.VSF?_topWindow:window},VSF.Utility.EncodeUrl=function(a){var n=a.indexOf("?");if(n===-1)return a;var a=encodeURI(a),r=a.substr(n).split("&"),o=[];for(var l in r)if(r.hasOwnProperty(l)){var u=r[l].indexOf("=");if(u>-1){var f=r[l].substr(0,u),v=r[l].substr(u+1);o.push(f+"="+encodeURIComponent(v))}else o.push(r[l])}return a.substr(0,n)+o.join("&")},VSF.Event=function(){this.eventHandlers=new Array},VSF.Event.prototype.addHandler=function(t){this.eventHandlers.push(t)},VSF.Event.prototype.execute=function(t){for(var n=0;n<this.eventHandlers.length;n++)this.eventHandlers[n]!=null&&this.eventHandlers[n](t)},RegisterNS("Web"),RegisterNS("Web.ModalPanel"),Web.ModalPanel.Close=function(t){var n=Web.ModalPanel.GetModal(t);n?.hide()},Web.ModalPanel.GetModal=function(t){var n=null;n=$(document.getElementById(t.id));var a=0;do n=n.parent(),a++;while(n.attr("type")!="modalWindow"&&a<1e3);return n[0]},Web.ModalPanel.SetReturnValue=function(t,n){var a=Web.ModalPanel.GetModal(t);a!=null&&(a.returnValue=n)},GetWindowFromFrame=function(t){var n=null;try{t==null?n=VFrames[0]:n=document.getElementById(t)}catch{}return n==null?window:n.contentDocument.parentWindow||n.contentDocument.defaultView},VSF.Utility.GetWindowSize=function(){var t=window,n=document,a=n.documentElement,r=n.getElementsByTagName("body")[0],o=t.innerWidth||a.clientWidth||r.clientWidth,l=t.innerHeight||a.clientHeight||r.clientHeight;return{x:o,y:l}},VSF.Utility.UpdateDocHeight=function(t){if(GetWindowFrame()){var n=typeof t!="number"?t.offset():null,a=n!=null?t.outerHeight()+n.top+10:t,r=$(document),o=$(document.body),l=$(window.frameElement),u=document.forms.length?$(document.forms[0]):null;u&&u.height()<a&&u.height(a),o.height()<a&&o.height(a),r.height()<a&&r.height(a),l.length&&l[0].style.height!="100%"&&l.height()<a&&l.height(a)}},$.fn.transitionEnd=function(t){var n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},a=function(){var l=document.createElement("div");for(var u in n)if(typeof l.style[u]<"u")return n[u];return!1},r=this,o=a();return o?r.one(o,t):VSF.Delay(r.id,50,t.call(r)),r},VSF.JQDialog=function(t,n,a){var r=$("<div/>");function o(v){return v.frameSet!=null?v.frameSet.document:v.contentDocument||v.contentWindow.document}var l=t.showHeader==null?!0:t.showHeader,u={width:t.width,height:t.height,iframe:!0,modal:t.modal,content:t.url,title:t.title,open:function(){t.open&&t.open();var v=r,S=this.element.find("iframe");S.bind("load",function(){kendo.ui.progress(r,!1),$(this).css("height","");const h=$(this).contents();if(!l&&h.find(".header")[0]&&(h.find(".header")[0].remove(),h.find("#title-wrapper").remove(),h.find("#wrapper").css("padding-top","0px")),t.height==0){doc=o(this);var g=$.browser.msie?$(doc.body).height():$(doc).height();$(this).css("height",g)}else{let _=$("form > div:first-of-type",h);_.height("calc(100vh - var(--vs-msg-margin-bottom))"),_.addClass("portlet-msg")}const b=$("#DocumentMessage",h);b.parent().remove(b),$("form > div.portlet-msg",h).prepend(b)})[0].dArgs=$.extend(t,{kendoWindow:v.data("kendoWindow")})},close:function(){setTimeout(()=>{t.close&&t.close(),t.pW&&t.pW.rf&&t.pW.rf()},200)}},f=r.appendTo("body").kendoWindow(u).data("kendoWindow").center();kendo.ui.progress(r,!0)},VSF.CloseDialog=function(t){return $("#"+t).parent().dialog("close"),!1},VSF.ClosePopup=function(){window.frameElement.dArgs.kendoWindow.close()},VSF.Resize=function(){this.resizeEnabled||this.resizeEnabled==null||(this.resizeEnabled=!0,typeof MutationObserver>"u"&&(MutationObserver=function(t){this.observe=function(){window._interval&&clearInterval(window._interval),window._interval=window.setInterval(function(){window._moBusy||(window._moBusy=1,t(),window._moBusy=0)},400)},this.disconnect=function(){}}),$(function(){!document.querySelector("#m_aplMainPage")&&function(){var t=document.querySelector("body");if(t){var n=function(){var r=0;window._tm&&clearTimeout(window._tm),window._tm=setTimeout(function(){for(var o=document.querySelectorAll("*"),l=0;l<o.length;l++){var u=o[l].getBoundingClientRect();r=Math.max(r,u.top+u.height)}$(window.frameElement).height(r),clearTimeout(window._tm)},100)},a=new MutationObserver(n);a.observe(t,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),$(window).one("load",n).bind("unload",function(){a&&a.disconnect()}).resize(n)}}()}))},VSF.Delay=function(t,n,a){!t&&(t="_"+Math.floor(Math.random()*1e3));var r=TOP();if(r){!r.timeouts&&(r.timeouts=[]);var o=r.timeouts[t];o&&clearTimeout(o),r.timeouts[t]=setTimeout(function(){try{a&&a()}catch{}clearTimeout(o)},n)}},VSF.Resize(),typeof window.showModalDialog>"u"){var pause=function(){var t=null,n=$(TOP().document.body),a=function(r){return r.preventDefault(),!1};return{add:function(){if(!t){t="div"+Math.random().toString().replace(".","");var r=$("<div/>").css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1e5,backgroundColor:"white",opacity:0}).attr("id",t);n.bind("keyup",a).bind("keydown",a).bind("keypress",a).append(r.fadeTo("slow",.6))}},remove:function(){window.__doPostBack(),n.unbind("keyup",a).unbind("keydown",a).unbind("keypress",a),n.find("#"+t).remove(),t=null}}}();window.showModalDialog=function(t,n,a){if(window.opener){Web.AddError("Nie mo\u017Cna otwiera\u0107 okna popup z okna popup.");return}var r=TOP(),o=r.open(t,a);if(!o){Web.AddError("Twoja przegl\u0105darka blokuje wyskakuj\u0105ce okienka.");return}pause.add(),r.dialogs=r.dialogs||[],r.dialogs[o]={timer:r.setInterval(function(){if(!o||o.closed){var l=TOP();l.clearInterval(l.dialogs[o].timer),pause.remove(),delete l.dialogs[o].timer,delete l.dialogs[o],delete o}},500),args:n}}}var openerDialogs=null;try{openerDialogs=window.opener.dialogs}catch(t){}typeof window.dialogArguments>"u"&&openerDialogs!==null&&typeof openerDialogs<"u"&&(window.dialogArguments=openerDialogs[window].args),CheckNMB=function(){$(function(){$("#m_nb",GetWindowFrame()!=null?window.frameElement.contentDocument:document).length>1&&Web.AddError(`Wyst\u0105pi\u0142 b\u0142\u0105d na stronie. Prawdopodobnie akcja, kt\xF3ra spowodowa\u0142a ostatni\u0105 nawigacj\u0119 ma nieprawid\u0142owo ustawiony spos\xF3b prze\u0142adowania strony. Akcja powinna mie\u0107 ustawiony spos\xF3b prze\u0142adowania: Zawsze od\u015Bwie\u017Caj ca\u0142\u0105 stron\u0119.
Wszyskie akcje na aktualnej stronie przestan\u0105 dzia\u0142a\u0107.`)})},GetTopWnd=function(){for(var t=window;t.dialogArguments!=null&&t.dialogArguments.pWindow!=null||t.frameElement!=null&&t.frameElement.dArgs!=null&&t.frameElement.dArgs.pW.pWindow!=null;)t=t.dialogArguments.pWindow||t.frameElement.dArgs.pW.pWindow;return t.frameElement!=null?t.top:t},GetParentWnd=function(){var t=window;if(t.dialogArguments!=null&&t.dialogArguments.pWindow!=null)return t.dialogArguments.pWindow;if(GetWindowFrame(t)!=null&&t.frameElement.dArgs!=null)try{if(t.frameElement.dArgs.pW&&t.frameElement.dArgs.pW.pWindow&&t.frameElement.dArgs.pW.pWindow!=null)return t.frameElement.dArgs.pW.pWindow;if(t.frameElement.contentWindow&&t.frameElement.contentWindow!=null)return t.frameElement.contentWindow}catch{var n=$("#"+t.frameElement.dArgs.pW.id);if(n.length==1)return n[0]}return TOP()},GetWindowId=function(){var t=window;return t.dialogArguments!=null&&t.dialogArguments.id!=null?t.dialogArguments.id:GetWindowFrame(t)!=null&&t.frameElement.dArgs!=null&&t.frameElement.dArgs.pW&&t.frameElement.dArgs.pW.id!=null?t.frameElement.dArgs.pW.id:GetWindowFrame(t)&&t.frameElement.contentWindow?t.frameElement.contentWindow.id:null},GetRefreshFunc=function(){var t=window;return t.dialogArguments!=null&&t.dialogArguments.rf!=null?t.dialogArguments.rf:GetWindowFrame(t)!=null&&t.frameElement.dArgs!=null&&t.frameElement.dArgs.pW&&t.frameElement.dArgs.pW.rf!=null?t.frameElement.dArgs.pW.rf:GetWindowFrame(t)&&t.frameElement.contentWindow?t.frameElement.contentWindow.rf:null},CLID=function(t){if(typeof IDs[t]<"u"){var n=IDs[t],a=n.split(";");return a.length==0?IDs[t]:a}else return null},VBP=function(){var isArray=function(t){return t!=null&&Object.prototype.toString.call(t)==="[object Array]"},get=function(t,n){if(t==null)return null;if(isArray(t)){if(t.length>1){var a=[];for(var r in t)a[r]=$("#"+t[r]).get(0);return a}return t.length>0?(n?$(n,"#"+t[0]):$("#"+t[0])).get(0):null}return(n?$(n,"#"+t):$("#"+t)).get(0)},Get=function(t){return get(CLID(t))},Click=function(actionGuid){var action=Get(actionGuid);action!==null&&(!$.browser.msie&&!$.browser.mozilla&&action.href?eval(action.href.replace(/^javascript\:/gi,"")):action.click?action.click():action.onclick())},refreshObject=function(t){var n=GetRefreshFunc();n&&n.call(GetParentWnd())},hideElement=function(t,n){var a=$("#"+t).parents(".CSS_CollapsibleContainer").first(),r=document.getElementById(n),o=a.toggleClass("collapsed").data("postFunc");return r&&(r.value=a.hasClass("collapsed")?0:1),window.navigator.userAgent.indexOf("Edge")>-1&&!a.hasClass("collapsed")&&(tm=setTimeout(function(){a.find("tr").each(function(){$(this).click()}),clearTimeout(tm)},100)),o&&o.call(a),!1},closePopup=function(){return VSF.ClosePopup(),!1};return{HideElement:hideElement,Click,Get,get,isArray,ClosePopup:closePopup,RefreshObject:refreshObject,UpOnLoad:function(t){$(function(){var n=$("#"+t);n.length&&(typeof n[0].postFunc=="function"&&(n[0].postFunc(),n[0].postFunc=null),focusIsSet=!1)})}}}();var tw=GetTopWindow();tw.Web==null&&(tw.Web={}),tw.Web.Component==null&&(tw.Web.Component={}),typeof tw.Web.Component.AddContentTab!="function"&&(tw.Web.Component.AddContentTab=function(){alert("Zak\u0142adki nie s\u0105 obs\u0142ugiwane.")}),VBPAS=typeof VBPAS<"u"?VBPAS:function(){return{Init:function(t){$.extend(VSF.Utility,{DisableOnSubmitFor5Seconds:function(){var n=setTimeout(function(){VSF.Utility.DisableSubmit(),clearTimeout(n)},1);return typeof ben<"u"&&clearTimeout(ben),ben=setTimeout(function(){VSF.Utility.EnableSubmit(),clearTimeout(ben)},t*1e3),!0},AddDisableOnSubmitFor5Seconds:function(){for(var n=0;n<document.forms.length;++n)document.forms[n].onsubmit=VSF.Utility.DisableOnSubmitFor5Seconds}})}}}(),Dialog=function(){var t=function(){var r=arguments[0],o=arguments[1],l=arguments[2]||"OK",u=arguments[3]||"Anuluj",f=arguments[4];Web.Dialog.Confirm(r,o,{[l]:function(){f&&f()},[u]:Web.Dialog.Hide},[button])},n=function(){var r=arguments[0],o=arguments[1]||"VBP";button=arguments[2]||"OK",onSuccess=arguments[3],buttons={},Web.Dialog.Confirm(r,o,{[button]:arguments[3]},button)},a=function(){var r=arguments[0],o=arguments[1],l=arguments[2];Web.Dialog.Confirm(r,o,l,Object.getOwnPropertyNames(l)[0])};return{FireAction:function(r,o){o=o||"";var l=VBP.Get(r);l&&__doPostBack?l.name?__doPostBack(l.name,o):window.eval(l.pathname):__doPostBack(r,o)},Confirm:function(){var r,o=this,l=function(u){typeof u=="string"?o.FireAction(u):typeof u=="function"&&u()};switch(arguments.length){case 0:case 1:logger.LogError("Za ma\u0142o parametr\xF3w w wywo\u0142aniu funkcji Confirm.");break;case 2:r=arguments[1],t(arguments[0],"","","",function(){l(r)});break;case 3:r=arguments[2],t(arguments[0],arguments[1],"","",function(){l(r)});break;case 4:r=arguments[3],t(arguments[0],arguments[1],arguments[2],"",function(){l(r)});break;case 5:r=arguments[4],t(arguments[0],arguments[1],arguments[2],arguments[3],function(){l(r)});break}},Ok:function(){if(arguments.length===0){logger.LogError("Za ma\u0142o parametr\xF3w w wywo\u0142aniu funkcji Ok.");return}n.apply(this,arguments)},Custom:function(){switch(arguments.length){case 0:case 1:logger.LogError("Za ma\u0142o parametr\xF3w w wywo\u0142aniu funkcji Custom.");break;case 2:a(arguments[0],"",arguments[1]);break;case 3:a(arguments[0],arguments[1],arguments[2]);break}},ShowIFrame:function(){arguments.length==0?logger.LogError("Za ma\u0142o parametr\xF3w w wywo\u0142aniu funkcji ShowIFrame."):typeof arguments[0]=="object"?arguments[0].url===null||arguments[0]===void 0?logger.LogError("W wywo\u0142aniu funkcji ShowIFrame brakuje wymaganego parametru url."):VSF.JQDialog(arguments[0]):logger.LogError("Pierwszy parametr wywo\u0142ania funkcji ShowIFrame musi by\u0107 obietkem.")}}}(),VBP=function(mod){var getKendoControls=function(t){t=t instanceof jQuery?t:$(t);var n=Object.getOwnPropertyNames(t.data()).filter(function(a){return/^kendo/.test(a)&&t.data(a).enable});return n&&n.length?n.map(function(a){return t.data(a)}):[t]},getKendoEnable=function(t){return function(n){return n?function(a){$.each(n,function(){this.enable?this.enable(a):this.prop("disabled",!a)[a?"removeClass":"addClass"]("k-state-disabled")})}:null}(getKendoControls(t))},getKendoVisible=function(t){return function(n){return n?function(a){var r=a?"show":"hide";$.each(n,function(){(this.hasClass&&this.hasClass("k-checkbox")?$('label[for="'+this.attr("id")+'"]'):this.wrapper||this.element||this)[r]("fast")})}:null}(getKendoControls(t))},getKendoValue=function(t){var n=t.filter(function(o){return o.value});if(n.length>1){var a=n[0].element,r=a.data("controlName");n=r?[a.data(a.data("controlName"))]:n}return n},empty=["",void 0,null,"false","00000000-0000-0000-0000-000000000000"],getFirstInnerNode=function(t,n){return t?t.getElementsByTagName(n)[0]:null},getValue=function(t){return t.value},getBool=function(t){return t.checked},getTextArea=function(t){return t.innerHTML},getSelect=function(t){var n=$(t).data("controlName");return(n?$(t).data(n):$(t).data("kendoComboBox")).value()},setValue=function(t,n){var a=getKendoValue(getKendoControls(t));if(a&&a.length){var r=a[0];r.element.val()!=n&&(r.value(n),r.trigger("change"))}else{var o=t.value!==n;t.value=n,o&&t.onchange&&t.onchange()}},setBool=function(t,n){t.checked=n},setSelect=function(t,n){var a=$(t).data("controlName");(a?$(t).data(a):$(t).data("kendoComboBox")).value(n)},inputGetters={text:getValue,checkbox:getBool},inputSetters={text:setValue,checkbox:setBool},notIn=function(t,n){for(var a in n)if(n[a]===t)return!1;return!0},getInputValue=function(t){var n;if(t){if(n=t.type,inputGetters[n])return inputGetters[n](t);if(t.value===void 0)return t.innerHTML}return""},getInnerValue=function(t){var n=getFirstInnerNode(t,"input"),a;if(!n)return t.value!==void 0?t.value:t.innerHTML;if(a=n.type,inputGetters[a])return inputGetters[a](n)},getters={input:getInputValue,span:getInnerValue,div:getInnerValue,textarea:getTextArea,select:getSelect},create=function(t,n){var a=document.createElement(t);return a.innerHTML=n,a},removeChildren=function(t){if(t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild)},setInnerValue=function(t,n){var a=getFirstInnerNode(t,"input"),r;if(a)r=a.type,inputSetters[r]&&inputSetters[r](a,n);else{if(a=getFirstInnerNode(t,"span"),a)removeChildren(a),a.appendChild(create("label",n));else if(t.options)for(var o in t.options)t.options.hasOwnProperty(o)&&t.options[o]===n&&(t.value=n,t.innerHTML=o.substr(36));else if(t.value===void 0){t.innerHTML=n;return}t.value=n}},setInputValue=function(t,n){t&&(t.tagName.toLowerCase()==="input"&&(key=t.type,inputSetters[key]&&inputSetters[key](t,n)),t.value===void 0&&(removeChildren(t),t.appendChild(create("label",n))))},setters={input:setInputValue,span:setInnerValue,div:setInnerValue,textarea:setInnerValue,select:setSelect},specyfic=function(t,n,a){var r=CLID(t);r&&a<r.length&&n(r[a])},iterate=function(t,n){var a=CLID(t),r,o;if(a!=null)for(o=0;o<a.length;o+=1)n(a[o])},showIf=function(t,n){if(ctl=mod.get(t),ctl){ctl.nodeName==="SELECT"&&(ctl=ctl.parentNode),ctl.className.indexOf("hasDatepicker")>-1&&(ctl=ctl.parentNode);var a=getKendoVisible(ctl);a?a(n):ctl.style.display=n?"inline":"none"}},changeVisibility=function(t,n){var a=function(r){showIf(r,!n)};iterate(t,a)},showRowIf=function(t,n){var a=mod.get(t);if(a)for(;a;){if(a.tagName.toLowerCase()=="tr"&&a.parentNode.rows.length!=1){a.style.display=n?"":"none";break}a=a.parentNode}},changeRowVisibility=function(t,n){var a=function(r){showRowIf(r,!n)};iterate(t,a)},disable=function(t){var n=document.getElementById(t);if(!(!n||n._disabled_)){n._disabled_=!0,n._tabIndex_=n.tabIndex,n.tabIndex=-1;var a=VBP.CSSDisabled[n.type],r=$(n),o=getKendoEnable(r);o?o(!1):a&&r.addClass(a)}},enable=function(t){var n=mod.get(t);n&&(n._disabled_=!1,n.tabIndex=n._tabIndex_);var a=VBP.CSSDisabled[n.type],r=$(n),o=getKendoEnable(r);o?o(!0):a&&n.removeClass(a)},disableIf=function(t,n){var a=n?disable:enable;a(t)},getVal=function(t){var n=mod.get(t),a=n.nodeName.toLowerCase();if(getters[a])return getters[a](n)},setVal=function(t,n){var a=mod.get(t),r;a&&(r=a.nodeName.toLowerCase(),setters[r]&&setters[r](a,n))};mod.GetValue=function(t,n){var a=[],r=function(o){var l=mod.get(o),u;l&&(u=l.nodeName.toLowerCase(),getters[u]&&a.push(getters[u](l)))};return arguments.length==1?iterate(t,r):specyfic(t,r,n),a.join(",")},mod.SetValue=function(t,n,a){var r=function(o){setVal(o,n)};arguments.length==2?iterate(t,r):specyfic(t,r,a)};var isEmpty=function(t){return!notIn(getVal(t),empty)};mod.IsEmpty=function(t){var n=mod.Get(t);if(n)return isEmpty(n.id);logger.LogError("Nie znaleniono kontrolki o id :"+t)},mod.Disable=function(){for(var t=0;t<arguments.length;++t)iterate(arguments[t],disable)},mod.Enable=function(){for(var t=0;t<arguments.length;++t)iterate(arguments[t],enable)};var isDisabled=function(t){var n=mod.get(t);return n._disabled_===!0};mod.IsDisabled=function(t){var n=mod.Get(t);if(n)return isDisabled(n.id);logger.LogError("Nie znaleniono kontrolki o id :"+t)},mod.DisableIf=function(){var t=arguments[0];typeof t!="boolean"&&logger.LogError("Nieprawid\u0142owe parametry przekazane do funkcji DisableIf");for(var n=function(r){disableIf(r,t)},a=1;a<arguments.length;a+=1)iterate(arguments[a],n)},mod.Hide=function(){for(var t=0;t<arguments.length;++t)changeVisibility(arguments[t],!0)},mod.Show=function(){for(var t=0;t<arguments.length;++t)changeVisibility(arguments[t],!1)};var innerIsVisible=function(t){return $(t).is(":visible")},isVisible=function(t){var n=mod.get(t);return n!=null?innerIsVisible(n):!1};mod.IsVisible=function(t){var n=mod.Get(t);if(n)return isVisible(n.id);logger.LogError("Nie znaleniono kontrolki o id :"+t)},mod.ShowIf=function(){typeof arguments[0]!="boolean"&&logger.LogError("Nieprawid\u0142owe parametry przekazane do funkcji ShowIf");for(var t=arguments[0]?this.Show:this.Hide,n=1;n<arguments.length;n+=1)t(arguments[n])},mod.HideRow=function(){for(var t=0;t<arguments.length;++t)changeRowVisibility(arguments[t],!0)},mod.ShowRow=function(){for(var t=0;t<arguments.length;++t)changeRowVisibility(arguments[t],!1)},mod.ShowRowIf=function(){typeof arguments[0]!="boolean"&&logger.LogError("Nieprawid\u0142owe parametry przekazane do funkcji ShowRowIf");for(var t=arguments[0]?ShowRow:HideRow,n=1;n<arguments.length;n+=1)t(arguments[n])};var getCurrentTab=function(t){var n=t+" input[id$=_tabId]:hidden",a=mod.get(n);return a?a.value?a.value:1:-1};mod.GetCurrentTab=function(t){var n=CLID(t)+" input[id$=_tabId]:hidden",a=mod.get(n);return a?a.value?a.value:1:-1};var setupList=function(id){var list=mod.get(id),ctl;if(list){if(list._isInitialized_)return;ctl=mod.get(id,".CssFlexigridTable");try{eval("loadGrid"+ctl.id+"();")}catch(t){}list.__isInitialized_=!0}},loadList=function(t,n){var a=mod.get(t),r;if(a){if(a._isLoaded_)return;r=mod.get(t,".CssFlexigridTable");var o=$(r);n?$(window).one("load",function(){o.reloadGrid(null,null,!1,!0)}):o.reloadGrid(null,null,!1,!0),a._isLoaded_=!0}};return mod.SetupList=function(){for(var t=0;t<arguments.length;++t)iterate(arguments[t],setupList)},mod.LoadList=function(){for(var t=0;t<arguments.length;++t)iterate(arguments[t],loadList)},mod.ActivateListForTab=function(t,n,a){$(document).ready(function(){GetCurrentTab(n)==a&&(SetupList(t),LoadList(t))})},mod.ActivateListForTabCliendIds=function(t,n,a,r){$(document).ready(function(){getCurrentTab(n)==a&&(setupList(t),loadList(t,r))})},mod.LoadTabContent=function(t,n){t._TabLoaded_!=!0&&(document.getElementById(n).ClientRefresh(),t._TabLoaded_=!0)},$.extend(mod,{boolValues:{true:"Tak",false:"Nie"},CSS:{Always:0,IfEmpty:1},CSSIncorrect:{text:"k-invalid"},CSSDisabled:{text:"k-state-disabled",textarea:"k-state-disabled",checkbox:"CSS_CheckBoxDisabled"}}),mod.List=function(){var t,n,a=function(){var b=IDs[n].split(";"),_,w=t.id;for(_=0;_<b.length;_+=1)if(w===b[_])return _;var I=t.closest("[data-pidx]")||document.activeElement.closest("[data-pidx]"),D=$(I);return D.length?D.data("pidx"):-1},r=function(b){(!t||!n)&&logger.LogError("Nie wywo\u0142ano metody List.Setup.");var _=a(),w=IDs[b].split(";")[_];return w||(w=IDs[b]),w},o=function(b){return function(){var _,w;for(_=0;_<arguments.length;_+=1)w=r(arguments[_]),b(w)}},l=function(b){return function(){return b(r(arguments[0]),arguments[1])}},u=function(b){return function(){var _,w;for(_=1;_<arguments.length;_+=1)w=r(arguments[_]),b(w,arguments[0])}},f=function(b,_){var w=(b?b.event:0)||window.event;t=w?w.target||w.srcElement:document.activeElement,n=_},v=function(b){showIf.apply(this,[b,!1])},S=function(b){showIf.apply(this,[b,!0])},h=function(b){showRowIf.apply(this,[b,!1])},g=function(b){showRowIf.apply(this,[b,!0])};return{Setup:f,SetValue:l(setVal),GetValue:l(getVal),Disable:o(disable),Enable:o(enable),Hide:o(v),Show:o(S),IsEmpty:l(isEmpty),IsDisabled:l(isDisabled),IsVisible:l(isVisible),Get:l(mod.get),HideRow:o(h),ShowRow:o(g),DisableIf:u(disableIf),ShowRowIf:u(showRowIf),ShowIf:u(showIf)}}(),mod}(VBP),BF=function(){var t={},n=!0,a=!1,r,o,l=function(x){return typeof x!="boolean"&&logger.LogError("Nieprawid\u0142owe parametry przekazane do funkcji BF.If"),n=x,t},u=function(){return n=!n,t},f=function(x){var V=VBP.IsDisabled(x);return V!==!0&&(n=!1,V===void 0&&(a=!0)),t},v=function(x){return f(x),a||(n=!n),t},S=function(x){var V=VBP.IsEmpty(x);return V!==!0?(n=!1,V===void 0&&(a=!0)):n=!0,t},h=function(x){return S(x),a||(n=!n),t},g=function(x,V){var N=VBP.Get(x);return N?VBP.GetValue(x)!==V?n=!1:n=!0:(n=!1,a=!0),t},b=function(x,V){return g(x,V),a||(n=!n),t},_=function(x){var V=VBP.Get(x);return V?n=VBP.IsVisible(x):(n=!1,a=!0),t},w=function(x){var V=VBP.Get(x);return V?n=!VBP.IsVisible(x):(n=!1,a=!0),t},I=function(x){return function(){if(n)return x.apply(this,arguments),t}},D=function(x,V){if(typeof V!="function"||arguments.length<2||t[x]!==void 0){logger.LogError("Nieprawid\u0142owe parametry przekazane do funkcji BF.Register");return}t[x]=I(V)},C=function(x){return o=!1,r=x,t},T=function(x){return o?(n=!1,t):(n=r===x,n&&(o=!0),t)},k=function(){return n=r!==void 0&&!o,t};return t.If=l,t.Else=u,t.IfDisabled=f,t.IfNotDisabled=v,t.IfEqual=g,t.IfNotEqual=b,t.IfEmpty=S,t.IfNotEmpty=h,t.IfVisible=_,t.IfNotVisible=w,t.Register=D,t.Switch=C,t.Case=T,t.Default=k,t.$=$,t.Get=function(){if(n)return VBP.Get.apply(this,arguments)},t.GetValue=function(){if(n)return VBP.GetValue.apply(this,arguments)},t.Dialog={},t.Dialog.Confirm=function(){return n&&Dialog.Confirm.apply(this,arguments),t},t.Dialog.Custom=function(){return n&&Dialog.Custom.apply(this,arguments),t},t.Dialog.Ok=function(){return n&&Dialog.Ok.apply(this,arguments),t},t.Click=function(){return n&&VBP.Click.apply(this,arguments),t},t.Disable=function(){return n&&VBP.Disable.apply(this,arguments),t},t.Enable=function(){return n&&VBP.Enable.apply(this,arguments),t},t.Hide=function(){return n&&VBP.Hide.apply(this,arguments),t},t.HideRow=function(){return n&&VBP.HideRow.apply(this,arguments),t},t.SetCorrect=function(){return n&&VBP.SetCorrect.apply(this,arguments),t},t.SetIncorrect=function(){return n&&VBP.SetIncorrect.apply(this,arguments),t},t.SetStyle=function(){return n&&VBP.SetStyle.apply(this,arguments),t},t.SetValue=function(){return n&&VBP.SetValue.apply(this,arguments),t},t.Show=function(){return n&&VBP.Show.apply(this,arguments),t},t.ShowRow=function(){return n&&VBP.ShowRow.apply(this,arguments),t},t}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(this==null)throw new TypeError;var n=Object(this),a=n.length>>>0;if(a===0)return-1;var r=0;if(arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=1/0&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=a)return-1;for(var o=r>=0?r:Math.max(a-Math.abs(r),0);o<a;o++)if(o in n&&n[o]===t)return o;return-1}),IsPrecedentFormDirty=function(){var t=document.getElementById("DDM_DATA_DIRTY_HF");return t?IsDirty():!1},DisplaySelectionStatus=function(t,n,a,r){var o=$("#"+t).data("kendoArchGrid");if(!IsElementSelected(o)){Web.ClearMessages();var l=n;return o.total()==0&&(l=r),a=="Error"?Web.AddError(l):a=="Info"?Web.AddInfo(l):Web.AddWarning(l),!1}return!0},IsElementSelected=function(t){var n=typeof t=="string"?$("#"+t).data("kendoArchGrid"):t;return n.selected().length},IsDefaultSelected=function(t){if(t){var n=$("#"+t+" input:checked").val();return n==="Default"||n===void 0}return!1};var listSelectedIds;SetListSelectedIds=function(t){listSelectedIds=t},SelectElementsToLink=function(t,n,a,r,o,l){$(document).ready(function(){try{var u={callback:SetListSelectedIds};window.showModalDialog(t,u,"dialogHeight: "+n+"px; dialogWidth: "+a+"px; center: Yes; status: No")}catch{Web.AddError(o)}typeof listSelectedIds<"u"&&VBP.isArray(listSelectedIds)&&listSelectedIds.length&&(listSelectedIds=null,VBP.Click(r))})},clickButton=function(t){t=t||window.event;var n=t.srcElement||t.target;if(t.keyCode==13){var a=getSearchButton(n);if(a.length)return n.blur&&n.blur(),setTimeout(a[0].href.replace("javascript:",""),1),!1}},getSearchButton=function(t){return $(t).parents(".CSS_SearchPanel:first").find('A[id$="m_btSearch"]')};var focusIsSet=!1,orderGenerated=!1;FormReady=function(){},SetMarkDirtyEvent=function(){$("[md]").not("a").not("select").not(".hasDatepicker").change(MarkDirty),$("a[md]").click(MarkDirty),$("select[md]").add(".hasDatepicker").each(function(){if(this.onchange){var t=this.onchange;this.onchange=function(n){t.call(this,n),MarkDirty()}}else this.onchange=MarkDirty})},$(document).ready(function(){SetMarkDirtyEvent()}),ValidateFileSize=function(t,n,a,r){$.browser.msie&&$.browser.version<10||t.files&&t.files.length&&t.files[0].size>n&&(Web.ClearMessages(),Web.AddError(a),t.value=null,document.getElementById(r).value="false")},SetTabs=function(t){return $(t).parents("[class^=tabs_box_a]").each(function(){SetTab(this)})},FC=function(t){var n=document.getElementById(t);n&&SetTabs(n)&&InnerStartFocus(t)},FocusControl=function(t){if(!orderGenerated){FormReady=function(){FocusControl(t)};return}try{var n=document.getElementById(t);(n!=null&&n.tagName!=null&&n.tagName.toLowerCase().indexOf("select")>-1||$(n).is(":visible"))&&(SetTabs(n),n.innerHTML.match("<INPUT")&&(n=n.getElementsByTagName("input")[0]),$(n).focus())}catch{}},InnerStartFocus=function(t){var n=$("#"+t+":visible");return n.focus().length?(FocusOnCheckedIfRadio(t),!0):$("#ddl"+t+":visible").length?($("#"+t).focus(),!0):!1},FocusOnCheckedIfRadio=function(t){var n=$("#"+t+":visible").children().find("input[type=radio]:checked");n.length&&n.focus()},VBP_Focus_Element=function(t){var n=CLID(t),a,r;if(n){if(VBP.isArray(n)){for(r=0;r<n.length&&!document.getElementById(n[r]);r++);a=n[r]}else a=n;FocusControl(a),focusIsSet=!0}},SaveForced=function(){document.getElementById("DDM_SAVE_FORCED_HF").value="true"},ActionForced=function(){document.getElementById("DDM_ACTION_FORCED_HF").value="true"},VBP_ClearFileUpload=function(t){var n=document.getElementById(t),a=n.cloneNode(!1);a.onchange=n.onchange,a.addEventListener("change",function(r){InitUploadControl(a,r)}),n.parentNode.replaceChild(a,n),a.value=null},VBP_SetControlVisible=function(t,n){var a=t.split(";");for(i=0;i<a.length;i++)document.getElementById(a[i])&&(document.getElementById(a[i]).style.display=n?"":"none")};var listSelectedIds;SelectRelationFieldValue=function(t){listSelectedIds=t},SelectRelation=function(t,n,a,r,o,l){try{var u={callback:SelectRelationFieldValue,parentWindow:window};window.showModalDialog(t,u,"dialogHeight: "+n+"px; dialogWidth: "+a+"px; center: Yes; status: No")}catch{Web.AddError(l)}return typeof listSelectedIds<"u"&&VBP.isArray(listSelectedIds)&&listSelectedIds.length?(HandleRelationChange(r,o,listSelectedIds),!0):!1},ConfirmDeletingRelation=function(t,n,a,r,o){return VSF.Utility.GetTopWindow().Web.Dialog.Confirm(n,t,{Anuluj:function(){VSF.Utility.GetTopWindow().Web.Dialog.Hide()},Ok:function(){VSF.Utility.GetTopWindow().Web.Dialog.Hide(),HandleRelationChange(a,r,"-1"),__doPostBack(o,"DELETE")}}),!1},HandleRelationChange=function(t,n,a){MarkDirty(),document.getElementById(t).value=a;var r=document.getElementById(n);r.onchange&&r.onchange()},StoreControlWithLowestFocus=function(t){t.id&&(document.lowestTabIndexControl==null||t.tabIndex<document.lowestTabIndexControl.tabIndex)&&(document.lowestTabIndexControl=t)},FocusApopriateControl=function(t){focusIsSet||(document.lastTabIndexControl!=null&&document.lastTabIndexControl!=""?InnerStartFocus(document.lastTabIndexControl):t&&document.lowestTabIndexControl!=null&&InnerStartFocus(document.lowestTabIndexControl.id))},MarkDirty=function(){var t=document.getElementById("m_btnPrint");t&&(t.style.visibility="hidden"),document.getElementById("DDM_DATA_DIRTY_HF").value="true"},MarkClean=function(){var t=document.getElementById("m_btnPrint");t&&(t.style.visibility="visible"),document.getElementById("DDM_DATA_DIRTY_HF").value="false"},IsDirty=function(){var t=document.getElementById("DDM_DATA_DIRTY_HF");return t?t.value!="false":!1},SelectTab=function(t,n,a,r){var o,l,u,f;for(o=0;o<n;o+=1)u=CLID(t)+"_"+t+"m_div"+(o+1),panel=document.getElementById(u),panel&&(panel.style.display=a==o+1?"":"none"),btId=CLID(t)+"_"+t+"m_bt"+(o+1),l=document.getElementById(btId),l&&(l.className=a==o+1?"CSS_SelectedTab":"CSS_NotSelectedTab"),f=document.getElementById(r),f&&(f.value=a)},UploaderOkConfirm=function(t,n,a,r,o,l){return $("#"+l).text(""),VBP_SetControlVisible(t,"inline-flex"),VBP_SetControlVisible(n,""),VBP_SetControlVisible(a,""),VBP_SetControlVisible(r,""),document.getElementById(o).value="true",MarkDirty(),!1},UploaderCancelConfirm=function(t){return document.getElementById(t).value="false",!1},UploaderCancelButton=function(t,n,a,r,o,l){return VBP_SetControlVisible(t,""),VBP_SetControlVisible(r,""),VBP_SetControlVisible(n,"inline-flex"),VBP_SetControlVisible(a,"inline-flex"),VBP_SetControlVisible(o,"inline-flex"),document.getElementById(l).value="false",!1},UploaderChangeButton=function(t,n,a,r,o,l){return VBP_SetControlVisible(t,"inline-flex"),VBP_SetControlVisible(r,"inline-flex"),VBP_SetControlVisible(n,""),VBP_SetControlVisible(a,""),VBP_SetControlVisible(o,""),document.getElementById(l).value="true",!1},SetTab=function(t,n){if(t){var a=$(t),r=a.attr("ti");t.className.substr(0,10)=="tabs_box_a"&&(t=a.parent().prev().find('>[ti="'+r+'"]')[0],a=$(t));var o=a.parent(),l=o.find(">div"),u=a.find("div:lt(2)").add(t),f=l.add(l.find("div:lt(2)"));if(f.each(function(){this.className=this.className.replace("_act","_inact")}),u.each(function(){this.className=this.className.replace("_inact","_act")}),o.nextAll('[class^="tabs_body"]').find(">div").css("display","none").end().find('>div[ti="'+r+'"]').css("display","block"),n){var v=document.getElementById(n);v&&(v.value=parseInt(r)+1)}}},history.pushState&&(history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){return history.pushState(null,null,window.location.href),!1})),$.fn.Refresh=function(){return $.each(this,function(){this.ClientRefresh&&this.ClientRefresh()}),this},VBP.extendIDs=function(t,n){return $.each(Object.getOwnPropertyNames(n),function(a,r){t[r]?t[r]=(t[r]+";"+n[r]).split(";").filter(function(o,l,u){return u.indexOf(o)===l}).join(";"):t[r]=n[r]}),t},VBP.ToggleContainer=function(t){var n=setTimeout(function(){t=$(t),e=$("#"+t.data("input")),c=t.closest("[data-hash]");var a=t.hasClass("k-i-arrow-chevron-up")?"1":"0",r=""+c.data("default");a==="1"?(e.val("0"),t.addClass("k-i-arrow-chevron-down").removeClass("k-i-arrow-chevron-up")):(e.val("1"),t.addClass("k-i-arrow-chevron-up").removeClass("k-i-arrow-chevron-down")),UserSettings.Set(c.data("hash"),a===r?e.val():void 0),clearTimeout(n)},1)},VBP.DownloadFile=function(t){$("iframe[src='"+t+"']")[0]===void 0&&$("<iframe/>").attr("src",t).css({position:"absolute",top:-1e4,visibility:"hidden"}).appendTo("body")},VBP.Control=(()=>{let t=[];return{addScript:(r,o,l)=>{t.forEach(u=>{u.controlIds=u.controlIds.filter(f=>!r.includes(f))}),t=t.filter(u=>u.controlIds.length),t.unshift({controlIds:r.split(","),method:o,options:l})},initControl:r=>{var o=t.find(l=>l.controlIds.includes(r));new Function("arg",`$('#${r}').${o.method}(arg);`)(o.options)}}})(),VBP.UnselectPanelBar=function(t){$(".k-state-selected",t.item).removeClass("k-state-selected")},ALH=typeof ALH<"u"?ALH:function(){var t={},n,a=function(o,l,u){n=setTimeout(function(){clearTimeout(n),r(o||t.url,u||!1)},l||t.rTime)},r=function(o,l,u){$.ajax({url:"AutomaticLogoutHandler.ashx",data:{AId:t.AId},cache:!1,success:function(f){var v=VSF.Utility.GetTopWindow();f=="True"?window.location.href=o||t.url:l?v.location.href=AppPath+"/account/log-in":(a(),typeof u=="function"&&u())},error:function(){a(null,5e3,!0)}})};return{Setup:function(o){t=o,a()},Check:function(o,l){if(!n)throw"Mechanizm automatycznego wylogowywania nie zosta\u0142 zainicjalizowany.";clearTimeout(n),r(o,!1,l)}}}(),window.UserSettings=window.UserSettings||function(){var t=null,n=null,a=!1;return initFontSizeControl=function(r){n=StyleManager.AddRule("body","font-size: "+r+"px;",0).style;var o="FontSize",l=$(".a-user-settings"),u=l.find("span").html(r+"px").data(o,r),f=function(v){var S=u.data(o)+v;u.data(o,S),u.html(n.fontSize=S+"px"),UserSettings.Set(o,S)};us=l.find(".fa-plus").on("click",function(){!a&&f(1)}).end().find(".fa-minus").on("click",function(){!a&&f(-1)}).end()},initThemeControl=function(){$(".a-user-theme>div").kendoDropDownList({dataSource:StyleManager.GetThemes(),change:function(r){var o=$("<div/>").css({position:"fixed",top:0,left:0,height:"100%",width:"100%",zIndex:9999,backgroundColor:"rgba(0, 0, 0, .9)",color:"white",display:"table"}).html("<div><div>Prosz\u0119 czeka\u0107...</div></div>").appendTo("body").hide().fadeIn(function(){var l=$(this),u=r.sender.value();StyleManager.ChangeTheme(u),UserSettings.Set("Theme",u),$(this).fadeOut(function(){$(this).remove()})}).find(">div").css({display:"table-row"}).find(">div").css({display:"table-cell",textAlign:"center",verticalAlign:"middle",font:"bold 14pt Verdana",letterSpacing:1})},value:StyleManager.GetCurrentTheme()})},initFluidControl=function(){$(".a-user-fluid").change(function(){UserSettings.Set("Fluid",$(this.checked?".container":".container-fluid").toggleClass("container container-fluid").attr("class")),$(window).trigger("resize")}).attr("checked",!!$(".container-fluid").length)},get=function(r){a=!0,$.ajax({url:t,data:r,cache:!1,success:function(o){o&&location.reload()},complete:function(){a=!1}})},{Init:function(r,o){t=r+"/UserSettings.aspx"},Set:function(r,o){r&&o!==void 0?get({cmd:"SetData",key:r,data:o}):get({cmd:"RemoveData",key:r})},Get:function(r,o){r&&$.get(t,{cmd:"GetData",key:r},o)}}}(),RegisterNS("Web.Message"),Web.AddError=function(t,n,a,r,o,l,u){return Message.AddMessage("E",t,n,a,r,o,u)},Web.AddValidateError=function(t,n){return Message.AddValidateError(t,n)},Web.AddInfo=function(t,n,a,r,o){return Message.AddMessage("I",t,n,a,r,o)},Web.AddWarning=function(t,n,a,r,o){return Message.AddMessage("W",t,n,a,r,o)},Web.AddShield=function(t,n,a,r,o){return Message.AddMessage("S",t,n,a,r,o)},Web.ClearMessages=function(){Message.ClearMessages()},Web.ClearMessagesForTarget=function(t){Message.ClearMessagesForTarget(t)},Web.ClearMessagesExceptMainWindow=function(){Message.ClearMessagesExceptMainWindow()},Web.Message=function(){$(document).ready(function(){document.body.onresize=function(){var u=VSF.Utility.GetWindowSize(),f=u.x+u.y;document.oldSize!=f&&(t(),document.oldSize=f)}}),this.Element=null,this.ContainerInitialized=!1,this.AllMessages=new Array,this.StartMessages=new Array,this.AddMessage=function(u,f,v,S,h,g,b){var _;return(S==null||S=="")&&(S="top"),h==null&&(h=""),(g==null||g=="")&&(g="documentLayer"),_=this.AddError(u,f,v,S,h,g,this.Element,b),_},this.ClearMessages=function(){$("#"+Message.Element).length>0?ClearMainWindowMessage(this.Element):GetWindowFrame()!=null&&VSF.Utility.GetTopWindow().ClearMainWindowMessage(this.Element),this.ClearMessagesExceptMainWindow()},this.ClearMessagesExceptMainWindow=function(){$(".CSS_Error").remove(),$(".CssValidator_Error").remove(),$(".CssValidator_Warning").remove(),$(".CssValidator_Shield").remove(),$(".CssValidator_Info").remove(),$(".CssValidator_Error_Div").remove(),$(".CssValidator_ErrorField").removeClass("CssValidator_ErrorField"),$("br[type='error']").remove()},this.ClearMessagesForTarget=function(u){document.getElementById(this.Element)==null?VSF.Utility.GetTopWindow().ClearMessagesForTarget(u):ClearMessagesForTarget(u),$("[umTarget='"+u+"_umTargetError']").remove(),$("[umTarget='"+u+"_umTargetBr']").remove(),$("[umTarget='"+u+"_umTargetDiv']").remove();var f=$("#"+u);f.removeClass("CssValidator_ErrorField")},this.AddValidateError=function(u,f){var v=$("#"+f);if(v.length>0){var S=document.createElement("SPAN");S.className="k-widget k-tooltip-validation",S.innerHTML=u,v.append(S)}else this.AddError("E",u)},this.AddError=function(u,f,v,S,h,g,b,_){var w,I,D;if(u=="E"?(I="CSS_Error",vstyle="CssValidator_Error",D="Error"):u=="W"?(I="CSS_Warning",vstyle="CssValidator_Warning",D="Warning"):u=="S"?(I="CSS_Shield",vstyle="CssValidator_Shield",D="Shield"):u=="I"&&(I="CSS_Info",vstyle="CssValidator_Info",D="Info"),h=="")Message.ContainerInitialized?$("#"+Message.Element).length>0?Message.ContainerInitialized?w=AddMainWindowMessage(this.Element,f,v,u,_):Message.StartMessages.push("E|"+f+"|"+_):window.frameElement!=null&&(VSF.Utility.GetTopWindow().Message.ContainerInitialized?w=VSF.Utility.GetTopWindow().AddMainWindowMessage(this.Element,f,v,u,_):VSF.Utility.GetTopWindow().Message.StartMessages.push("E|"+f+"|"+_)):Message.StartMessages.push("E|"+f+"|"+_);else{var C=$("#"+h),T=$("#"+h).parent().parent().attr("class");T.indexOf("CssFlexigrid")>=0&&(C=C.parent().parent());var k=$("#"+h).attr("class");if(typeof k<"u"&&k!==!1&&$("#"+h).attr("class").indexOf("hasDatepicker")>=0&&(C=C.parent()),C.length>0){var x=document.createElement("SPAN");x.id=h+"_umTargetError";var V=document.createAttribute("umTarget");V.nodeValue=h+"_umTargetError",x.setAttributeNode(V),x.className=vstyle,x.locationType=S;var N=$("#"+x.id);if(N.length>0&&N.remove(),x.innerHTML=f,g=="newLayer"){var F=CreateNewLayerDiv(h,S);$(F).append(x),n(F)}else S=="top"||S=="left"?(C.before(x),S=="top"&&C.before("<br type='error' umTarget='"+h+"_umTargetBr' />")):S=="bottom"||S=="right"?(C.after(x),S=="bottom"&&C.after("<br type='error' umTarget='"+h+"_umTargetBr' />")):S=="highlight"&&C.addClass("CssValidator_ErrorField")}}return w},CreateNewLayerDiv=function(u,f){var v=document.createElement("DIV");return v.umTarget=u+"_umTargetDiv",v.className="CssValidator_Error_Div",v.locationType=f,v.style.position="absolute",v.targetClientId=u,v.style.left=r(u)+"px",v.style.top=a(u)+"px",document.body.appendChild(v),v};function t(){$(".CssValidator_Error_Div").each(function(){this.style.left=r(this.targetClientId)+"px",this.style.top=a(this.targetClientId)+"px",n(this)})}function n(u){if(u.locationType=="top")u.style.top=u.offsetTop-u.clientHeight-1;else if(u.locationType=="right"){var f=u.offsetLeft+o(u.targetClientId)+1;u.style.left=f+"px"}else if(u.locationType=="bottom"){var f=u.offsetTop+l(u.targetClientId)+1;u.style.top=f+"px"}else u.locationType=="left"&&(u.style.left=u.offsetLeft-u.clientWidth-1)}function a(u){for(var f=document.getElementById(u),v=0;f!=null;)v+=f.offsetTop,f=f.offsetParent;return v}function r(u){for(var f=document.getElementById(u),v=0;f!=null;)v+=f.offsetLeft,f=f.offsetParent;return v}function o(u){var f=$("#"+u);return f.attr("class").indexOf("hasDatepicker")>=0?f.parent().width():f.width()}function l(u){var f=$("#"+u);return f.attr("class").indexOf("hasDatepicker")>=0?f.parent().height():f.height()}},Message=new Web.Message;var ArchITect={};(()=>{var t=ArchITect,n=function(){const o="control-data";u.PROVIDER_LIST="lists",u.PROVIDER_SCHEDULER="schedulers";function u(){this.controlProviderFunction={},this.controlProviderFunction[u.PROVIDER_LIST]=[],this.controlProviderFunction[u.PROVIDER_SCHEDULER]=[],this.storedOptions=f(),$(window).on("beforeunload",()=>{v()})}u.registerControl=function(h,g,b){u.instance.controlProviderFunction[g]=u.instance.controlProviderFunction[g].filter(_=>_.id!=h),u.instance.controlProviderFunction[g].push({id:h,provider:b})},u.storeControlOptions=function(){v()},u.getControlOptions=function(h,g){const b=u.instance.storedOptions.findLast(_=>_.url==S());if(b){const _=b.storage.find(w=>w.key==h);if(_)return _.value.find(w=>w.key==g)}};function f(){var h=sessionStorage.getItem(o);return h&&h.length>0?JSON.parse(h):[]}function v(){var h=Object.entries(u.instance.controlProviderFunction).map(function([g,b]){return b.length>0?{key:g,value:b.map(_=>_.provider())}:null}).filter(g=>g!=null);if(h.length>0){const g=S();u.instance.storedOptions=u.instance.storedOptions.filter(b=>b.url!=g),u.instance.storedOptions.push({url:g,storage:h}),u.instance.storedOptions=u.instance.storedOptions.slice(-5),sessionStorage.setItem(o,JSON.stringify(u.instance.storedOptions))}}function S(){return window.location.href.substring(0,window.location.href.indexOf("&"))}return u.instance=new u,u}();t.ControlOptionsStorage=n;var a=function(){o.PROVIDER_LIST="lists",o.PROVIDER_SCHEDULER="schedulers";function o(){this.providers={},this.providers[o.PROVIDER_LIST]=[],this.providers[o.PROVIDER_SCHEDULER]=[]}return o.init=function(){Mvc.Web.Breadcrumbs.manager.init()},o.clear=function(){Mvc.Web.Breadcrumbs.manager.clearBreadcrumbs()},o.registerListAdditionalUrlParams=function(l,u){o.instance.providers[l].push(u)},o.urlProvider=function(l){return function(u){return u.replace(/([?&]ElId=)-?\d+/,"$1"+l)}},o.modifyUrl=function(l){return o.instance.modifyUrl(l)},o.replaceAddress=function(l){return o.instance.replaceAddress(l)},o.AddPending=function(l){l.forEach(function(u){return u.setAttribute("data-breadcrumb-add","pending")})},o.prototype.modifyUrl=function(l){let u=l;var f=Object.entries(this.providers).map(function([v,S]){return S.length>0?`&${v}=`+btoa(JSON.stringify(S.map(function(h){return $.param(h())}))):""}).filter(v=>v.length>0);return f.length>0&&(u+=f.join("")),u},o.prototype.replaceAddress=function(l){history.pushState("","",l)},o.InvokeAction=function(l,u){return o.init(),function(){Mvc.Web.Breadcrumbs.manager.addBreadcrumbForCurrentPage(),__doPostBack(l,u)}},o.instance=new o,o}();t.Breadcrumbs=a;var r=function(){function o(){!o.instance&&$(window).bind(o.GetAllEvents(window),function(l){o.Last=l})}return o.GetAllEvents=function(l){var u=[];for(var f in l)f.indexOf("on")===0&&u.push(f.slice(2));return u.join(" ")},o.instance=new o,o.Is=function(l){return o.Last&&o.Last.type===l},o}();t.Events=r})(),WebForm_RestoreScrollPosition=function(){var t=window,n;try{n=window.self!==window.top}catch{}if(n){var a=$("div.portlet").first();if(!a.length)return!0;t=a[0]}return t.scrollTo({top:theForm.elements.__SCROLLPOSITIONY.value,left:theForm.elements.__SCROLLPOSITIONX.value,behavior:"instant"}),typeof theForm.oldOnLoad<"u"&&theForm.oldOnLoad!=null?theForm.oldOnLoad():!0};function WebForm_SaveScrollPositionSubmit(){return theForm.elements.__SCROLLPOSITIONY.value=window.pageYOffset,theForm.elements.__SCROLLPOSITIONX.value=window.pageXOffset,typeof this.oldSubmit<"u"&&this.oldSubmit!=null?this.oldSubmit():!0}function WebForm_SaveScrollPositionOnSubmit(){return theForm.elements.__SCROLLPOSITIONY.value=window.pageYOffset,theForm.elements.__SCROLLPOSITIONX.value=window.pageXOffset,typeof this.oldOnSubmit<"u"&&this.oldOnSubmit!=null?this.oldOnSubmit():!0}WebForm_ResetScrollPosition=function(){WebForm_IsFormValid()&&(theForm.elements.__SCROLLPOSITIONY.value=0,theForm.elements.__SCROLLPOSITIONX.value=0)};function WebForm_IsFormValid(){return typeof theForm<"u"&&theForm.elements.__SCROLLPOSITIONY!==void 0&&theForm.elements.__SCROLLPOSITIONX!==void 0}WebForm_IsFormValid()&&(theForm.oldSubmit=theForm.submit,theForm.submit=WebForm_SaveScrollPositionSubmit,theForm.oldOnSubmit=theForm.onsubmit,theForm.onsubmit=WebForm_SaveScrollPositionOnSubmit,theForm.oldOnLoad=window.onload,window.onload=WebForm_RestoreScrollPosition);var Diagnostic=function(){var diagnosticWindow,isIe,diagnosticWindowDiv;return{Setup:function(t,n,a){$(function(){try{var r=$("#"+t);r.length&&(diagnosticWindow=r),diagnosticWindow!=null&&($(".DiagnosticWindow",top.document.body).not(diagnosticWindow).remove(),diagnosticWindow.prependTo(top.document.body),diagnosticWindow.css({top:0,zIndex:9999,position:"fixed",left:"25%"}),diagnosticWindow.find(".title-row").children().css({"border-bottom":"1px solid black","font-size":"10pt","letter-spacing":"2px","font-variant":"small-caps",color:"#000080","font-weight":"bold"}),diagnosticWindow.find(".reference-row").children().css({"font-size":"8pt"}),diagnosticWindow.find(".child-row").children().css({"padding-left":"10px"}),isIe=navigator.appVersion.indexOf("MSIE")>0,isIe?diagnosticWindow.find(".not-in-ie").hide():diagnosticWindow.find(".in-ie").hide(),diagnosticWindow.find(".showHideButton").text("\u25BC"),diagnosticWindowDiv=diagnosticWindow.find("[id$='"+a+"']"))}catch{alert(n)}})},InitElement:function(buttonId,funcCall){$(function(){if(diagnosticWindow!=null){var button=diagnosticWindow.find("#"+buttonId);if($(button).hasClass("eventadded"))return;button.click(function(){return eval(funcCall),!1}).addClass("eventadded")}})},CloseWindow:function(){$(".DiagnosticWindow",top.document.body).remove()},OpenVersion:function(t){window.clipboardData.setData("Text","vbp-open-version:"+t)},ToggleWindow:function(){var t=diagnosticWindow.find(".expandable");isIe&&(t=t.not(".not-in-ie")),t.length&&(t.toggle(),t.is(":visible")?diagnosticWindow.find(".showHideButton").text("\u25B2"):diagnosticWindow.find(".showHideButton").text("\u25BC")),diagnosticWindowDiv&&diagnosticWindowDiv.length&&diagnosticWindowDiv.height()>200&&diagnosticWindowDiv.css({"overflow-y":"auto",height:"200px"})}}}();window.Diagnostic=Diagnostic,function(t){var n=window.kendo,a=n.ui,r=a.Widget,o=function(l){for(var u=Array.prototype.slice,f=0;f<document.styleSheets.length;f++)for(var v=document.styleSheets[f],S=v.cssRules.length-1;S>0;S--){var h=v.cssRules[S];if(typeof h.cssText=="string"&&h.cssText.indexOf(l)>-1)return h}return!1};a.plugin(r.extend({init:function(l,u){r.fn.init.call(this,l,u),u.theme="sass";var f=o("a-chart-background");new Function(`// Object this is kendoChart object.
`+u.code).call(t(l).kendoChart(t.extend({},u,{render:function(){if(!this.element.data("initialized")){var v=this.getAxis("value");if(v){this.element.data("initialized",!0);var S=Math.min.apply(null,this.options.series.map(function(g){return Math.min.apply(null,g.data)})),h=S-S%v.options.majorUnit;this._tooltip||this._initTooltip(),h>0&&this.setOptions({valueAxis:{min:h}}),this.setOptions({valueAxis:{axisCrossingValue:v.options.min}})}}},chartArea:{background:f?f.style.background:"white"}})).find("svg").attr("fill","none").end().data("kendoChart"))},options:{name:"ArchChart"}}))}(window.kendo.jQuery),function(t){var n=window.kendo,a=n.ui,r=a.Widget,o=function(u,f,v){return u.filter(function(S){return S[v.dataValueField]==f}).length},l=function(u,f){var v=u.value(),S=u.dataItems();if(f.value!==null&&!o(S,v,f)){var h={};h[f.dataTextField]=f.invalidItemMessage?f.invalidItemMessage:v,h[f.dataValueField]=v,u.dataSource.insert(0,h),u.select(f.placeholder||f.optionLabel?1:0)}};a.plugin(r.extend({init:function(u,f){f.filter=f.searchable?"contains":"none",r.fn.init.call(this,u,f);var v=f.searchable?"kendoComboBox":"kendoDropDownList",S=t(u)[v](f).data(v);f.asyncDB?S.one("dataBound",function(){(f.additionalItems||[]).map(function(h){var g={};g[f.dataTextField]=h.text,g[f.dataValueField]=h.id,S.dataSource.insert(0,g)}),l(S,f)}):l(S,f),t.extend(this,S)},options:{name:"ArchComboBox"}}))}(window.kendo.jQuery),function(t){if(!window.kendo)return;const n="kendoDropDownTree",a=window.kendo,r=a.ui,o=r.Widget,l=(f,v)=>{t(f).empty(),t(f).append(t("<option>",{value:v}))},u=(f,v,S)=>{for(const h of v)if(h[S]===f||h.items&&u(f,h.items,S))return!0};r.plugin(o.extend({init:function(f,v){v.searchable&&(v.filter="contains");const S=f.className;o.fn.init.call(this,f,v);const h=t(f)[n](v).data(n);t(f).parent().addClass(S);const g=h.value(),b=h.dataSource.flatView();if(g)if(u(g,b,v.dataValueField))l(f,g);else{var _={[v.dataValueField]:g,[v.dataTextField]:v.invalidItemMessage?v.invalidItemMessage:g};h.dataSource.insert(0,_)}h.bind("change",()=>{l(f,h.value())}),t.extend(this,h)},options:{name:"ArchDropDownTree"}}))}(window.kendo.jQuery),function(t){if(!window.kendo)return;var n="kendoEditor";function a(u){return DOMPurify.sanitize(u)}var r=window.kendo,o=r.ui,l=o.Widget;o.plugin(l.extend({init:function(u,f){l.fn.init.call(this,u,f),t(u)[n](t.extend({mobile:!0,deserialization:{custom:function(v){return a(v)}}},f)).data(n)},options:{name:"ArchEditor"}}))}(window.kendo.jQuery),window.ArchFilters=window.ArchFilters||function(){var t=[];return $.fn.aorClass=function(n,a){this[n?"addClass":"removeClass"](a)},{Init:function(n){t[n]=[]},Add:function(n,a){a.map(function(r){t[n].push(r)})},Values:function(n){var a=t[n];return a?a.map(function(r){try{return r()}catch(o){if(o instanceof TypeError)return"";throw o}}):[]},Json:function(n){return JSON.stringify(this.Values(n))}}}(),window.ArchGrids=window.ArchGrids||function(){var t={},n=function(a){for(var r in t)if(t.hasOwnProperty(r)&&t[r].element.attr("id")===a)return t[r];return null};return{Add:function(a,r){t[a]=r},Get:function(a){return t[a]},GetFormat:function(a,r){var o=t[a],l=o?o.options.columns.filter(function(u){return u.field.replace(" ","").replace("[","").replace("]","").replaceAll("'","")==r&&!!u.format}).map(function(u){return u.format}):null;return l&&l.length?l[0]:null},InvokeAction:function(a){var r=n(a.delegateTarget.id);if(r){var o=r.grid.dataItem($(a.target).closest("tr")),l=a.currentTarget.className.replace(/.*k-grid-(.{8}-.{4}-.{4}-.{4}-.{12}).*/,"$1");r.currentField.val(JSON.stringify(o.id)),__doPostBack(r.options.controlName,l)}}}}(),function(t){var n=window.kendo,a=n.ui,r=a.Widget,o="k-state-selected",l=[],u=function(g,b,_,w){w=w||0,l[w]&&clearTimeout(l[w]),l[w]=setTimeout(function(){clearTimeout(l[w]),b.call(g)},_||5)},f=function(g,b){if(g){var _=b.grid.tbody.find(">tr>");g.click&&_.click(function(){u(this,function(){typeof g.click=="function"&&g.click.call(t.extend(!0,b,{currentRow:this}))})}),g.dblClick&&_.dblclick(function(){u(this,function(){typeof g.dblClick=="function"&&g.dblClick.call(t.extend(!0,b,{currentRow:this}))})}),g.dataLoad&&typeof g.dataLoad=="function"&&g.dataLoad.call(t.extend(!0,b,{currentRow:this}))}},v=function(g){var b;Array.prototype.slice.call(g.grid.tbody[0].rows).map(function(_){var w=g.grid.dataItem(_);b=b||Object.keys(g.grid.dataItem(_)).filter(function(I){return/^AC[0-f]{32}/.test(I)}),b.map(function(I){w[I]&&JSON.parse(w[I]).map(function(D){t(_.querySelector("a.k-grid-"+D)).remove()})})})},S=function(g,b){for(var _,w=(_=b.split("")).length,I=g.split(""),D=0,C="",T=-1;++T<w;)if(_[T]!="#"){if(_[T]=="\\"&&(C+=_[++T]))continue;C+=_[T],T+1==w&&(I[D-1]+=C,C="")}else{if(!I[D]&&!(C=""))break;(I[D]=C+I[D++])&&(C="")}return I.join("")+C},h=function(g){try{var b=JSON.parse(g);if(b&&typeof b=="object")return b}catch{}return!1};hideNbsp=function(g){var b=g.html();b=b.replace(/&nbsp;/g,""),g.html(b)},setDataTitleForEachColumn=function(g){var b=g.columns,_,w=g.dataSource.group().length,I=g.tbody.find("tr[role='row']").not(".k-grouping-row").find("td");I.each(function(C){_=b[t(this).index()-w],_&&_.title!=="&nbsp"&&t(this).attr("data-title",_.title)});var D=t(".k-footer-template td").not(".k-group-cell");D.each(function(C){_=b[t(this).index()-w],_&&(t(this).attr("data-title",_.title),hideNbsp(t(this)))})},window.kendo.formatGridData=function(g,b,_){var w=ArchGrids.GetFormat(g,b);return _==null?"":w?S(_,w):_},a.plugin(r.extend({init:function(g,b){r.fn.init.call(this,g,b);var _=plugin=this,w=b.virtualScrolling?10:b.pageSize;if(t.extend(_,{filterPanel:t("#"+b.filterPanel),dataField:t("#"+b.dataField),currentField:t("#"+b.currentField),pageField:t("#"+b.pageField),totalRecords:t("#"+b.totalRecords),grid:t(g).kendoGrid({autoBind:!1,dataSource:{error:function(C){t("body").html(C.xhr.responseText)},transport:{read:{url:b.url,dataType:"json",cache:!1,data:function(C){return t.extend(window.ArchGrids.Get(b.controlId).getNavigationData(),C,{listId:b.listId,parentId:b.parentId,controlId:b.controlId,filter:ArchFilters.Json(b.controlId)})}}},serverPaging:!0,serverSorting:!0,serverFiltering:!0,pageSize:w,schema:b.schema,requestStart:function(C){_.showBusyIndicator()},requestEnd:function(C){_.hideBusyIndicator(),C&&C.response&&C.response.Errors&&C.response.Errors.map(function(T){Web.AddError(T)})},page:b.page,sort:b.sort},change:function(){_.storeSelection()},dataBound:function(){if(this.dataSource.page()>1&&!this.dataSource.data().length){_.loadPage(1);return}if(_.storePage(),_.storeTotalRecords(),_.options.refresh&&u(_,_.refresh,_.options.refresh*1e3,_.options.controlId),_.calculateColumnsHeaderPadding(),(_.options.autoFitColumn||!_.options.verticalOnMobile)&&_.autoFitColumn(_.options.autoFitColumn),_.options.verticalOnMobile&&setDataTitleForEachColumn(_.grid),_.isSingleSelection()||_.appendPagerSelectedElements(),_.grid.clearSelection(),_.dataField){var C=h(_.dataField.val());C&&C.length!==_.grid.selectedKeyNames().length&&(_.dataField.val(""),C.length<2&&(C=C.map(String),_.grid.dataSource.data().forEach(function(x){C.indexOf(String(x[_.grid.dataSource.options.schema.model.id]))>-1&&_.grid.select(_.grid.tbody.find("tr[data-uid="+x.uid+"]"))}),_.storeSelection()))}if(_.options.selectedIds){var T=JSON.parse(_.options.selectedIds);Array.isArray(T)&&_.grid.dataSource.data().map(function(x){T.indexOf(x[_.grid.dataSource.options.schema.model.id])>-1&&_.grid.select(_.grid.tbody.find("tr[data-uid="+x.uid+"]"))}),_.storeSelection(),delete _.options.selectedIds}f(b.events,_,_.grid),v(_);var k=this;k.tbody.find("tr").map(function(){var x=k.dataItem(this),V=x._settings_?JSON.parse(x._settings_):null;V&&t(this).addClass(V.rowCss)})},selectable:b.columns.filter(function(C){return C.selectable}).length?!1:b.selectionMode,persistSelection:!0,sortable:!0,resizable:!0,reorderable:!0,noRecords:!0,pageSize:w,toolbar:_.getToolsBar(),height:b.height?b.height:!1,scrollable:b.virtualScrolling?{virtual:!0}:!0,messages:{noRecords:VBP_Localization.GridEmpty},pageable:b.hideBottomPanel?!1:_.options.pageSize||b.virtualScrolling?{refresh:!0,pageSizes:!1,buttonCount:5,messages:{allPages:VBP_Localization.GridAll,display:VBP_Localization.GridDisplayingElements01Of2,empty:"",page:VBP_Localization.GridPage,of:VBP_Localization.GridOf0,itemsPerPage:VBP_Localization.GridPerPage,first:VBP_Localization.GridGoToFirstPage,previous:VBP_Localization.GridGoToPreviousPage,next:VBP_Localization.GridGoToNextPage,last:VBP_Localization.GridGoToLastPage,refresh:VBP_Localization.GridRefresh,morePages:VBP_Localization.GridMorePages}}:{refresh:!0,pageSize:0,numeric:!1,previousNext:!1,messages:{display:VBP_Localization.GridTotalElements2}},columns:b.columns}).data("kendoGrid")}),ArchITect.Breadcrumbs.registerListAdditionalUrlParams(ArchITect.Breadcrumbs.PROVIDER_LIST,function(){var C=_.grid.dataSource.sort();return t.extend(_.getNavigationData(),C?{sort:_.grid.dataSource.sort()}:{})}),ArchGrids.Add(_.options.controlId,_),_.filterPanel.unbind().bind("keypress",function(C){C.which===13&&t(this).find("a[id$=m_btSearch]").click()}).find("a[id$=m_btSearch]").click(function(C){Web.ClearMessages(),C.preventDefault(),_.refresh()}),(_.options.autoLoad||_.options.refresh)&&_.loadPage(),_.options.hideableColumns){var I="hc-"+this.options.listId.replace(/[^a-z0-9]/gi,""),D=t("#"+I).kendoMultiSelect({dataSource:_.options.columns,dataTextField:"title",dataValueField:"field",clearButton:!0,enable:!1,autoClose:!1,value:this.options.columns.filter(function(C){return C.hidden}).map(function(C){return C.field}),select:function(C){_.grid.hideColumn(C.dataItem.field)},change:function(C){_.setUserSettings(JSON.stringify(this.value()))},deselect:function(C){_.grid.showColumn(C.dataItem.field)}}).data("kendoMultiSelect");_.getUserSetting(function(C){D.enable(!0),C&&D.value(JSON.parse(C).map(function(T){return _.grid.hideColumn(T),T}))})}},options:{name:"ArchGrid",controlId:null,url:null,columns:{},listId:null,parentFormParameters:null,selectionMode:"row",pageSize:10,filterPanel:null,dataField:null,currentField:null,pageField:null,totalRecords:null,schema:{type:"json",data:"Data",total:"Total"},parentId:null,events:null,autoLoad:!0,hideBottomPanel:!1,page:1},selected:function(){return this.grid.selectedKeyNames()},storePage:function(){this.pageField.val(this.grid.dataSource.page())},storeTotalRecords:function(){this.totalRecords.val(this.total())},autoFitColumn:function(g){var b=this,_=b.grid.wrapper,w=_.find(".k-grid-header table"),I=_.find(".k-grid-content table"),D=t("<span/>").appendTo("body");let C=0;for(var T=0;T<b.grid.columns.length;T++){var k=w.find("colgroup col:eq("+T+")"),x=k.add(I.find("colgroup col:eq("+T+")")),V=w.find("thead>tr>th:eq("+T+")");D.html(V.text());const N=Math.max(D.outerWidth()+parseFloat(V.css("padding-left"))*2+5,60);g?x.width(N):C+=N}C!=0&&(w.css("min-width",C),I.css("min-width",C)),D.remove()},loadPage:function(g){var b=this.grid.dataSource,_=g||parseInt(this.pageField.val()||"1");t(function(){b.query({page:_,group:b.group(),filter:b.filter(),sort:b.sort(),pageSize:b.pageSize()})})},storeSelection:function(){const g=this.selected(),b=JSON.stringify(g);if(this.dataField.val(b),this.isSingleSelection())return;const _=this.grid.pager.element.find(".pager-selected-elements");g.length!==0?_.text(`${VBP_Localization.GridNumberOfSelectedElements}: `+g.length):_.text("")},appendPagerSelectedElements:function(){let g=this.grid.pager.element;g.find(".pager-selected-elements").length||g.append('<span class="k-pager-numbers pager-selected-elements"></span>')},isSingleSelection:function(){return this.options.selectionMode==="row"},refresh:function(){this.grid.dataSource.read(),this.grid.refresh()},showBusyIndicator:function(){},hideBusyIndicator:function(){},getNavigationData:function(){var g=this.grid,b=g.dataSource,_=g.select(),w=this.options;return{gridIndex:w.gridIndex,filter:ArchFilters.Json(w.controlId),page:b._page,selectedIds:_.length?JSON.stringify(_.map(function(){return g.dataItem(this)[b.options.schema.model.id]}).toArray()):-1,parentFormParameters:w.parentFormParameters}},total:function(){return this.grid.dataSource.total()},format:function(){},getUserSetting:function(g){plugin.showBusyIndicator(),t.ajax({url:plugin.options.url,data:{cmd:"GUSC",listId:plugin.options.listId},cache:!1,success:function(b){g(b)},complete:function(){plugin.hideBusyIndicator()}})},setUserSettings:function(g){plugin.hideBusyIndicator(),t.ajax({url:plugin.options.url,data:{cmd:"SUSC",listId:plugin.options.listId,data:g},cache:!1,complete:function(){plugin.hideBusyIndicator()}})},getToolsBar:function(){var g=this,b="",_="";if(g.options.toolbarTemplateId&&g.options.toolbarTemplateId.length>0){var w=n.template(t("#"+g.options.toolbarTemplateId).html().replace(/#/g,"\\#"));b=w([]).replace(new RegExp("&#39;","g"),"'")}if(g.options.hideableColumns){var I="hc-"+this.options.listId.replace(/[^a-z0-9]/gi,"");_=`<div style='max-width:100%; flex-wrap:wrap; margin: auto 0 auto auto;'  id='t${I}'><label for='${I}'>${VBP_Localization.GridHideColumns}</label><div style='min-width:250px' ><select id='${I}'></select></div></div>`}return g.options.toolbarTemplateId||g.options.hideableColumns?b.concat(_):null},calculateColumnsHeaderPadding:function(){var g=this;if(g.options.columns&&g.options.columns.length){var b=n.support.isRtl(g.grid.wrapper),_=g.grid.wrapper.find(".k-grid-header"),w=g.grid.dataSource.total(),I=n.support.scrollbar(!0);_.css(b?"padding-left":"padding-right",w?I:0)}}}))}(window.kendo.jQuery),function(t){if(window.kendo){var n="kendoMaskedTextBox",a=window.kendo,r=a.ui,o=r.Widget;UpdateStatistics=function(l,u,f){f.html(a.format(u.statPattern,u.maxLength,l.value.length))},r.plugin(o.extend({init:function(l,u){o.fn.init.call(this,l,u);const f=t(l)[n](u).data(n),v=u;t(l).on("focus",function(S){setTimeout(function(){f.raw().length===0&&S.target.setSelectionRange(0,0)},50)}),t.extend(this,f)},options:{name:"ArchMaskedTextBox"}}))}}(window.kendo.jQuery),function(t){var n=window.kendo,a=n.ui,r=a.Widget,o="kendoMultiSelect";a.plugin(r.extend({_control:null,init:function(l,u){var f=this;r.fn.init.call(f,l,u),(f._control=t(l)[o](t.extend({autoClose:!1,messages:{noData:VBP_Localization.GridNoDataFound}},u)).data(o)).wrapper.find(">div>ul").hide().before(f._control._div=t("<span class='a-multiselect-span'/>"))},options:{name:"ArchMultiSelect"},value:function(){return this._control.value()}}))}(window.kendo.jQuery),function(t){var n,a=window.kendo,r=a.ui,o=r.Widget,l=function(){return window.customRuleIndex=(window.customRuleIndex||0)+1};r.plugin(o.extend({init:function(u,f){o.fn.init.call(this,u,f);var v=this.options,S=t(u),h="kendoProgressBar",g=S[h](v).data(h),b=S.parent().attr("title",v.title?v.title+": "+v.value:v.value);if(v.title&&t("<div/>").addClass("a-progressbar-title").html(v.title).insertBefore(S),v.color){var _="custom-bar-color-"+l();StyleManager.AddRule("."+_,"background-color: "+v.color+" !important;"),S.find(".k-state-selected").addClass(_)}},options:{name:"ArchProgressBar",icon:null,iconPosition:"left",showStatus:!1}}))}(window.kendo.jQuery),function(t){if(!window.kendo)return;function n(h,g){h.preventDefault();let b=h.event.id>0&&g.update||h.event.id<1&&g.create?{k:"WP"}:"";setTimeout(()=>{__doPostBack(h.sender.element[0].id,JSON.stringify({action:h.event.id>0?1:3,id:h.event.id,startDate:h.event.start,endDate:h.event.end}),b)},0)}function a(h,g){h.preventDefault(),__doPostBack(h.sender.element[0].id,JSON.stringify({action:2,id:h.event.id,startDate:h.event.start,endDate:h.event.end}),g.delete?{k:"WP"}:"")}function r(h,g){h.preventDefault(),__doPostBack(h.sender.element[0].id,JSON.stringify({action:4,id:h.event.id,startDate:h.start,endDate:h.end}),g.move?{k:"WP"}:"")}function o(h,g){h.preventDefault(),__doPostBack(h.sender.element[0].id,JSON.stringify({action:5,id:h.event.id,startDate:h.start,endDate:h.end}),g.resize?{k:"WP"}:"")}function l(h,g){h.views.forEach(_=>_.selected=!1);var b=h.views.find(_=>g.type.toLowerCase().includes(_.type.toLowerCase()));b&&(b.selected=!0)}function u(h){setTimeout(()=>{if(h.action=="today"){const g=new Date;switch(h.view){case"month":{const b=new Date(g.getFullYear(),g.getMonth(),g.getDate()),_=new Date(b);_.setDate(b.getDate()+1),h.sender.select({start:b,end:_});break}case"week":case"day":{const b=new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours()),_=new Date(b);_.setMinutes(30),h.sender.select({start:b,end:_});break}}}},1)}var f=window.kendo,v=f.ui,S=v.Widget;v.plugin(S.extend({init:function(h,g){g.resources&&g.resources[0].dataSource.forEach(w=>{/^#[0-9A-F]{8}$/i.test(w.color)&&(w.color="#"+w.color.slice(3)+w.color.slice(1,3))}),S.fn.init.call(this,h,g),storedOptions=ArchITect.ControlOptionsStorage.getControlOptions(ArchITect.ControlOptionsStorage.PROVIDER_SCHEDULER,h.id),storedOptions&&(g.date=storedOptions.date,l(g,storedOptions)),g.workDayStart&&(g.workDayStart=new Date(g.workDayStart)),g.workDayEnd&&(g.workDayEnd=new Date(g.workDayEnd));var b="kendoScheduler",_=t(h)[b](t.extend({mobile:!0},g)).data(b);_.bind("edit",w=>{n(w,g.eventWPReloadType)}),_.bind("remove",w=>{a(w,g.eventWPReloadType)}),_.bind("moveEnd",w=>{r(w,g.eventWPReloadType)}),_.bind("resizeEnd",w=>{o(w,g.eventWPReloadType)}),_.bind("navigate",u),ArchITect.ControlOptionsStorage.registerControl(h.id,ArchITect.ControlOptionsStorage.PROVIDER_SCHEDULER,function(){const w=_.view().options;return{key:h.id,date:_.date().toJSON(),type:w.type}})},options:{name:"ArchScheduler"},resize(h){this.element.is(":visible")&&this.element.resize()}}))}(window.kendo.jQuery),function(t){var n=window.kendo,a=n.ui,r=a.Widget;a.plugin(r.extend({init:function(o,l){r.fn.init.call(this,o,l),l.dataType==="percentage"&&(l.tooltip={format:"{0:#,#.##}%"});var u=function(T){if(l.relatedTextBoxControlName){var k=t("#".concat(l.relatedTextBoxControlName)),x=+T.value.replace(/,/g,".");if(x!==+k.val().replace(/,/g,".")&&(k.data().kendoNumericTextBox.value(x),k.data().kendoNumericTextBox._events.change))for(var V=0;k.data().kendoNumericTextBox._events.change[V];)k.data().kendoNumericTextBox._events.change[V](),V++}},f=function(){l.disableRelatedControl&&(t("#".concat(l.relatedTextBoxControlName)).prev("input").blur(),t("#".concat(l.relatedTextBoxControlName)).blur(),t("#".concat(l.relatedTextBoxControlName)).prev("input").addClass("k-state-disabled"),t("#".concat(l.relatedTextBoxControlName)).prev("input").attr("disabled",l.disableRelatedControl),t("#".concat(l.relatedTextBoxControlName)).addClass("k-state-disabled"),t("#".concat(l.relatedTextBoxControlName)).parent("span").addClass("k-state-disabled"),t("#".concat(l.relatedTextBoxControlName)).parent("span").parent("span").addClass("k-state-disabled"),t("#".concat(l.relatedTextBoxControlName)).parent("span").find("span").off())},v=function(){if(l.relatedTextBoxControlName){var T=+t("#".concat(l.relatedTextBoxControlName)).val().replace(/,/g,".");T!==I.value()&&(I.value(T),l.relatedTextBoxControlName&&I.wrapper.find(b).text(T))}},S=function(T){return T.toString().concat("%")},h=function(T){I.wrapper.find(b).text(S(T))},g="kendoSlider",b=".k-draghandle",_=function(T){T.sender._drag.element.html(T.value),l.dataType==="percentage"&&T.sender._drag.element.html(T.value.toString().concat("%"))},w=function(T){_(T),u(T.sender.element[0]),l.onChangeJs&&l.onChangeJs(),l.relatedTextBoxControlName||l.onChange&&l.onChange()},I=t(o)[g](t.extend({},l,{change:w,slide:_})).data(g),D=I._drag,C;D.element.removeAttr("title").html(D.options.value),t(document).ready(function(){l.relatedTextBoxControlName&&t("#".concat(l.relatedTextBoxControlName)).change(function(){v()}),v(),f()}),t(window).resize(function(){C&&clearTimeout(C),C=setTimeout(function(){I.resize(),clearTimeout(C)},50)}),l.readOnly&&I.enable(!1),this.value=function(T){I.value(T),this.options.dataType==="percentage"?h(I.value()):I.wrapper.find(b).text(I.value()),u(o)},this.getValue=function(){return I.value()},this.wrapper=I.wrapper,l.dataType==="percentage"&&h(this.getValue())},options:{name:"ArchSlider"}}))}(window.kendo.jQuery),function(t){var n,a=window.kendo,r=a.ui,o=r.Widget,l=function(h){return!h.ctrlKey&&!h.altKey&&(h.keyCode>=41&&h.keyCode<=122&&h.keyCode!=46||h.keyCode==32||h.keyCode>186)},u=function(h){var g=h.value;return g.replace(/[\r\n]/g,"").length+g.replace(/[^\n]/g,"").length*2},f=function(h,g){var b=h.target.value,_=l(h),w=h.keyCode===13?2:_?1:0,I=u(h.target)+w;w&&I>g&&h.preventDefault()},v=function(h,g){var b=h.val().substring(0,g.maxLength);h.val(b.substring(0,g.maxLength-b.replace(/[^\n]/g,"").length))},S=function(h,g,b){g.statPattern&&t(b).next().html(a.format(g.statPattern,g.maxLength,u(h)))};r.plugin(o.extend({_control:null,init:function(h,g){var b=this,_=t(h),w=g;o.fn.init.call(b,h,w),b.wrapper=_.parent(),b.element=_,h.onchange&&_.change(h.onchange)&&(h.onchange=null),w.change&&_.change(w.change),w.maxLength&&_.bind("paste",function(I){clearTimeout(_.data("tm")),_.data("tm",setTimeout(function(){clearTimeout(_.data("tm")),v(_,w),S(I.target,w,b.wrapper)}))}).bind("keydown",function(I){f(I,w.maxLength)}).bind("keyup",function(I){S(I.target,w,b.wrapper)}).bind("blur",function(){v(_,w)}),b.wrapper.after('<div class="a-tb-stats"/>'),_.hasClass("k-state-disabled")&&b.wrapper.addClass("k-state-disabled"),S(h,w,b.wrapper)},options:{name:"ArchTextArea",statPattern:"{1}/{0}"}}))}(window.kendo.jQuery),function(t){if(window.kendo){var n="kendoTextBox",a=window.kendo,r=a.ui,o=r.Widget;UpdateStatistics=function(l,u,f){f.html(a.format(u.statPattern,u.maxLength,l.value.length))},r.plugin(o.extend({init:function(l,u){o.fn.init.call(this,l,u);const f=t(l),v=u,S=f.parent();var h=t(l)[n](u).data(n);if(v.statPattern&&v.statPattern.length>0){const g=t('<div class="a-tb-stats"/>');f.bind("keyup",function(b){UpdateStatistics(b.target,v,g)}),S.append(g),setTimeout(function(){UpdateStatistics(l,v,g)},0)}t.extend(this,h)},options:{name:"ArchTextBox"}}))}}(window.kendo.jQuery),function(t){var n=window.kendo,a=n.ui,r=a.Widget,o="addClass",l="append",u="attr",f="data",v="kendoCalendar",S="kendoPopup",h="<span/>";a.plugin(r.extend({init:function(g,b){r.fn.init.call(this,g,b);var _,w=this,I={unselectable:"on",role:"button"},D=t(g).removeClass()[o]("k-input").wrap(t(h)[o]("k-widget k-datepicker k-header")).wrap(t(h)[o]("k-picker-wrap k-doublepicker-wrap k-state-default")).parent().prepend(t(h)[o]("k-select a-left")[u](I)[l](t(h)[o]("k-icon k-i-calendar")[u]("unselectable","on").html("select")))[l](t(h)[o]("k-select")[u](I)[l](t(h)[o]("k-icon k-i-calendar")[u]("unselectable","on").html("select"))).end(),C=w.options,T=D.parent().parent(),k=function(){return D[f](_?"from":"to")},x=function(B){B&&D[f](_?"from":"to",B),D.val(["from","to"].map(function(Z){return n.toString(D[f](Z),C.format)}).join(C.glue))},V=t('<div style="height:250px;width:250px"></div>').appendTo("body")[v]({change:function(){x(this.value()),N.close()},min:C.min&&new Date(C.min),max:C.max&&new Date(C.max)})[f](v),N=V.wrapper[S]({anchor:T,open:function(){V.value(k())}})[f](S),F=V.min(),G=V.max();D.siblings().click(function(){_=t(this).hasClass("a-left"),V[_?"max":"min"](D[f](_?"to":"from")),V[_?"min":"max"](_?F:G),V.wrapper.width(T.width()),N.open()}).end()[f]({from:F,to:G}).css("textAlign","center"),C.value&&D[f]({from:new Date(C.value.from),to:new Date(C.value.to)}),x(),D.kendoMaskedTextBox({mask:C.mask+C.glue+C.mask,rules:{"~":/\./}})},options:{name:"FromToPicker",format:"yyyy-MM-dd"},value:function(){var g=this.element[f]();return{From:g.from,To:g.to}},exactValue:function(){return this.element.val()},formattedValue:function(){var g=this.element.val().split("...");return{From:g[0],To:g[1]}}}))}(window.kendo.jQuery),function(t){var n=window.kendo,a=n.ui,r=a.Widget,o=t.proxy,l="change",u="progress",f="error",v=".generalInfo",S=r.extend({init:function(h,g){r.fn.init.call(this,h,g);var b=this,_=b.options,w=_.withTime?"kendoDateTimePicker":"kendoDatePicker",I=t(h);const D=I.closest(".popup-window").length>0;let C=null;D&&(C=I.closest(".portlet-wrapper"),C.css("position","relative")),I.data("method",w).kendoMaskedTextBox({mask:_.mask||"00/00/0000",size:_.size,rounded:_.rounded})[w]({format:_.format||"MM/dd/yyyy",parseFormats:_.parseFormats||["MM/dd/yyyy","MM/dd/yy"],min:_.min||void 0,max:_.max||void 0,size:_.size,rounded:_.rounded,popup:{appendTo:C}}).closest(".k-datepicker"),I.add(I.parent().parent()).removeClass("k-textbox"),b.wrapper=b.element.data(w).bind("change",function(){b.trigger(l)}).wrapper,!g.showCalendarButton&&b.wrapper.addClass("a-hide-calendar"),(_.type<2||_.type==3)&&b.wrapper.addClass("a-single-button").find(".k-link-"+(_.type?"date":"time")).remove()},options:{name:"MaskedDatePicker",dateOptions:{}},events:[l],destroy:function(){var h=this;r.fn.destroy.call(h),n.destroy(h.element)},value:function(h){var g=this.element.data(this.element.data("method"));if(h===void 0)return g.value();g.value(h)}});a.plugin(S)}(window.kendo.jQuery),InitPasswordEye=function(t){const a=$(`#${t}`).parent();a.addClass("k-input-icon"),a.append("<span class='k-icon k-icon-24 k-i-preview'><span class='k-icon k-icon-24 k-i-line'/></span>");const r=$(".k-icon.k-i-line",a);$(".k-icon.k-i-preview",a).click(()=>{r.toggleClass("k-i-line");const l=$("input",a);l.attr("type",l.attr("type")==="password"?"text":"password")})},function(t){if(window.kendo){var n=window.kendo,a=n.ui,r=a.Widget;a.plugin(r.extend({init:function(o,l){r.fn.init.call(this,o,l),this.enable=function(u){this.element.find("li>input").prop("disabled",!u)[u?"removeClass":"addClass"]("k-state-disabled")}},options:{name:"RadioButtonList"}}))}}(jQuery);function Logger(t,n){var a=n,r={};r.Fatal=5,r.Error=4,r.Warning=3,r.Info=2,r.Debug=1;var o=function(l,u){r[l]>=r[a]&&$.ajax({cache:!1,url:t,type:"POST",data:{logLevel:l,logMessage:escape("[JavaScript] "+u)},contentType:"application/x-www-form-urlencoded",dataType:"json"})};this.LogFatal=function(l){o("Fatal",l)},this.LogError=function(l){o("Error",l)},this.LogWarning=function(l){o("Warning",l)},this.LogInfo=function(l){o("Info",l)},this.LogDebug=function(l){o("Debug",l)},this.Register=function(){var l=this;window.onerror=function(u,f,v){var S="Error message: "+u+" Address: "+f+" Line: "+v;return l.additionalData&&(S+="Additional data: "+l.additionalData,l.additionalData=null),alert(S),l.LogError(S),!0}}}var mpaObjectEnum={ZipCode:0,Province:1,District:2,Community:3,Locality:4,Street:5,properties:{0:{name:"ZipCode",value:0,guid:"0cdf26c6-b9ec-4b49-999a-d6e63b1f7428"},1:{name:"Province",value:1,guid:"1348a382-74a6-4f71-b760-1ef9ccbd12fd"},2:{name:"District",value:2,guid:"e3a1c88f-6d41-4dab-88fc-3e088fd0b427"},3:{name:"Community",value:3,guid:"79295248-36d7-4429-ab05-1ec3e2de803b"},4:{name:"Locality",value:4,guid:"b578bf3b-fb3f-4844-a134-55353bc10136"},5:{name:"Street",value:5,guid:"78ecf089-96a3-4b9b-b450-2e4b1764ff79"}}};CreateEmptyMpaFilter=function(){return new MpaFilter("","","","","","")},MpaFilter=function(t,n,a,r,o,l){this.ClickSelector=!1,this.ActiveMpaControl=!1,this.SearchSelect=!1,this.SearchText="",this.LastSearchText="",this.ZipCodeId=l,this.ZipCodeValue="",this.ZipCodeLock=!1,this.ZipCodeLockLoad=!1,this.ProvinceId=t,this.ProvinceValue="",this.ProvinceSelect="",this.ProvinceLock=!1,this.ProvinceLockLoad=!1,this.ProvinceAlternativePath="",this.SelectedProvinceIndex=0,this.SelectedProvinceValue=null,this.DistrictId=n,this.DistrictValue="",this.DistrictSelect="",this.DistrictLock=!1,this.DistrictLockLoad=!1,this.DistrictAlternativePath="",this.SelectedDistrictIndex=0,this.SelectedDistrictValue=null,this.CommunityId=a,this.CommunityValue="",this.CommunitySelect="",this.CommunityLock=!1,this.CommunityLockLoad=!1,this.CommunityAlternativePath="",this.SelectedCommunityIndex=0,this.SelectedCommunityValue=null,this.LocalityId=r,this.LocalityValue="",this.LocalitySelect="",this.LocalityLock=!1,this.LocalityLockLoad=!1,this.LocalityAlternativePath="",this.SelectedLocalityIndex=0,this.SelectedLocalityValue=null,this.PreviousLocalityValue=null,this.StreetId=o,this.StreetValue="",this.StreetSelect="",this.StreetParentValue="",this.StreetLock=!1,this.StreetLockLoad=!1,this.StreetAlternativePath="",this.SelectedStreetIndex=0,this.SelectedStreetValue=null,this.TextDefaultOption="--Wybierz--",this.TextStreetOption="--Wpisz--",this.PrimaryZipCode=!1,this.ZipCodeNotVerify=!1,this.ContainsId=function(u){return this.ZipCodeId===u||this.ProvinceId===u||this.DistrictId===u||this.CommunityId===u||this.LocalityId===u||this.StreetId===u},this.IsEmpty=function(){return this.ZipCodeId===""&&this.ProvinceId===""&&this.DistrictId===""&&this.CommunityId===""&&this.LocalityId===""&&this.StreetId===""},this.UpdateFilterSelectedIndex=function(u,f){u==this.ProvinceId?this.SelectedProvinceIndex=f:u==this.DistrictId?this.SelectedDistrictIndex=f:u==this.CommunityId?this.SelectedCommunityIndex=f:u==this.LocalityId?this.SelectedLocalityIndex=f:u==this.StreetId&&(this.SelectedStreetIndex=f)},this.UpdateFilterSelectedValue=function(u,f){u==this.ProvinceId?this.SelectedProvinceValue=f:u==this.DistrictId?this.SelectedDistrictValue=f:u==this.CommunityId?this.SelectedCommunityValue=f:u==this.LocalityId?this.SelectedLocalityValue=f:u==this.StreetId&&(this.SelectedStreetValue=f)},this.GetFilterSelectedIndex=function(u){if(u==this.ProvinceId)return this.SelectedProvinceIndex;if(u==this.DistrictId)return this.SelectedDistrictIndex;if(u==this.CommunityId)return this.SelectedCommunityIndex;if(u==this.LocalityId)return this.SelectedLocalityIndex;if(u==this.StreetId)return this.SelectedStreetIndex},this.GetFilterSelectedValue=function(u){if(u==this.ProvinceId)return this.SelectedProvinceValue;if(u==this.DistrictId)return this.SelectedDistrictValue;if(u==this.CommunityId)return this.SelectedCommunityValue;if(u==this.LocalityId)return this.SelectedLocalityValue;if(u==this.StreetId)return this.SelectedStreetValue}};var mpaFilters=[];function HiddenInput(t,n,a){var r=document.getElementById(n);r.setAttribute("type","hidden"),r.onchange=function(o){ChangeInput(t,a)}}function CreateDropDown(t,n,a){var r=t.TextDefaultOption;a=="Street"&&(r=t.TextStreetOption);var o='<select id="'+n+'_select" style="width:100%;" mpatype="'+a+'"><option id="0" value="-17" >'+r+"</option></select>";$("#"+n).before(o),$("#"+n+"_select").hide()}function CreateDropDownInit(t,n,a){var r=t.TextDefaultOption;a=="Street"&&(r=t.TextStreetOption);var o='<select id="'+n+'_init" style="width:100%;" mpatype="'+a+'"><option id="0" value="-17" >'+r+"</option></select>";$("#"+n).before(o),$("#"+n+"_init").searchable(),(t.PrimaryZipCode||a=="Street")&&OnReadOnlyStreetDropDown(t,a)}function OnReadOnlyStreetDropDown(t,n,a){var r=$("#"+GetFilterId(t,n)+"_init").siblings();$("#"+GetFilterId(t,n)+"_init").attr("disabled","disabled");for(var o=0;o<r.length;o++)r[o].className=="CssDropdownOptions"?r[o].setAttribute("disabled","disabled"):r[o].className=="CssDropdownInput"&&(r[o].setAttribute("readonly","readonly"),r[o].setAttribute("disabled","disabled"))}function OffReadOnlyStreetDropDown(t,n){var a=$("#"+GetFilterId(t,n)+"_init").siblings();$("#"+GetFilterId(t,n)+"_init").removeAttr("disabled");for(var r=0;r<a.length;r++)a[r].className=="CssDropdownOptions"?a[r].removeAttribute("disabled"):a[r].className=="CssDropdownInput"&&(a[r].removeAttribute("readonly"),a[r].removeAttribute("disabled"))}InitDropDown=function(t,n,a,r){var o=a??!1,l=r??!1,u=GetFilterValue(t,n),f=GetFilterSelect(t,n),v=GetFilterLock(t,n),S=GetFilterLockLoad(t,n);if(f=f.slice(0,f.lastIndexOf(";")),f!=""&&u.indexOf(f)>-1&&!l?ChangeFiltrValueOrLockOrSelect(t,n,!0,"LockLoad"):ChangeFiltrValueOrLockOrSelect(t,n,!1,"LockLoad"),n=="Street"){var h=GetFilterParentSelect(t,"Street");h=h.slice(0,h.lastIndexOf(";"));var g=GetFilterValueParent(t,"Street");h!=""&&g!=""&&g.indexOf(h)===-1&&(v=!1)}if(v==!0||!o||S)RewriteFilterOptionToDropDownInit(t,n,l);else{var b=GetArrayFilterPathByMpaType(t,n);try{var _=GetFilterId(t,n),w=t.SearchText,I=VSoft.BusinessPlatform.Web.Services.Mpa.MpaServiceProxy,D=I.GetElementByTypeFilter({Name:w,TypeMpa:mpaObjectEnum.properties[mpaObjectEnum[n]].guid},b);if(D.Elements.length>0){for(var C="0",T=0;T<D.Elements.length;T++)C+=";"+D.Elements[T].Id;ClearMpaSelect(t,n),ClearMpaInit(t,n,l),AppendValueDropDownNotSearch($("#"+_+"_select"),D.Elements),AppendValueDropDownNotSearch($("#"+_+"_init"),D.Elements),ChangeFiltrValueOrLockOrSelect(t,D.TypeElement,C,"Value"),ChangeFiltrValueOrLockOrSelect(t,D.TypeElement,"","Select")}}catch(k){console.log(k)}}},RewriteFilterOptionToDropDownInit=function(t,n,a){var r=GetFilterId(t,n),o=document.getElementById(r+"_init"),l=document.getElementById(r+"_select");o.innerHTML="",a&&(o.options[o.length]=new Option);var u=t.TextDefaultOption;n=="Street"&&(u=t.TextStreetOption),o.options[o.length]=new Option(u,-17);for(var f=GetFilterPathByMpaType(t,n),v=0;v<l.options.length;v++)l.options[v].value.indexOf(f)>-1&&l.options[v].text.indexOf("--")==-1&&(o.options[o.length]=new Option(l.options[v].text,l.options[v].value))};function CreateGlobalFilter(t){var n='<input type="hidden" id="filter_mpa" ZipCodeId ZipCodeValue ZipCodeLock="false" ZipCodeLockLoad="false" ProvinceId ProvinceValue ProvinceSelect ProvinceLock="false" ProvinceLockLoad="false" ProvinceSearch="" DistrictId DistrictValue DistrictSelect DistrictLock="false" DistrictLockLoad="false" DistrictSearch="" CommunityId CommunityValue CommunitySelect CommunityLock="false" CommunityLockLoad="false" CommunitySearch="" LocalityId LocalityValue LocalitySelect LocalityLock="false" LocalityLockLoad="false" LocalitySearch="" StreetId StreetValue StreetSelect StreetLock="false" StreetLockLoad="false" StreetSearch="" />';$("#"+t).before(n)}function GetIDPartFromObject(t,n){for(var a=0;a<n.length;a++)if(n[a]!=null&&n[a].mpaName==t)return n[a].id;return"undefinied"}function SetIdsToGlobalFilter(t,n){t.ProvinceId=GetIDPartFromObject("Province",n),t.DistrictId=GetIDPartFromObject("District",n),t.CommunityId=GetIDPartFromObject("Community",n),t.LocalityId=GetIDPartFromObject("Locality",n),t.StreetId=GetIDPartFromObject("Street",n),t.ZipCodeId=GetIDPartFromObject("ZipCode",n)}CutCurrentIdFromPath=function(t){if(t.trim().length>0){var n=t.split(";");return n[n.length-1]}else return""},ChangeFiltrValueOrLockOrSelect=function(t,n,a,r){switch(r){case"Value":switch(n){case"Province":t.ProvinceValue=a;break;case"District":t.DistrictValue=a;break;case"Community":t.CommunityValue=a;break;case"Locality":t.LocalityValue=a;break;case"Street":t.StreetValue=a;break;case"ZipCode":t.ZipCodeValue=a;break}break;case"Lock":switch(n){case"Province":t.ProvinceLock=a;break;case"District":t.DistrictLock=a;break;case"Community":t.CommunityLock=a;break;case"Locality":t.LocalityLock=a;break;case"Street":t.StreetLock=a;break;case"ZipCode":t.ZipCodeLock=a;break}break;case"LockLoad":switch(n){case"Province":t.ProvinceLockLoad=a;break;case"District":t.DistrictLockLoad=a;break;case"Community":t.CommunityLockLoad=a;break;case"Locality":t.LocalityLockLoad=a;break;case"Street":t.StreetLockLoad=a;break;case"ZipCode":t.ZipCodeLockLoad=a;break}break;case"Select":switch(n){case"Province":t.ProvinceSelect=a;break;case"District":t.DistrictSelect=a;break;case"Community":t.CommunitySelect=a;break;case"Locality":t.LocalitySelect=a;break;case"Street":t.StreetSelect=a;break}break;case"AlternativePath":switch(n){case"Province":t.ProvinceAlternativePath=a;break;case"District":t.DistrictAlternativePath=a;break;case"Community":t.CommunityAlternativePath=a;break;case"Locality":t.LocalityAlternativePath=a;break;case"Street":t.StreetAlternativePath=a;break}break}};function GetFilterId(t,n){switch(n){case"Province":return t.ProvinceId;case"District":return t.DistrictId;case"Community":return t.CommunityId;case"Locality":return t.LocalityId;case"Street":return t.StreetId;case"ZipCode":return t.ZipCodeId}return""}function GetFilterValue(t,n){var a="0";switch(n){case"Province":a=t.ProvinceValue;break;case"District":a=t.DistrictValue;break;case"Community":a=t.CommunityValue;break;case"Locality":a=t.LocalityValue;break;case"Street":a=t.StreetValue;break;case"ZipCode":a=t.ZipCodeValue;break}return a}function GetFilterValueParent(t,n){var a="";switch(n){case"Street":a=t.StreetParentValue;break}return a}function GetFilterLock(t,n){var a=!1;switch(n){case"Province":a=t.ProvinceLock;break;case"District":a=t.DistrictLock;break;case"Community":a=t.CommunityLock;break;case"Locality":a=t.LocalityLock;break;case"Street":a=t.StreetLock;break;case"ZipCode":a=t.ZipCodeLock;break}return a}function GetFilterLockLoad(t,n){var a=!1;switch(n){case"Province":a=t.ProvinceLockLoad;break;case"District":a=t.DistrictLockLoad;break;case"Community":a=t.CommunityLockLoad;break;case"Locality":a=t.LocalityLockLoad;break;case"Street":a=t.StreetLockLoad;break;case"ZipCode":a=t.ZipCodeLockLoad;break}return a}GetFilterSelect=function(t,n){switch(n){case"Province":return t.ProvinceSelect;case"District":return t.DistrictSelect;case"Community":return t.CommunitySelect;case"Locality":return t.LocalitySelect;case"Street":return t.StreetSelect}return""};function GetFilterAlternativePath(t,n){switch(n){case"Province":return t.ProvinceAlternativePath;case"District":return t.DistrictAlternativePath;case"Community":return t.CommunityAlternativePath;case"Locality":return t.LocalityAlternativePath;case"Street":return t.StreetAlternativePath}return""}function GetFilterLevelDown(t){switch(t){case"ZipCode":return"Province";case"Province":return"District";case"District":return"Community";case"Community":return"Locality";case"Locality":return"Street";case"Street":return""}return""}function GetFilterLevelUp(t){switch(t){case"Province":return"ZipCode";case"District":return"Province";case"Community":return"District";case"Locality":return"Community";case"Street":return"Locality"}return""}function GetFilterParentSelect(t,n){switch(n){case"District":return t.ProvinceSelect;case"Community":return t.DistrictSelect;case"Locality":return t.CommunitySelect;case"Street":return t.LocalitySelect}return""}function GetArrayFilterValue(t,n){var a=[];for(var r in n){var o=GetFilterValue(t,n[r]),l=GetFilterId(t,n[r]);a.push({Ids:o.split(";").map(Number).filter(function(u){return u!=0&&u!=-17}),InputValue:$("#"+l).val(),TypeGuid:mpaObjectEnum.properties[mpaObjectEnum[n[r]]].guid})}return a}function GetArrayFilterSelect(t,n){var a=[];for(var r in n){var o=GetFilterSelect(t,n[r]);a.push({Ids:o.split(";").map(Number).filter(function(l){return l!=0&&l!=-17}),TypeGuid:mpaObjectEnum.properties[mpaObjectEnum[n[r]]].guid})}return a}function MpaOnChange(t,n){var a=t.onchange,r=this;t.onchange=function(o){n.call(r,o),a&&a.call(r,o)}}function PinOnChangeMpaSelect(t,n){var a=document.getElementById(n.id+"_init");MpaOnChange(a,n.mpaName=="Street"?function(r){OnChangeMpaSelectStreet(t,n.mpaName)}:function(r){OnChangeMpaSelect(t,n.mpaName)})}function PinOnChangeMpaZipCodeInput(t,n){var a=document.getElementById(n.id);MpaOnChange(a,function(r){OnChangeMpaZipCodeInput(t,n.mpaName)}),a.onkeyup=function(r){r.keyCode==13&&OnChangeMpaZipCodeInput(t,n.mpaName)}}function ChangeInput(t,n){if(!$("#"+GetFilterId(t,n)).val()&&!t.ClickSelector&&!BaseInputUp(t,n)){var a=$("#"+GetFilterId(t,n)),r=a.parent();r.removeClass("failed"),SetupFiltrStructDown(t,n,!0),t.ZipCodeNotVerify||ClearFiltrStructDown(t,GetFilterLevelUp(n)),n==="Street"&&setTimeout(function(){UnlockStreetDropDown(t,t.LocalitySelect.replace(";",""))},0)}else{var a=$("#"+GetFilterId(t,n)),r=a.parent();r.addClass("failed")}}function OnChangeMpaSelect(t,n){var a=$("#"+GetFilterId(t,n)+"_init").val();if(a==null&&a==null&&(a="-17"),a!=null&&a!=null){var r=a.split(";"),o="";if(r.length>0)try{if(!t.ClickSelector){var l="#"+GetFilterId(t,n),u=$(l),f=$(l+"_init").nextAll("input"),v=f.val();if(v)if($("#"+GetFilterId(t,n)+"_init").find("option[text='"+v+"']").val()==null){SetupFiltrStructDown(t,n,!0,!0),u.val(v);return}else try{a=$("#"+GetFilterId(t,n)+"_init").find("option[text='"+v+"']").val(),r=a.split(";"),$("#"+GetFilterId(t,n)+"_init").val(a)}catch(x){console.log(x)}o=v.trim().toLowerCase()}if(t.ClickSelector=!1,parseInt(r[r.length-1])==-17&&(ClearFiltrStructDown(t,n),$("#"+GetFilterId(t,n)).val(""),SetupFiltrStructDown(t,GetFilterLevelDown(n),!1)),parseInt(r[r.length-1])>-1){a==GetFilterAlternativePath(t,n)?SetupFiltrStructDown(t,GetFilterLevelDown(n),!0):ClearFiltrStructDown(t,n);var S=r[r.length-1];if(ChangeFiltrValueOrLockOrSelect(t,n,S+";","Select"),$("#"+GetFilterId(t,n)).val($("#"+GetFilterId(t,n)+"_init").find(":selected").text()),$("#"+GetFilterId(t,n)).prev().find("input").val($("#"+GetFilterId(t,n)+"_init").find(":selected").text()),GetFilterLock(t,n)==!1){var h=VSoft.BusinessPlatform.Web.Services.Mpa.MpaServiceProxy,g=h.GetStructUpMpaFilter({Id:S,TypeMpa:mpaObjectEnum.properties[mpaObjectEnum[n]].guid});if(g.length>0){for(var b=0;b<g.length;b++)if(g[b].BaseType!=n){var _=GetFilterId(t,g[b].BaseType);AppendOneValueDropDownNotSearch($("#"+_+"_select"),g[b]),AppendOneValueDropDownNotSearch($("#"+_+"_init"),g[b]),GetFilterLock(t,g[b].BaseType)==!1&&ChangeFiltrValueOrLockOrSelect(t,g[b].BaseType,g[b].Id+";","Value"),ChangeFiltrValueOrLockOrSelect(t,g[b].BaseType,g[b].Id+";","Select");var w=g[b].Path+";"+g[b].Id;$("#"+_+"_select").val(w),$("#"+_+"_init").val(w);var I=$("#"+_+"_init").children().filter(function(){return this.value===w}).text();$("#"+_).prev().find("input").val(I),$("#"+_).val(g[b].Name)}}}else switch(r.length){case 6:var k=GetFilterId(t,"Province"),T=GetFilterId(t,"District"),C=GetFilterId(t,"Community"),D=GetFilterId(t,"Locality");ChangeFiltrValueOrLockOrSelect(t,"Province",r[1]+";","Select"),$("#"+k+"_select").val(a.substr(0,a.indexOf(r[2])-1)),$("#"+k+"_init").val(a.substr(0,a.indexOf(r[2])-1)),$("#"+k).val($("#"+k+"_select").find(":selected").text()),$("#"+k).prev().find("input").val($("#"+k).val()),ChangeFiltrValueOrLockOrSelect(t,"District",r[2]+";","Select"),$("#"+T+"_select").val(a.substr(0,a.indexOf(r[3])-1)),$("#"+T+"_init").val(a.substr(0,a.indexOf(r[3])-1)),$("#"+T).val($("#"+T+"_select").find(":selected").text()),$("#"+T).prev().find("input").val($("#"+T).val()),ChangeFiltrValueOrLockOrSelect(t,"Community",r[3]+";","Select"),$("#"+C+"_select").val(a.substr(0,a.indexOf(r[4])-1)),$("#"+C+"_init").val(a.substr(0,a.indexOf(r[4])-1)),$("#"+C).val($("#"+C+"_select").find(":selected").text()),$("#"+C).prev().find("input").val($("#"+C).val()),ChangeFiltrValueOrLockOrSelect(t,"Locality",r[4]+";","Select"),$("#"+D+"_select").val(a.substr(0,a.indexOf(r[5])-1)),$("#"+D+"_init").val(a.substr(0,a.indexOf(r[5])-1)),$("#"+D).val($("#"+D+"_select").find(":selected").text()),$("#"+D).prev().find("input").val($("#"+D).val());break;case 5:var k=GetFilterId(t,"Province"),T=GetFilterId(t,"District"),C=GetFilterId(t,"Community");ChangeFiltrValueOrLockOrSelect(t,"Province",r[1]+";","Select"),$("#"+k+"_select").val(a.substr(0,a.indexOf(r[2])-1)),$("#"+k+"_init").val(a.substr(0,a.indexOf(r[2])-1)),$("#"+k).val($("#"+k+"_select").find(":selected").text()),$("#"+k).prev().find("input").val($("#"+k).val()),ChangeFiltrValueOrLockOrSelect(t,"District",r[2]+";","Select"),$("#"+T+"_select").val(a.substr(0,a.indexOf(r[3])-1)),$("#"+T+"_init").val(a.substr(0,a.indexOf(r[3])-1)),$("#"+T).val($("#"+T+"_select").find(":selected").text()),$("#"+T).prev().find("input").val($("#"+T).val()),ChangeFiltrValueOrLockOrSelect(t,"Community",r[3]+";","Select"),$("#"+C+"_select").val(a.substr(0,a.indexOf(r[4])-1)),$("#"+C+"_init").val(a.substr(0,a.indexOf(r[4])-1)),$("#"+C).val($("#"+C+"_select").find(":selected").text()),$("#"+C).prev().find("input").val($("#"+C).val());break;case 4:var k=GetFilterId(t,"Province"),T=GetFilterId(t,"District");ChangeFiltrValueOrLockOrSelect(t,"Province",r[1]+";","Select"),$("#"+k+"_select").val(a.substr(0,a.indexOf(r[2])-1)),$("#"+k+"_init").val(a.substr(0,a.indexOf(r[2])-1)),$("#"+k).val($("#"+k+"_select").find(":selected").text()),$("#"+k).prev().find("input").val($("#"+k).val()),ChangeFiltrValueOrLockOrSelect(t,"District",r[2]+";","Select"),$("#"+T+"_select").val(a.substr(0,a.indexOf(r[3])-1)),$("#"+T+"_init").val(a.substr(0,a.indexOf(r[3])-1)),$("#"+T).val($("#"+T+"_select").find(":selected").text()),$("#"+T).prev().find("input").val($("#"+T).val());break;case 3:var k=GetFilterId(t,"Province");ChangeFiltrValueOrLockOrSelect(t,"Province",r[1]+";","Select"),$("#"+k+"_select").val(a.substr(0,a.indexOf(r[2])-1)),$("#"+k+"_init").val(a.substr(0,a.indexOf(r[2])-1)),$("#"+k).val($("#"+k+"_select").find(":selected").text()),$("#"+k).prev().find("input").val($("#"+k).val());break}n=="Locality"&&setTimeout(function(){UnlockStreetDropDown(t,S)},0)}}catch(x){console.log(x)}}}function OnChangeMpaSelectStreet(t,n){var a=$("#"+GetFilterId(t,n)+"_init").val();if((a==null||a==null)&&(a="-17"),a!=null&&a!=null){var r=a.split(";");if(r.length>0)try{if(!t.ClickSelector){var o="#"+GetFilterId(t,n),l=$(o),u=$(o+"_init").nextAll("input"),f=u.val();if(f)if($("#"+GetFilterId(t,n)+"_init").find("option[text='"+f+"']").val()==null){SetupFiltrStructDown(t,n,!0,!0),l.val(f);return}else try{a=$("#"+GetFilterId(t,n)+"_init").find("option[text='"+f+"']").val(),r=a.split(";"),$("#"+GetFilterId(t,n)+"_init").val(a)}catch(S){console.log(S)}}if(t.ClickSelector=!1,parseInt(r[r.length-1])==-17&&$("#"+GetFilterId(t,n)).val(""),parseInt(r[r.length-1])>-1){var v=r[r.length-1];ChangeFiltrValueOrLockOrSelect(t,n,v+";","Select"),$("#"+GetFilterId(t,n)).val($("#"+GetFilterId(t,n)+"_init").find(":selected").text()),$("#"+GetFilterId(t,n)).prev().find("input").val($("#"+GetFilterId(t,n)+"_init").find(":selected").text())}}catch(S){console.log(S)}}}function OnChangeMpaZipCodeInput(t,n){var a="#"+GetFilterId(t,n),r=$(a),o=r.val(),l=!1,u=!1;if(5<=o.trim().length&&o.trim().length<=6)try{var f=VSoft.BusinessPlatform.Web.Services.Mpa.MpaServiceProxy,v=f.GetElementsFromZipCode(o);v.length>0?(ClearFiltrStructDown(t,"ZipCode"),FillControlSelectValueFromZipCode(t,v),ChangeFiltrValueOrLockOrSelect(t,"ZipCode",o,"Value"),t.ZipCodeNotVerify=!1):(l=!0,t.ZipCodeNotVerify=!0)}catch(S){console.log(S)}else l=!0,t.ZipCodeNotVerify=!0,u=!0;SetupFiltrStructDown(t,"ZipCode",l,l,u)}function SetupFiltrStructDown(t,n,a,r,o,l){if(n!=""){var u=0;for(var f in mpaObjectEnum)if(mpaObjectEnum.hasOwnProperty(f)&&!isNaN(parseInt(mpaObjectEnum[f]))){var v=mpaObjectEnum.properties[mpaObjectEnum[f]].name;if(u|=v===n,o&&(u=v===n),u){var S=$("#"+GetFilterId(t,v)),h=v===n?$(arguments.callee.caller.arguments[0].target||S.prev().find("input")):S,g=S.parent();if(S.length==0)return;if(f!=="ZipCode"){var b=h.val(),_=!!b&&b!=="--Wybierz--"&&b!=="--Wpisz--";r&&S.val(""),g[_&&a?"addClass":"removeClass"]("failed"),S.prev()[a?"hide":"show"](),S[0].setAttribute("type",a?"text":"hidden"),l&&S[0].setAttribute("disabled","disabled")}else g[a||r?"addClass":"removeClass"]("failed"),r!=null&&(a||r)&&ClearFiltrStructDown(t,n)}}}}function ClearFiltrStructDown(t,n,a){n!="ZipCode"&&SetupFiltrStructDown(t,GetFilterLevelDown(n),!1,!1);for(var r in mpaObjectEnum)if(!(r==="properties"||r==="ZipCode")&&(r==="Street"&&a==null&&OnReadOnlyStreetDropDown(t,"Street",!1),r==="Street"&&n=="ZipCode"&&(t.StreetParentValue=""),mpaObjectEnum.properties[mpaObjectEnum[n]].value<mpaObjectEnum.properties[mpaObjectEnum[r]].value)){ChangeFiltrValueOrLockOrSelect(t,mpaObjectEnum.properties[mpaObjectEnum[r]].name,"","Select"),(n=="ZipCode"||GetFilterLock(t,mpaObjectEnum.properties[mpaObjectEnum[r]].name)==!1)&&(ChangeFiltrValueOrLockOrSelect(t,mpaObjectEnum.properties[mpaObjectEnum[r]].name,"0","Value"),ChangeFiltrValueOrLockOrSelect(t,mpaObjectEnum.properties[mpaObjectEnum[r]].name,!1,"Lock"),ClearMpaSelect(t,mpaObjectEnum.properties[mpaObjectEnum[r]].name),ClearMpaInit(t,mpaObjectEnum.properties[mpaObjectEnum[r]].name)),ChangeFiltrValueOrLockOrSelect(t,n,!1,"LockLoad");var o=GetFilterId(t,mpaObjectEnum.properties[mpaObjectEnum[r]].name);$("#"+o+"_select").removeAttr("selected"),$("#"+o+"_select option[selected]").removeAttr("selected"),$("#"+o+"_select").val("-17"),$("#"+o).val(""),$("#"+o+"_init").removeAttr("selected"),$("#"+o+"_init option[selected]").removeAttr("selected"),$("#"+o+"_init").val("-17");var l=$("#"+o+"_init").find("option:selected").text();$("#"+o).prev().find("input").val(l)}}function BaseInputUp(t,n){for(var a=GetFilterLevelUp(n);a!=="ZipCode";){var r=$("#"+GetFilterId(t,a)).attr("type");if(r!==void 0&&r!=="hidden")return!0;a=GetFilterLevelUp(a)}return!1}function ClearMpaSelect(t,n){var a=document.getElementById(GetFilterId(t,n)+"_select");if(a!=null){a.innerHTML="";var r=t.TextDefaultOption;n=="Street"&&(r=t.TextStreetOption),a.options[a.length]=new Option(r,"-17")}}function ClearMpaInit(t,n,a){var r=document.getElementById(GetFilterId(t,n)+"_init");if(r!=null){r.innerHTML="",a&&(r.options[r.length]=new Option);var o=t.TextDefaultOption;n=="Street"&&(o=t.TextStreetOption),r.options[r.length]=new Option(o,"-17")}}function GetFilterPathByMpaType(t,n){var a=[],r=[],o=[];n=="Province"||(n=="District"?(o.push("Province"),a=GetArrayFilterValue(t,o),r=GetArrayFilterSelect(t,o)):n=="Community"?(o.push("District"),o.push("Province"),a=GetArrayFilterValue(t,o),r=GetArrayFilterSelect(t,o)):n=="Locality"?(o.push("Community"),o.push("District"),o.push("Province"),a=GetArrayFilterValue(t,o),r=GetArrayFilterSelect(t,o)):n=="Street"&&(o.push("Locality"),o.push("Community"),o.push("District"),o.push("Province"),a=GetArrayFilterValue(t,o),r=GetArrayFilterSelect(t,o)));var l=0;for(var u in a)if(r[u].Ids.length==1){l=r[u].Ids[0];break}else if(a[u].Ids.length==1){l=a[u].Ids[0];break}return l}function GetArrayFilterPathByMpaType(t,n){var a=[],r=[],o=[];n=="Province"||(n=="District"?(o.push("Province"),a=GetArrayFilterValue(t,o),r=GetArrayFilterSelect(t,o)):n=="Community"?(o.push("District"),o.push("Province"),a=GetArrayFilterValue(t,o),r=GetArrayFilterSelect(t,o)):n=="Locality"?(o.push("Community"),o.push("District"),o.push("Province"),a=GetArrayFilterValue(t,o),r=GetArrayFilterSelect(t,o)):n=="Street"&&(o.push("Locality"),o.push("Community"),o.push("District"),o.push("Province"),a=GetArrayFilterValue(t,o),r=GetArrayFilterSelect(t,o)));var l={IdArray:[],InputValue:"",TypeMpa:mpaObjectEnum.properties[0].guid};for(var u in r)if(r[u].Ids.length>0){l={IdArray:r[u].Ids,InputValue:r[u].InputValue,TypeMpa:r[u].TypeGuid};break}else if(a[u].Ids.length>0){l={IdArray:a[u].Ids,InputValue:"",TypeMpa:a[u].TypeGuid};break}return l}function FillControlSelectValueFromZipCode(t,n){var a=!1;UnlockDropDown(t);for(var r=0;r<n.length;r++){var o=GetFilterId(t,n[r].TypeElement);if(n[r].IsCollection)AppendValueDropDown($("#"+o+"_select"),n[r].Elements),AppendValueDropDown($("#"+o+"_init"),n[r].Elements),ChangeFiltrValueOrLockOrSelect(t,n[r].TypeElement,n[r].IdPath,"Value"),ChangeFiltrValueOrLockOrSelect(t,n[r].TypeElement,"","Select"),$("#"+o).val(""),n[r].TypeElement=="Street"&&(t.StreetParentValue=n[r].IdPathParent),n[r].TypeElement=="Street"&&a&&OffReadOnlyStreetDropDown(t,"Street");else{AppendValueDropDown($("#"+o+"_select"),n[r].Elements),AppendValueDropDown($("#"+o+"_init"),n[r].Elements),ChangeFiltrValueOrLockOrSelect(t,n[r].TypeElement,n[r].Id+";","Value"),ChangeFiltrValueOrLockOrSelect(t,n[r].TypeElement,n[r].Id+";","Select");var l=n[r].Elements[0].Path+";"+n[r].Id;$("#"+o+"_select").val(l),$("#"+o+"_init").val(l);var u=$("#"+o+"_select").children().filter(function(){return this.value===l}).text();if($("#"+o).prev().find("input").val(u),$("#"+o).val(n[r].Name),n[r].TypeElement=="Street"&&OffReadOnlyStreetDropDown(t,"Street"),n[r].TypeElement=="Locality")if(a=!0,n[r].AlternativeObject)OffReadOnlyStreetDropDown(t,"Street");else{var f=n[r].Id;setTimeout(function(){UnlockStreetDropDown(t,f)},0)}}n[r].AlternativeObject&&ChangeFiltrValueOrLockOrSelect(t,n[r].TypeElement,n[r].SelectIdPath,"AlternativePath"),ChangeFiltrValueOrLockOrSelect(t,n[r].TypeElement,!0,"Lock")}}function UnlockStreetDropDown(t,n){try{var a=VSoft.BusinessPlatform.Web.Services.Mpa.MpaServiceProxy,r=a.HasChildren({Id:n,TypeMpa:mpaObjectEnum.properties[mpaObjectEnum.Street].guid});r==!0?(OffReadOnlyStreetDropDown(t,"Street"),SetupFiltrStructDown(t,"Street",!1,!1,!0)):(OnReadOnlyStreetDropDown(t,"Street"),SetupFiltrStructDown(t,"Street",!0,!1,!0))}catch(o){console.log(o)}}function UnlockDropDown(t){try{OffReadOnlyStreetDropDown(t,"Province"),OffReadOnlyStreetDropDown(t,"District"),OffReadOnlyStreetDropDown(t,"Community"),OffReadOnlyStreetDropDown(t,"Locality")}catch(n){console.log(n)}}function AppendValueDropDown(t,n){if(t.length!=0)for(i=0;i<n.length;i++){var a=!1,r=n[i].Path+";"+n[i].Id;for(j=0;j<t.get(0).length;j++)if(t.get(0).options[j].value==r){a=!0;break}a==!1&&(t.get(0).options[t.get(0).length]=new Option(n[i].Name,r))}}function AppendValueDropDownNotSearch(t,n){for(i=0;i<n.length;i++)t.get(0).options[t.get(0).length]=new Option(n[i].Name,n[i].Path+";"+n[i].Id)}function AppendOneValueDropDownNotSearch(t,n){t.get(0).options[t.get(0).length]=new Option(n.Name,n.Path+";"+n.Id)}function ReadAndWriteValueFromInput(t,n){try{var a=!1,r=!0,o=0,l=GetValueInputWithInsert(n);if(t.PrimaryZipCode&&l.filter(function(b){return b.TypeMpa=="0cdf26c6-b9ec-4b49-999a-d6e63b1f7428"}).length===0)return;var u=VSoft.BusinessPlatform.Web.Services.Mpa.MpaServiceProxy,f=u.GetElementByInputValue(l,t.PrimaryZipCode);if(f.length>0){t.ZipCodeNotVerify=!1;for(var v=0;v<f.length;v++){var S=GetFilterId(t,f[v].TypeElement);if(f[v].IsCollection){if(AppendValueDropDown($("#"+S+"_select"),f[v].Elements),AppendValueDropDown($("#"+S+"_init"),f[v].Elements),ChangeFiltrValueOrLockOrSelect(t,f[v].TypeElement,f[v].IdPath,"Value"),ChangeFiltrValueOrLockOrSelect(t,f[v].TypeElement,"","Select"),f[v].IsCheck){var h=f[v].SelectIdPath;$("#"+S+"_select").val(h),$("#"+S+"_init").val(h),ChangeFiltrValueOrLockOrSelect(t,f[v].TypeElement,f[v].Id+";","Select");var g=$("#"+S+"_init").children().filter(function(){return this.value===h}).text();$("#"+S).prev().find("input").val(g),t.PrimaryZipCode&&OffReadOnlyStreetDropDown(t,f[v].TypeElement),f[v].TypeElement=="Locality"&&(a=!0,o=f[v].Id,f[v].AlternativeObject&&(SetupFiltrStructDown(t,"Street",!0),r=!1))}f[v].TypeElement=="Street"&&(t.StreetParentValue=f[v].IdPathParent)}else{if(AppendValueDropDown($("#"+S+"_select"),f[v].Elements),AppendValueDropDown($("#"+S+"_init"),f[v].Elements),ChangeFiltrValueOrLockOrSelect(t,f[v].TypeElement,f[v].Id+";","Value"),ChangeFiltrValueOrLockOrSelect(t,f[v].TypeElement,f[v].Id+";","Select"),f[v].IsCheck){var h=f[v].SelectIdPath;$("#"+S+"_select").val(h),$("#"+S+"_init").val(h);var g=$("#"+S+"_init").children().filter(function(){return this.value===h}).text();$("#"+S).prev().find("input").val(g)}f[v].TypeElement=="Locality"&&(a=!0,o=f[v].Id,f[v].AlternativeObject&&SetupFiltrStructDown(t,"Street",!0))}f[v].AlternativeObject&&(ChangeFiltrValueOrLockOrSelect(t,f[v].TypeElement,f[v].SelectIdPath,"AlternativePath"),SetupFiltrStructDown(t,GetFilterLevelDown(f[v].TypeElement),!0)),f[v].IsComplete&&ChangeFiltrValueOrLockOrSelect(t,f[v].TypeElement,!0,"Lock"),t.PrimaryZipCode&&f[v].TypeElement!="Street"&&OffReadOnlyStreetDropDown(t,f[v].TypeElement)}t.PrimaryZipCode&&a&&r&&setTimeout(function(){UnlockStreetDropDown(t,o)},0)}else SetupFiltrStructDown(t,"ZipCode",!0),t.PrimaryZipCode&&(t.ZipCodeNotVerify=!0)}catch{alert("B\u0142\u0105d po\u0142\u0105czenia z serwerem MPA. Od\u015Bwie\u017C stron\u0119 i spr\xF3buj ponownie.")}}function GetValueInputWithInsert(t){for(var n=[],a=0;a<t.length;a++){var r=document.getElementById(t[a].id);r!=null&&r.value!=""&&n.push({Id:0,Name:r.value,TypeMpa:mpaObjectEnum.properties[mpaObjectEnum[t[a].mpaName]].guid})}return n}function IsReadonlyForm(t){for(var n=!1,a=0;a<t.length;a++){var r=document.getElementById(t[a].id);r!=null&&r.className=="CSS_TextBoxDisabled"&&(n=!0)}return n}GetFilterById=function(t){if(t==null||t==""||t=="undefined")return null;for(var n=0;n<mpaFilters.length;n++)if(mpaFilters[n].ContainsId(t))return mpaFilters[n]},CreateMpaControl=function(t,n){for(var a=t,r=a[0].id.split(";"),o=0;o<r.length;o++){for(var l=[],u=0;u<a.length;u++){var f=a[u].id.split(";"),v={id:f[o],mpaName:a[u].mpaName};l.push(v)}var S=GetFilterById(r[o]);if(S==null){var h=CreateEmptyMpaFilter();RenderMpaControl(h,l,n),mpaFilters.push(h)}else RenderMpaControl(S,l,n)}};function RenderMpaControl(t,n,a){$(function(){if(t.ActiveMpaControl=!0,t.PrimaryZipCode=a,CreateGlobalFilter(n[0].id),SetIdsToGlobalFilter(t,n),!IsReadonlyForm(n)){for(var r=0;r<n.length;r++)if(document.getElementById(n[r].id)!=null){if($("#"+n[r].id).data("mpaInitialized")=="true")continue;if(n[r].mpaName!="ZipCode"){HiddenInput(t,n[r].id,n[r].mpaName),CreateDropDown(t,n[r].id,n[r].mpaName),CreateDropDownInit(t,n[r].id,n[r].mpaName),PinOnChangeMpaSelect(t,n[r]);var o=function(){var u=$(this).data("mpaType"),f=GetFilterId(t,u),v=$("#"+f),S=v.prev().find("input");return S.val()||(u!="Street"?ClearFiltrStructDown(t,GetFilterLevelUp(u)):ClearFiltrStructDown(t,GetFilterLevelUp(u),!0)),!0},l=$("#"+n[r].id);l.prev().find("input")[l.hasClass("CSS_TextBoxIncorrect")?"addClass":"removeClass"]("CSS_TextBoxIncorrect").data("mpaType",n[r].mpaName).change(o)}else PinOnChangeMpaZipCodeInput(t,n[r]);$("<i/>").addClass("k-icon k-i-warning").attr("title","Nie mo\u017Cna zweryfikowa\u0107 wprowadzonej warto\u015Bcia.").attr("style","display:none;").appendTo($("#"+n[r].id).parent().addClass("mpa")),$("#"+n[r].id).data("mpaInitialized","true")}setTimeout(function(){ReadAndWriteValueFromInput(t,n)},0)}})}(function(t){var n=r("searchable"),a=null;n.defaults={maxListSize:1e4,maxMultiMatch:1e4,exactMatch:!1,wildcards:!0,ignoreCase:!0,warnMultiMatch:"dopasowano {0} ...",warnNoMatch:"nie znaleziono ...",latency:200,zIndex:80},n.execute=function(o,l){var u=null,f=null,v=null;if(t.browser.msie&&parseInt(jQuery.browser.version)<7)return this;if(this.nodeName!="SELECT"||this.size>1)return this;var S=t(this),h={index:-1,options:null},g="lang",b=!1;t.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase()),t.browser.chrome&&(t.browser.safari=!1),t.meta&&(o=t.extend({},options,S.data()));var _=t("<div/>"),w=t("<div/>"),I=t("<input/>"),D=t("<select/>"),C=t("<option>"+o.warnMultiMatch.replace(/\{0\}/g,o.maxMultiMatch)+"</option>").attr("disabled","true"),T=t("<option>"+o.warnNoMatch+"</option>").attr("disabled","true"),k={getCurrentMpaFilter:function(E){var P;return E==null||E==""||E=="undefinied"?P=k.selectedFilterId():P=E,P==null?null:GetFilterById(P)},tryAssignMpaFilter:function(){var E=k.getCurrentMpaFilter();return E==null&&k.selectedFilterId().length>0?((a==null||a!=null&&!a.ContainsId(k.selectedFilterId()))&&k.generateEmptyMpaFilter(),a):E},generateEmptyMpaFilter:function(){a=CreateEmptyMpaFilter(),a.DistrictId=k.selectedFilterId()},selectedFilterId:function(){var E=S.get(0).id;return E==""||E=="undefined"?null:E.substring(0,E.lastIndexOf("_"))},option:function(E){return t(D.get(0).options[E])},selected:function(){return D.find(":selected")},selectedIndex:function(E){return E>-1&&(D.get(0).selectedIndex=E),D.get(0).selectedIndex},size:function(E){D.attr("size",Math.max(2,Math.min(E,20)))},reset:function(){if(S.get(0).selectedIndex-1!=S.data("index")){var E=S.get(0).selectedIndex,P=k.selectedFilterId(),L=k.tryAssignMpaFilter();if(L!=null){var A=S.get(0).options[E].text;A!=L.TextDefaultOption&&(L.PreviousLocalityValue=A),L.ActiveMpaControl&&InitDropDown(L,S.attr("mpatype"),!0);var O=S.get(0).length,R=Math.floor(o.maxMultiMatch/2),W=Math.max(0,E-R),U=Math.min(O,Math.max(o.maxMultiMatch,E+R)),z=E-W;D.empty(),this.size(U-W);for(var J=W;J<U;J++)D.append(t(S.get(0).options[J]).clone().attr(g,J-1));U>o.maxMultiMatch&&D.append(C),D.get(0).selectedIndex=z,L.UpdateFilterSelectedIndex(P,z)}}}};V();var x=!1;w.mouseover(function(){x=!0}),w.mouseout(function(){x=!1}),D.mouseover(function(){x=!0}),D.mouseout(function(){x=!1}),I.click(function(E){if(S.attr("disabled")===!0)return E.preventDefault(),!1;var P=k.getCurrentMpaFilter();b?F(null,E,!0):N(P,E,!0)}),I.blur(function(E){var P=k.getCurrentMpaFilter(),L=t(this).parent().siblings("input:hidden").attr("id")==null;L||(P.LastSearchText.length>0&&P.LastSearchText!="--Wybierz--"?(F(P,E),S.focus()):!x&&b&&F(null,E,!0))}),S.keydown(function(E){E.keyCode!=9&&!E.shiftKey&&!E.ctrlKey&&!E.altKey&&I.click()}),S.click(function(E){I.click()}),D.click(function(E){if(!(k.selectedIndex()<0)){var P=k.tryAssignMpaFilter();if(P!=null){if(P.ActiveMpaControl&&D.get(0).options.length>0){var L=D.get(0).options[0].value;D.find(":selected")&&D.find(":selected").get(0)&&(L=CutCurrentIdFromPath(D.find(":selected").get(0).value)),ChangeFiltrValueOrLockOrSelect(P,S.attr("mpatype"),L+";","Select")}P.ClickSelector=!0,F(P,E);var A=D.find("option:selected").text();S.attr("mpatype")=="Street"&&t("#"+t(this).parent().siblings("input:hidden").attr("id")).val(A),I.val(A)}}}),D.focus(function(E){I.focus()}),D.blur(function(E){x||F(null,E,!0),I.val(D.find("option:selected").text())}),w.click(function(E){I.click()}),I.keyup(function(E){if(S.attr("disabled")===!0)return E.preventDefault(),!1;if(jQuery.inArray(E.keyCode,new Array(9,13,16,33,34,35,36,38,40))>-1)return!0;var P=k.getCurrentMpaFilter();P!=null&&(t("#"+t(this).parent().siblings("input:hidden").attr("id")).val(this.value),v=t.trim(I.val().toLowerCase()),P.LastSearchText=P.SearchText,P.SearchText=v,G(),u=setTimeout(function(){ie(P)},o.latency))}),I.keydown(function(E){var P=k.tryAssignMpaFilter();if(P!=null){if(E.keyCode==9){if(P.ActiveMpaControl&&D.get(0).options.length>0){var L=D.get(0).options[0].value;D.find(":selected")&&D.find(":selected").get(0)&&(L=CutCurrentIdFromPath(D.find(":selected").get(0).value)),ChangeFiltrValueOrLockOrSelect(P,S.attr("mpatype"),L+";","Select"),P.ClickSelector=!0}F(P,E)}if(!(E.shiftKey||E.ctrlKey||E.altKey)){switch(E.keyCode){case 13:F(P,E),S.focus();break;case 27:F(P,E,!0),S.focus();break;case 33:k.selectedIndex()-D.attr("size")>0?k.selectedIndex(k.selectedIndex()-D.attr("size")):k.selectedIndex(0),Z(null);break;case 34:k.selectedIndex()+D.attr("size")<D.get(0).options.length-1?k.selectedIndex(k.selectedIndex()+D.attr("size")):k.selectedIndex(D.get(0).options.length-1),Z(null);break;case 38:k.selectedIndex()>0&&(k.selectedIndex(k.selectedIndex()-1),Z(null));break;case 40:k.selectedIndex()<D.get(0).options.length-1&&(k.selectedIndex(k.selectedIndex()+1),Z(null));break;default:return!0}return!1}}});function V(){var E=S.outerWidth(),P=S.outerHeight(),L=S.outerHeight()-2;E<1&&(E=S.css("width")),P<1&&(P=28),L<1&&(L=26),S.css("text-decoration","none"),S.height(L),_.css("position","relative"),w.addClass("CssDropdownOverlay").css({width:t(I).outerWidth(),height:P}),I.attr("type","text"),I.height(L),I.addClass("CssDropdownInput"),S.addClass("CssDropdownSelect");var A=t(S.get(0).parentNode).innerWidth();t(I).prev("select").width(A);var O=S.css("width"),R=E;S.css("width","auto"),R=R>S.outerWidth()?R:S.outerWidth(),S.css("width",O),D.hide(),k.size(S.get(0).length),D.css({top:L-1,width:R>0?R:E}).addClass("CssDropdownOptions");var W=/^\d+$/.test(S.css("z-index"))?S.css("z-index"):1;o.zIndex&&/^\d+$/.test(o.zIndex)&&(W=o.zIndex),w.css("z-index",W.toString(10)),I.css("z-index",(W+1).toString(10)),D.css("z-index",(W+3).toString(10));var U='<span unselectable="on" class="k-select" aria-label="select" role="button" tabindex="-1" style="pointer-events:none;" ><span class="k-icon k-i-arrow-s"></span></span>';S.wrap(_),S.after(w),S.after(I),S.after(U),S.after(D),S.hide()}function N(E,P,L,A){if(S.attr("disabled"))return!1;var O=P.currentTarget.value;typeof A>"u"&&(b=!b),k.reset();var R=k.selectedFilterId();if(S.prepend("<option />"),Z(E,R),te(E,R),L){var W=t(S.get(0).parentNode).innerWidth();t(D).width(W),D.show()}if(I.show(),I.focus(),I.select(),O!=null&&O!="--Wybierz--"&&O!="--Wpisz--")for(var U=D.get(0).options,z=0;z<U.length;z++)U[z].text==O&&(I.get(0).value=U[z].text,D.get(0).value=U[z].value);I.next("div").addClass("mpa-expanded"),S.get(0).selectedIndex=E.GetFilterSelectedIndex(R),typeof P<"u"&&P.stopPropagation()}function F(E,P,L){b=!1;var A;if(E==null?A=k.tryAssignMpaFilter():A=E,A!=null){if(t("#"+A[S.attr("mpatype")+"Id"]).change(),S.find(":first").remove(),G(),I.next("div").removeClass("mpa-expanded"),D.hide(),A.ActiveMpaControl&&InitDropDown(A,S.attr("mpatype"),!1),S.attr("mpatype")=="Street"&&P.keyCode==null){var O=document.getElementById(A.StreetId),R=D.get(0).selectedIndex;if(R==0){var W=A.LastSearchText;O.value!=W&&W!="--Wpisz--"&&W!="--Wybierz--"&&(t("#"+O.id).attr("value",W),t("#"+O.id).change())}}typeof L<"u"&&re(),L=="undefinied"&&(L=!1);var U=!L;if(S.attr("mpatype")=="Locality"&&(A.PreviousLocalityValue!=A.LastSearchText&&A.LastSearchText.length>0&&(U=!0),A.PreviousLocalityValue!=A.SelectedLocalityValue&&(U=!0)),A.LastSearchText="",P.keyCode==9){var z=1;B(A,U,z)}else B(A,U);typeof P<"u"&&P.stopPropagation()}}function G(){u!=null&&clearTimeout(u)}function B(E,P,L){var A=L??1;E.SearchSelect&&A>0&&E.LastSearchText&&(t.browser.msie||t.browser.mozilla||t.browser.opera||t.browser.safari||t.browser.chrome)&&A--,E.SearchSelect=!1,!(k.selectedIndex()<0||k.selected().get(0).disabled)&&(S.get(0).selectedIndex=parseInt(D.find(":selected").attr(g))+A,P==!0&&S.change(),S.data("index",new Number(S.get(0).selectedIndex)))}function Z(E,P){if(E==null)k.selectedIndex()>-1&&!k.selected().get(0).disabled?I.val(D.find(":selected").text()):I.val(S.find(":selected").text());else{var L=E.GetFilterSelectedIndex(P);if(L>-1){var A=L;L>D.get(0).options.length-1&&(A=D.get(0).options.length-1);var O=D.get(0).options[A].text;E.UpdateFilterSelectedValue(P,O),E.UpdateFilterSelectedIndex(P,A),I.val(O)}}}function te(E,P){if(!(E=="undefined"||E==null)){h.index=E.GetFilterSelectedIndex(P),h.options=new Array;for(var L=0;L<D.get(0).options.length;L++)h.options.push(D.get(0).options[L])}}function re(){D.empty();for(var E=0;E<h.options.length;E++)D.append(h.options[E]);k.selectedIndex(h.index),k.size(h.options.length)}function ne(E){var P=["/",".","*","+","?","|","(",")","[","]","{","}","\\","^","$"],L=new RegExp("(\\"+P.join("|\\")+")","g");return E.replace(L,"\\$1")}function ie(E){if(f==v){u=null;return}E.ActiveMpaControl&&ChangeFiltrValueOrLockOrSelect(E,S.attr("mpatype"),!1,"LockLoad");{var P=0;f=v,D.hide(),D.empty(),E.ActiveMpaControl&&InitDropDown(E,S.attr("mpatype"),!0,!0);var L=ne(v);o.exactMatch&&(L="^"+L),o.wildcards&&(L=L.replace(/\\\*/g,".*"),L=L.replace(/\\\?/g,"."));var A=null;o.ignoreCase&&(A="i"),v=new RegExp(L,A);for(var O=0;O<S.get(0).length&&P<o.maxMultiMatch;O++)if(S.get(0).options[O].text.trim().length>0&&(v.length==0||v.test(S.get(0).options[O].text)||S.get(0).options[O].value==-17)){var R=t(S.get(0).options[O]).clone().attr(g,O-1);S.data("index")==O&&R.text(S.data("text")),D.append(R),P++}E.LastSearchText=E.SearchText,E.SearchText="",E.SearchSelect=!0,P>=1?k.selectedIndex(0):P==0&&D.append(T),P>=o.maxMultiMatch&&D.append(C),k.size(P),D.show(),u=null}}function oe(E){try{if(E=parseFloat(E.replace(/[\s]*px/,"")),!isNaN(E))return E}catch(P){console.log(P)}return 0}};function r(o){var l=t[o]={};return t.fn[o]=function(u){u=t.extend(l.defaults,u);var f=this.length;return this.each(function(v){l.execute.call(this,u,f-v)})},l}})(jQuery),RegisterNS("Web.Dialog"),Web.Dialog.Confirm=function(t,n,a,r){var o=$("<div/>").appendTo("body").kendoDialog({width:"400px",title:n,buttonLayout:"normal",closable:!1,modal:!0,open:function(l){setTimeout(function(){l.sender.element.next().find(".k-primary").focus()})},content:"<p>"+t+"</p>",actions:Object.getOwnPropertyNames(a).map(function(l){return{text:l,action:a[l],primary:l===r}}),close:function(){o.destroy(),o=null}}).data("kendoDialog")},Web.Dialog.Hide=function(){},jQuery.uaMatch=function(t){t=t.toLowerCase();var n=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:n[1]||"",version:n[2]||"0"}},jQuery.browser||(matched=jQuery.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser),DoRefresh=function(t,n,a){setTimeout('try { (typeof CheckFormRefresh === "function") && CheckFormRefresh('+n+","+a+"); } catch(e) {}",t)},CheckFormRefresh=function(t,n){var a=document.getElementById("workflowInstanceId").value,r=document.getElementById("userName").value,o=document.getElementById("overviewFormId").value,l=document.getElementById("previousOperation").value,u=document.getElementById("previousWorkerStamp").value,f=document.getElementById("currentOperation").value,v=document.getElementById("currentWorkerStamp").value;try{var S;switch(n?S=VSoft.BusinessPlatform.Web.Services.JSon.RefreshFormService.RefreshForm(a,r,o,f,v):S=VSoft.BusinessPlatform.Web.Services.JSon.RefreshFormService.RefreshForm(a,r,o,l,u),S){case 0:t?__doPostBack("","SHOW_NEXT_FORM"):DoRefresh(2e3,t,n);break;case 1:__doPostBack("","SHOW_NEXT_FORM");break;default:DoRefresh(2e3,t,n);break}}catch(g){var h="RefreshFormService.RefreshForm call exception: "+g+"; workflowInstanceId: "+a+"; UserName: "+r+"; OverviewFormId: "+o;logger.LogError(h)}},StartCheckFormRefresh=function(t,n){DoRefresh(100,t,n)};function Validate(t){$(function(){Object.getOwnPropertyNames(t.Controls).map(function(l){t.Controls[l]=$("#"+t.Controls[l])}),t.Controls.SubmitButton.click(function(l){Web.ClearMessages();var u=!0;return o.map(function(f){var v=f(),S=v===!0;u&=S,!S&&v&&Web.AddError(v)}),!u&&l.preventDefault(),u})});var n=t.Controls,a=t.Messages,r=function(l,u){l[u?"removeClass":"addClass"]("k-invalid")},o=[function(){var l=!!n.ConfirmNewPassword.val();return r(n.ConfirmNewPassword,l),l||a.ConfirmRequired},function(){var l=!!n.NewPassword.val();return r(n.NewPassword,l),l||a.NewRequired},function(){return n.NewPassword.val()===n.ConfirmNewPassword.val()||a.Compare}]}RegisterNS("Web.Component.StandardH"),$(document).ready(function(){Web.Component.StandardH.Ready()}),Web.Component.StandardH.Ready=function(){try{oldLoadPage=LoadPageFrame,LoadPageFrame=function(t,n){oldLoadPage(t,n)}}catch{}$("#menu").fadeIn(600)},Web.Component.StandardH.OnHideUM=function(){var t=document.getElementById("center"),n=document.getElementById("info");n!=null&&t!=null&&(n.style.height="40px",t.style.bottom="60px")},Web.Component.StandardH.OnShowUM=function(){var t=document.getElementById("center"),n=document.getElementById("info");n!=null&&t!=null&&(n.style.height="129px",t.style.bottom="149px")},Web.Component.StandardH.ShowLeftSubMenu=function(){var t=document.getElementById("HideButtonImage");$(t).fadeIn();var n=document.getElementById("HideButtonImageContainer");n.style.display="";var a=document.getElementById("ShowButtonImage");a.style.display="none",$(a).fadeOut();var r=document.getElementById("ShowButtonImageContainer");r.style.display="none";var o=document.getElementById("SubMenuToggledItem");$(o).fadeOut();var l=document.getElementById("left");$(l).fadeIn();var u=document.getElementById("center");u.style.marginLeft="249px",IsCollapsedSubMenu=!1},Web.Component.StandardH.HideLeftSubMenu=function(){var t=document.getElementById("HideButtonImage");$(t).fadeOut();var n=document.getElementById("HideButtonImageContainer");n.style.display="none";var a=document.getElementById("ShowButtonImage");a.style.display="block",$(a).fadeIn();var r=document.getElementById("ShowButtonImageContainer");r.style.display="";var o=document.getElementById("SubMenuToggledItem");$(o).fadeIn();var l=document.getElementById("left");$(l).fadeOut();var u=document.getElementById("center");u.style.marginLeft="22px",IsCollapsedSubMenu=!0},window.StyleManager=window.StyleManager||function(){var t=document.createElement("style"),n=$("link").filter(function(){return/-theme.css/.test(this.href)}),a=function(){return this.href.replace(/^.+\/([a-z]+)-theme\.css$/i,function(r,o){return o})};return t.appendChild(document.createTextNode("")),document.head.appendChild(t),{AddRule:function(r,o,l){if("insertRule"in t.sheet)return t.sheet.cssRules[t.sheet.insertRule(r+"{"+o+"}",l)];if("addRule"in t.sheet)return t.sheet.cssRules[t.sheet.addRule(r,o,l)]},ChangeTheme:function(r){var o=new RegExp(r+"-theme.css","i");n.attr("rel","alternate").filter(function(){return o.test(this.href)}).attr("rel","stylesheet")},GetThemes:function(){return n.map(a).toArray()},GetCurrentTheme:function(){return n.filter("[rel=stylesheet]").map(a)[0]},ToggleFluid:function(){$(".container, .container-fluid").toggleClass("container container-fluid")}}}(),AsyncPanelUtils=window.AsyncPanelUtils||function(){var t=function(n){var a=$(n).parents("[role=tabpanel]:first");return a.length?a.parent().getKendoTabStrip().tabGroup.find("li[aria-controls="+a.attr("id")+"]").children().first():a};return{RefreshActionPanel:function(n){$("[data-role=action-panel]").html(n)},SetBusy:function(n){t(n).removeClass().addClass("k-loading"),kendo.ui.progress($(n),!0),RemoveIfblockLazy();var a=TOP(),r=a.document.getElementById("ifblock")||a.$('<div id="ifblock"/>',a.document).css({position:"fixed",top:0,left:0,height:"100%",width:"100%",zIndex:999999,backgroundColor:"white",cursor:"not-allowed",opacity:0}).appendTo(a.document.body)[0];r.onclick=r.ondblclick=r.onmousedown=r.onmouseup=null},SetIdle:function(n){t(n).addClass("k-complete"),kendo.ui.progress($(n),!1);var a=TOP();$("#ifblock",a.document).remove(),typeof a.ifblockTM<"u"&&a.clearTimeout(a.ifblockTM)}}}();var ElemName=null,ElemId=null,AttachAtepms=0,SelectedObject="input[type=submit], input[type=image], div[type=submit]",RefreshedUpdatePanelId,upr="$UP$REFRESH$";VSF.Utility.GetTopWindow().IsAsynCallback=!1,RemoveIfblock(),$(document).ready(function(){var t=setTimeout(function(){AttachToSubmit(),clearTimeout(t)},50)});function AttachToSubmit(){try{var t=theForm}catch{window.theForm=document.forms[0]}if(AttachAtepms<15&&theForm==null){AttachAtepms++;var n=setTimeout(function(){AttachToSubmit(),clearTimeout(n)},50);return}if(theForm!=null){var a=function(l,u){return RefreshUpdatePanel(!1,"POST")},r=function(l){try{return theForm.onsubmit1==r||theForm.onsubmit1==VSF.Utility.DisableOnSubmitFor5Seconds||theForm.onsubmit1==VSF.Utility.AddDisableOnSubmit||theForm.onsubmit1.toString().indexOf("VSFOnSubmit")>-1?(this.orginOnSubmit&&this.orginOnSubmit(),RefreshUpdatePanel(!1,"POST",null,null,l)):theForm.onsubmit1()!=!1?(this.orginOnSubmit&&this.orginOnSubmit(),RefreshUpdatePanel(!1,"POST",null,null,l)):!1}catch{return!0}},o=function(l,u){for(var f=0;f<l.length;f++)if($("#"+u.id).closest("#"+l[f]).length)return f;return-1};__doPostBack=function(l,u,f){var v=TryGetElement(l,u),S=$(v).closest("[updatepanel][data-nested]");if(v&&S.length&&S[0].getAttribute("data-nested")){var h=$(v).closest("form")[0],g=CheckIsInUpdatePanel(v,l,f,checkIfValidUUID(u)?u:null);return ElemName=g.ElemName,ElemId=g.ElemId,RefreshedUpdatePanelId=g.RefreshedUpdatePanelId,h.__EVENTTARGET.value=l,h.__EVENTARGUMENT.value=u,RefreshUpdatePanel(!1,"POST",null,null,v,S)}if((typeof theForm.length>"u"||!theForm.length)&&v&&(theForm=$(v).parents("form:first")[0]),f&&!f.k){kendo.destroy("#"+(f.up.constructor===Array?f.up[0]:f.up)),RefreshedUpdatePanelId=f.up,ElemName=u=="RO"?upr:l,theForm.__EVENTTARGET.value=l,theForm.__EVENTARGUMENT.value=u,f.os?f.os():theForm.onsubmit&&theForm.onsubmit();return}var g=CheckIsInUpdatePanel(v,l,f);if(g!==null)if(g.RefreshedUpdatePanelId.constructor===Array&&g.RefreshedUpdatePanelId.length>1){var b=o(g.RefreshedUpdatePanelId,v),_=g.RefreshedUpdatePanelId.splice(b,1),w=g.RefreshedUpdatePanelId;$("#"+_)[0].options.afterRefresh+=";TOP().upAr && TOP().upAr.r();",TOP().upAr={r:function(){for(var I in w)w.hasOwnProperty(I)&&__doPostBack(upr,"",{up:w[I],os:this.os});TOP().upAr=null},os:theForm.onsubmit},__doPostBack(l,u,{up:_,os:theForm.onsubmit});return}else ElemName=u=="RO"&&(!f||!f.k)?upr:g.ElemName,ElemId=g.ElemId,RefreshedUpdatePanelId=g.RefreshedUpdatePanelId;theForm.__EVENTTARGET.value=l,theForm.__EVENTARGUMENT.value=u,(IsWPAction(ElemId)||f&&f.k=="WP"||!theForm.onsubmit||IsCNNavigation(u)||(theForm.onsubmit===r||theForm.onsubmit===a)&&theForm.onsubmit(v)!=!1)&&(VSF.Utility.DisableOnSubmitFor5Seconds(),theForm.submit())},theForm.orginSubmit==null&&(theForm.oldSubmit==null?theForm.orginSubmit=theForm.submit:theForm.orginSubmit=theForm.oldSubmit),theForm.orginOnSubmit==null&&(theForm.oldOnSubmit==null?theForm.orginOnSubmit=theForm.onsubmit:theForm.orginOnSubmit=theForm.oldOnSubmit),theForm.onsubmit==null?theForm.onsubmit=a:(theForm.onsubmit1=theForm.onsubmit,theForm.onsubmit=r)}}function checkIfValidUUID(t){var n=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi;return n.test(t)}function TryGetElement(t,n){t=t.split("|")[0];var a,r=document.getElementsByName(t)[0]||document.getElementById(t);if(r=r||(a=t.replace(/[^0-9a-z_]/ig,"_"))&&document.getElementsByName(a)[0]||document.getElementById(a)||document.getElementById(VSF.Utility.Replace(t,"$","_")),!r&&n){var o=n.split("&")[1];if(o){const l=document.getElementById(o);if(l)return l.children[0]}}return r}function IsCNNavigation(t){return t&&t.length>5&&t.substr(0,5)=="BACK$"}function IsWPAction(t){if(!t)return!1;var n=$("#"+t);return n&&n.data("dst")==="WP"||n.attr("wp")==="1"||n.parents('[wp="1"]:first').length}function GetUpdatePanelFromTriggers(t){if(typeof _t2<"u")return _t2[t]||[];var n=[];if(typeof triggers<"u"){for(var a in triggers)if(triggers.hasOwnProperty(a))for(var r=triggers[a],o=0;o<r.length;o++)r[o]==t&&n.push(a)}return n}function CheckIsInUpdatePanel(t,n,a,r){var o,l;if(t!=null){if(typeof _t2<"u"){if($(t).parents("[updatepanel]").attr("data-nested"))var u=$(t).parents("[updatepanel]").find("[updatepanel]").attr("id");else var u=$(t).parents("[updatepanel]").attr("id");l=a&&a.k==="NUP"?u:(o=GetUpdatePanelFromTriggers(/\|popup$/.test(n)?n.replace(/[\:\$]/g,"_"):r??t.id))&&o.length&&o||u}else l=a||(t.updatePanels&&t.updatePanels.length>0?$(t.updatePanels[0]).attr("id"):(o=GetUpdatePanelFromTriggers(t.id))&&o.length&&o||$(t).parents("[updatepanel]").attr("id"));if(l)return{ElemName:n,ElemId:t.id,RefreshedUpdatePanelId:l};ElemName=null,ElemId=null,RefreshedUpdatePanelId=""}return o=GetUpdatePanelFromTriggers(n),a=a||{},$.extend({},a,{ElemName:n,ElemId:null,RefreshedUpdatePanelId:$.extend({},a,o)})}function ChcekIsInUpdatePanel(t,n){CheckIsInUpdatePanel(t,n)}function PushParam(t,n){if(n.name!="__CVS"&&n.name!="__VIEWSTATE"&&n.name!="__EVENTVALIDATION"&&n.name!="__EVENTTARGET"&&n.name!="__EVENTARGUMENT"&&!((n.type=="checkbox"||n.type=="radio"&&n.value!=null)&&n.checked==!1)){var a=n.name;(a==null||a=="")&&(a=n.id),t.push({name:a,value:n.value})}}function AttachEventParam(t,n){ElemName=n.name,ElemId=n.id,RefreshedUpdatePanelId=$(t).attr("id")}function BlockUpdatePanel(t){AsyncPanelUtils.SetBusy(t)}function UnblockUpdatePanel(t){AsyncPanelUtils.SetIdle(t)}function RemoveSrc(t,n,a){var r=AppPath!=""?t.indexOf(AppPath):t.indexOf(document.location.host)+document.location.host.length;return r<0?n:(t=t.substr(r,t.length),n=n.replace(t,""),n.replace(a+'=""',""))}function IsWholePage(t){if(t.length>5){var n=t.substr(0,5).toLowerCase();return n=="<!doc"||n=="<html"}return!1}function IsBusy(t){return t.length&&typeof t[0].busy<"u"&&t[0].busy>0}function UPInterval(t){var n=$("#"+t);if(n.length)if(n[0].queue.length){var a=n[0].queue.shift();ElemName=a.e,RefreshedUpdatePanelId=t,RefreshUpdatePanel(a.f,a.m,a.p,1)}else clearInterval(n[0].interval),n[0].interval=null}function RefreshUpdatePanel(a_Force,method,a_param,fq,dst,nestedPanel){if(!RefreshedUpdatePanelId)return!0;ArchITect.ControlOptionsStorage.storeControlOptions();var objDivMain,i,param=[],allInputs,innerView,cvs,ap;if(dst&&dst.getAttribute("data-dst")==="AP"&&(ap=$("[data-role=action-panel]"))&&ap.length?(RefreshedUpdatePanelId=ap.attr("id"),objDivMain=ap,$.extend(ap[0],{options:{url:window.location.href,AspControlClientID:RefreshedUpdatePanelId},busy:0,AttachPostBackEvent:function(){}})):objDivMain=$("#"+RefreshedUpdatePanelId),kendo.destroy(objDivMain),ElemName!=null||a_Force){if(IsBusy(objDivMain)){var up=objDivMain[0],upq=up.queue,p={f:a_Force,m:method,p:a_param,e:ElemName},uid=RefreshedUpdatePanelId;return fq?upq.unshift(p):upq.push(p),!up.interval&&(up.interval=setInterval(function(){UPInterval(uid)},50)),!1}if(VSF.Utility.GetTopWindow().IsAsynCallback=!0,objDivMain[0].busy++,BlockUpdatePanel(objDivMain),method=="POST"){if(ElemId!=""&&$("#"+ElemId).not("input[type='submit']").length==0&&param.push({name:ElemName,value:"Button"}),cvs=$("#V__CVS",objDivMain).val(),innerView=$("#V__VIEWSTATE",objDivMain).val(),objDivMain[0].contentOnly?allInputs=$("input,select,textarea",objDivMain[0]):allInputs=$("input,select,textarea"),cvs!=null&&cvs!=""&&param.push({name:"__CVS",value:cvs}),innerView!=null&&innerView!="")param.push({name:"__VIEWSTATE",value:innerView}),$("this, #V__EVENTARGUMENT").length>0&&param.push({name:"__EVENTARGUMENT",value:$("this, #V__EVENTARGUMENT").val()}),$("#V__EVENTVALIDATION",objDivMain).length>0&&param.push({name:"__EVENTVALIDATION",value:$("#V__EVENTVALIDATION",objDivMain).val()}),allInputs.not("input[type='submit']").not("#V__EVENTARGUMENT").not("#V_CVS").not("#V__VIEWSTATE").not("#V__EVENTVALIDATION").each(function(t){PushParam(param,this)});else if(nestedPanel&&nestedPanel.length){var nestedForm=$("#"+dst.id).closest("form");param.push({name:"__CVS",value:nestedForm.find("#__CVS").val()}),param.push({name:"__VIEWSTATE",value:nestedForm.find("#__VIEWSTATE").val()}),nestedForm.find("#__EVENTARGUMENT").length>0&&param.push({name:"__EVENTARGUMENT",value:nestedForm.find("#__EVENTARGUMENT").val()}),nestedForm.find("#__EVENTVALIDATION").length>0&&param.push({name:"__EVENTVALIDATION",value:nestedForm.find("#__EVENTVALIDATION").val()}),allInputs.not("input[type='submit']").not("input[type='button']").each(function(t){PushParam(param,this)})}else param.push({name:"__CVS",value:$("this, #__CVS").val()}),param.push({name:"__VIEWSTATE",value:$("this, #__VIEWSTATE").val()}),$("this, #__EVENTARGUMENT").length>0&&param.push({name:"__EVENTARGUMENT",value:$("this, #__EVENTARGUMENT").val()}),$("this, #__EVENTVALIDATION").length>0&&param.push({name:"__EVENTVALIDATION",value:$("this, #__EVENTVALIDATION").val()}),allInputs.not("input[type='submit']").not("input[type='button']").each(function(t){PushParam(param,this)});param.push({name:"__EVENTTARGET",value:ElemName})}param.push({name:"AspControlClientID",value:objDivMain[0].options.AspControlClientID}),ElemName=null,ElemId=null;var aUrl=document.createElement("a");aUrl.href=objDivMain[0].options.url;var strUrl=new URL(aUrl),relativeStrUrl=strUrl.toString().substring(strUrl.origin.length);if(objDivMain=null,a_param!=null)for(i=0;i<a_param.length;i++)param.push({name:a_param[i].name,value:a_param[i].value});return $.ajax({type:method,data:param,url:relativeStrUrl,panelId:RefreshedUpdatePanelId,success:function(data,status){var objDivMain=$("#"+this.panelId);UnblockUpdatePanel(objDivMain),VSF.Utility.GetTopWindow().IsAsynCallback=!1,objDivMain[0].onclick=null,data.substring(0,9)=="Redirect:"&&(window.location.href=data.substr(9)),objDivMain.empty(),objDivMain.innerHTML="";var html=data,nIndex=html.indexOf("<VLAYOUT/>"),layout="";nIndex>0&&(layout=html.substr(0,nIndex),html=html.substr(nIndex+10,html.length)),nIndex=html.indexOf("<VURL/>"),nIndex>0&&(objDivMain[0].options.url=html.substr(0,nIndex).replace('<div style="display:none">',"").replace("</div>",""),html=html.substr(nIndex+7,html.length)),$("SCRIPT[src]").each(function(){var t=this.src;t!=null&&t!=""&&(html=RemoveSrc(t,html,"src"))}),$("LINK[href]").each(function(){var t=this.href;t!=null&&t!=""&&(html=RemoveSrc(t,html,"href"))}),html=VSF.Utility.RemoveAll(html,'<script  type="text/javascript"><\/script>','<link rel="stylesheet" type="text/css" ></link>','<link rel="stylesheet" type="text/css" />','<link  rel="stylesheet"/>',"<script ><\/script>"),html=html+layout+"<script><\/script>";try{theForm!=null&&(theForm.orginSubmit||AttachToSubmit(),theForm.onsubmit=null,theForm.onsumbmit1=null,theForm.submit=theForm.orginSubmit,theForm.onsubmit=theForm.orginOnSubmit)}catch(t){}if(IsWholePage(data)){$("body").html(html);return}else nestedPanel&&nestedPanel.length&&(html=html.replace('$("#__VIEWSTATE").val','$("#'+nestedPanel[0].id+' #__VIEWSTATE").val'),html=html.replace('$("#__EVENTVALIDATION").val','$("#'+nestedPanel[0].id+' #__EVENTVALIDATION").val')),objDivMain.html(html);jQuery.ready();try{VSF.Utility.GetTopWindow().VFrames!=null&&VSF.Utility.GetTopWindow().ResizeIFrame!=null&&(VSF.Utility.GetTopWindow().VFrames[0].isLoading=!1,VSF.Utility.GetTopWindow().ResizeIFrame(VSF.Utility.GetTopWindow().VFrames[0])),VSF.Utility.GetTopWindow().HideLoader(VSF.Utility.GetTopWindow().VFrames[0])}catch(t){}try{if(arrVHidden!=null)for(var i=0;i<arrVHidden.length;i++){var hid=arrVHidden[i],hidden;if(hid.key=="V__CVS"||hid.key=="V__VIEWSTATE"||hid.key=="V__EVENTARGUMENT"||hid.key=="V__EVENTVALIDATION"||hid.key=="V__EVENTTARGET"?hidden=$("#"+hid.key,objDivMain):hidden=$("#"+hid.key),hidden.length==0){if(hid.value!=null&&hid.value!=""){var newElem=document.createElement("input");newElem.setAttribute("type","hidden"),newElem.value=hid.value,newElem.id=hid.key,document.forms[0].appendChild(newElem),newElem=null}}else hidden.val(hid.value),hidden=null}}catch(t){}var tm=setTimeout(function(){AttachToSubmit(),clearTimeout(tm)},0);if(objDivMain[0].AttachPostBackEvent(),objDivMain[0].busy--,nestedPanel&&nestedPanel.length&&(!a_param||a_param.refreshList)){var panel=objDivMain[0].closest("[updatepanel][data-nested]");panel.options.afterRefreshList&&panel.options.afterRefreshList()}var ar=objDivMain[0].options.afterRefresh;ar&&(typeof ar=="function"?ar():eval(ar)),objDivMain=null},error:function(t,n,a){var r=$("#"+RefreshedUpdatePanelId);UnblockUpdatePanel(r),VSF.Utility.GetTopWindow().IsAsynCallback=!1,r[0].onclick=null,r[0].busy--,GlobalAjaxHandling!=null?GlobalAjaxHandling(t):alert(t)},complete:VSF.Utility.EnableSubmit}),RefreshedUpdatePanelId=null,!1}return!0}(function(t){var n=!1;t(document).ready(function(){n=!0,t(SelectedObject).click(function(a){this.updatePanels==null&&(ElemId=null,ElemName=null)})}),t.fn.UpdatePanel=function(a){return this.each(function(){if(this.created==null)if(this.created=!0,this.busy=0,this.queue=[],this.interval=null,n)t.AddUpdatePanel(this,a);else{var r=this;t(document).ready(function(){t.AddUpdatePanel(r,a)})}})},t.AddUpdatePanel=function(a,l){var o={AspControlClientID:"",triggers:[],url:"",afterRefresh:null,isNested:!1},l=t.extend(o,l);a.options=l,this.ClientRefresh=function(u){RefreshedUpdatePanelId=this.id,RefreshUpdatePanel(!0,"POST",u)},this.LoadPage=function(u,f){u!=null&&(this.options.url=u),RefreshedUpdatePanelId=this.id,RefreshUpdatePanel(!0,"GET",f)},a.LoadPage=this.LoadPage,a.ClientRefresh=this.ClientRefresh,this.AttachPostBackEvent=function(){var u=this;if(u.options.triggers!=null)for(var f=0;f<u.options.triggers.length;f++){var v=t("#"+u.options.triggers[f]);v.each(function(){this.updatePanels==null&&(this.updatePanels=new Array),this.updatePanels[this.updatePanels.length]=u,(this.type=="submit"||this.type=="image")&&t(this).click(function(S){AttachEventParam(u,this)})})}t(SelectedObject,u).click(function(S){var h=t(this).parents("[updatepanel]");h.length>0&&h[0]==u&&AttachEventParam(u,this)}),t("a",u).each(function(){if(this.href!=null&&this.href!=""&&this.href.indexOf("javascript:")<0&&this.navigation!=null){var S=this.href,h=this;this.href="",this.onclick=function(){return u.options.url=S,RefreshedUpdatePanelId=u.attr("id"),RefreshUpdatePanel(!0,"POST"),!1}}})},a.AttachPostBackEvent=this.AttachPostBackEvent,a.AttachPostBackEvent()}})(jQuery),ShowSummaryMessages=function(t,n,a){a==null||a.length==0||a.forEach(r=>{n=="E"?$("#"+t).kendoNotification({hideOnClick:!1,autoHideAfter:0,appendTo:"#"+t}).data("kendoNotification").error(r):n=="W"?$("#"+t).kendoNotification({hideOnClick:!1,autoHideAfter:0,appendTo:"#"+t}).data("kendoNotification").warning(r):n=="S"?$("#"+t).kendoNotification({hideOnClick:!1,autoHideAfter:0,appendTo:"#"+t}).data("kendoNotification").info(r):n=="I"&&$("#"+t).kendoNotification({hideOnClick:!1,autoHideAfter:0,appendTo:"#"+t}).data("kendoNotification").success(r)})},AddMainWindowMessage=function(t,n,a,r,o){var l=document.createElement("div");if(l.innerHTML=unescape(n),o){var u=document.createAttribute("mainWindowTarget");u.nodeValue=o,l.setAttributeNode(u)}var f,v,S,h,g,b,_=!0;return v=window.frameElement!=null&&!document.getElementById(t)?VSF.Utility.GetTopWindow().document:document,f=v.getElementById(t),f==null&&(f=document.getElementById(t)),f!=null&&(v.getElementById(t+"_error_div")==null&&document.getElementById(t+"_error_div")==null&&(S=v.createElement("DIV"),S.className="validation-summary-errors",h=v.createElement("DIV"),h.className="validation-summary-warnings",g=v.createElement("DIV"),g.className="validation-summary-shields",b=v.createElement("DIV"),b.className="validation-summary-valid",S.appendChild(v.createElement("div")),f.appendChild(S),h.appendChild(v.createElement("div")),f.appendChild(h),g.appendChild(v.createElement("div")),f.appendChild(g),b.appendChild(v.createElement("div")),f.appendChild(b),S.firstChild.id=t+"_error_div",h.firstChild.id=t+"_warning_div",g.firstChild.id=t+"_shield_div",b.firstChild.id=t+"_info_div"),S=v.getElementById(t+"_error_div"),h=v.getElementById(t+"_warning_div"),g=v.getElementById(t+"_shield_div"),b=v.getElementById(t+"_info_div"),S==null&&(S=document.getElementById(t+"_error_div")),h==null&&(h=document.getElementById(t+"_warning_div")),g==null&&(g=document.getElementById(t+"_shield_div")),b==null&&(b=document.getElementById(t+"_info_div")),r=="E"?$(S).kendoNotification({hideOnClick:!1,autoHideAfter:0,button:!0,appendTo:"#"+S.id}).data("kendoNotification").error(l.innerHTML):r=="W"?$(h).kendoNotification({hideOnClick:!1,autoHideAfter:0,button:!0,appendTo:"#"+h.id}).data("kendoNotification").warning(l.innerHTML):r=="S"?$(g).kendoNotification({hideOnClick:!1,autoHideAfter:0,button:!0,appendTo:"#"+g.id}).data("kendoNotification").info(l.innerHTML):r=="I"&&$(b).kendoNotification({hideOnClick:!1,autoHideAfter:0,button:!0,appendTo:"#"+b.id}).data("kendoNotification").success(l.innerHTML)),l},RenderUserMessagesStartItems=function(){for(var t=0;t<Message.StartMessages.length;t++){var n=Message.StartMessages[t].split("|");n[0]=="E"?Web.AddError(n[1]):n[0]=="W"?Web.AddWarning(n[1]):n[0]=="S"?Web.AddShield(n[1]):n[0]=="M"&&Web.AddInfo(n[1])}},ClearMainWindowMessage=function(t){var n;window.frameElement!=null?n=VSF.Utility.GetTopWindow().document:n=document;var a=n.getElementById(t);a==null&&(a=document.getElementById(t)),a&&(a.innerHTML="")},ClearMessagesForTarget=function(t){$("DIV[mainWindowTarget='"+t+"']").remove()},CreateUserMessageContainer=function(t){var n=!1;try{n=window.frameElement}catch{n=!0}n&&(VSF.Utility.GetTopWindow().Message.ContainerInitialized=!0),Message.ContainerInitialized=!0},RegisterNS("VSF.WebServicesProxy"),VSF.WebServicesProxy=function(t){t!=null&&(this.url=t),this.responses=new Array},VSF.WebServicesProxy.generateUid=function(t){t==null&&(t="uid:");var n=new Date().getMilliseconds(),a=Math.random(),r=Math.round(a*1e6);return t+n+r},VSF.WebServicesProxy.AlertException=function(t){alert(VSF.WebServicesProxy.ExceptionDescription(t.exception))},VSF.WebServicesProxy.ExceptionDescription=function(t){if(t!=null){var n="";return t.request!=null&&(n+=VSF.WebServicesProxy.Lang.serverErrorMessage(t.request.service,t.request.method,t.request.requestId)+`

`),n+=VSF.WebServicesProxy.niceExceptionString(t),n}},VSF.WebServicesProxy.niceExceptionString=function(t){var n=t.message+`
`;return n+=VSF.WebServicesProxy.Lang.exceptionType(t.exceptionType)+`
`,n+=VSF.WebServicesProxy.Lang.stackTrace()+`
`,n+=t.stackTrace,t.innerException!=null&&(n+=`


`+VSF.WebServicesProxy.Lang.innerException()+`
`,n+=VSF.WebServicesProxy.niceExceptionString(t.innerException)),n},VSF.WebServicesProxy.prototype.dataType="json",VSF.WebServicesProxy.prototype.call=function(t,n,a,r){return r==null||r.async==null||r.async==!1?this.callSync(t,n,a,r):this.callAsync(t,n,a,r)},VSF.WebServicesProxy.prototype.generateMethodCall=function(t,n){var a={service:this.instance,method:t,parameters:n,requestId:VSF.WebServicesProxy.generateUid()};return a},VSF.WebServicesProxy.prototype.generateGetParameters=function(t,n,a,r){var o=new Array;return r=="GET"?o.push({name:"MethodCall",value:escape(JSON.stringify(n,null,a))}):o.push({name:"MethodCall",value:JSON.stringify(n,null,a)}),this.attachViewState&&VSF.Utility.AttachViewState(o,null,t),o},VSF.WebServicesProxy.prototype.callSync=function(t,n,a,r){var o=r!=null&&r.requestType!=null?r.requestType:this.attachViewState?"POST":"GET",l=this.generateMethodCall(t,n," ",o),u=this.generateGetParameters(a,l,"   "),f=r!=null&&r.onAjaxError!=null?r.onAjaxError:this.defaultExceptionHandler,v=!1,S=$.ajax({cache:!1,url:this.url,type:o,async:!1,data:u,error:function(b){v=!0,f?.(b)}}),h=S.responseText;if(!v&&h!=null&&h.length>0){var g=JSON.parse(h,null);return this.processSafe(g,l,r)}},VSF.WebServicesProxy.prototype.processSafe=function(t,n,a){if(t!=null)if(t.exception!=null)if(a!=null&&a.onError!=null){a.onError(t);return}else throw t.exception;else return a&&a.async&&a.onSuccess!=null&&a.onSuccess(t),t.result},VSF.WebServicesProxy.prototype.callAsync=function(t,n,a,r){var o=this.generateMethodCall(t,n),l=this.generateGetParameters(a,o,"   "),u=r!=null&&r.onAjaxError!=null?r.onAjaxError:this.defaultExceptionHandler,f=this;if(r!=null)var v=r.requestType||null;var S=$.ajax({cache:!1,url:this.url,async:!0,type:v||this.attachViewState?"POST":"GET",dataType:this.dataType,data:l,beforeSend:function(h){r!=null&&r.onBeforeSend&&r.onBeforeSend(h)},error:function(h){u?.(h)},success:function(h){f.processSafe(h,o,r)}});r!=null&&r.onAfterSend&&r.onAfterSend(S)},RegisterNS("VSF.WebServicesProxy.Lang"),VSF.WebServicesProxy.Lang.serverErrorMessage=function(t,n,a,r,o){return VSF.Utility.Localization.C_Json_ServerErrorMessage.replace(/%SERVICE%/,t).replace(/%METHOD%/,n).replace(/%REQUEST_ID%/,a)+`
`+r+`
`+o},VSF.WebServicesProxy.Lang.serverErrorResponseMessage=function(t,n,a){return VSF.Utility.Localization.C_Json_ServerErrorResponseMessage.replace(/%SERVICE%/,t).replace(/%METHOD%/,n).replace(/%REQUEST_ID%/,a)},VSF.WebServicesProxy.Lang.exceptionType=function(t){return VSF.Utility.Localization.Current.C_Json_ExceptionType.replace(/%EXCEPTION_TYPE%/,t)},VSF.WebServicesProxy.Lang.stackTrace=function(){return VSF.Utility.Localization.C_Json_StackTrace},VSF.WebServicesProxy.Lang.innerException=function(){return VSF.Utility.Localization.C_Json_InnerException},VSF.RegisterJsonService=function(namespace,name,classname,exceptionHandler,controlId,address,viewState,methods){for(var fullname=namespace+"."+name,ptype=fullname+".prototype",code='RegisterNS("'+fullname+'");'+fullname+" = function () {this.url = window.location.href;this.attachViewState = "+viewState+";this.defaultExceptionHandler = "+exceptionHandler+";};"+ptype+" = new VSF.WebServicesProxy();"+ptype+'.serverSideClass = "'+classname+'";'+ptype+'.name = "'+name+'";'+ptype+'.instance = "'+fullname+'";'+ptype+'.controlId = "'+controlId+'";',i=0;i<methods.length;i++){var method=methods[i];code+=ptype+"."+method.Name+" = function("+method.Arguments+', options) { return this.call("'+method.Name+'",[ '+method.Arguments+'],"'+controlId+'", options);};'}code+=fullname+" = new "+fullname+"();",eval(code)},Localization=function(t){var n={},a=function(l){if(l.responseText)try{var u=JSON.parse(l.responseText);return u?u.Message:"Nieznany b\u0142\u0105d serwera."}catch(f){return f.toString()}},r=function(l){return response=$.ajax({type:"POST",url:t+"/GetLocalizedValue",data:JSON.stringify({a_entryId:l}),contentType:"application/json; charset=utf-8",dataType:"json",async:!1,error:function(u){logger.LogError("Wyst\u0105pi\u0142 b\u0142\u0105d podczas pobierania zlokalizowanej warto\u015Bci dla wpisu o id: "+l+". Komunikat b\u0142\u0119du: "+a(u))}}).responseText,JSON.parse(response).d},o=function(l){return response=$.ajax({type:"POST",url:t+"/GetLocalizedValueByName",data:JSON.stringify({a_key:l}),contentType:"application/json; charset=utf-8",dataType:"json",async:!1,error:function(u){logger.LogError("Wyst\u0105pi\u0142 b\u0142\u0105d podczas pobierania zlokalizowanej warto\u015Bci dla klucza: "+l+". Komunikat b\u0142\u0119du: "+a(u))}}).responseText,JSON.parse(response).d};return n.GetLocalizedValueByName=o,n.GetLocalizedValue=r,n};var dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g,r=function(o,l){for(o=String(o),l=l||2;o.length<l;)o="0"+o;return o};return function(o,l,u){var f=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(o)=="[object String]"&&!/\d/.test(o)&&(l=o,o=void 0),o=o?new Date(o):new Date,isNaN(o))throw SyntaxError("invalid date");l=String(f.masks[l]||l||f.masks.default),l.slice(0,4)=="UTC:"&&(l=l.slice(4),u=!0);var v=u?"getUTC":"get",S=o[v+"Date"](),h=o[v+"Day"](),g=o[v+"Month"](),b=o[v+"FullYear"](),_=o[v+"Hours"](),w=o[v+"Minutes"](),I=o[v+"Seconds"](),D=o[v+"Milliseconds"](),C=u?0:o.getTimezoneOffset(),T={d:S,dd:r(S),ddd:f.i18n.dayNames[h],dddd:f.i18n.dayNames[h+7],m:g+1,mm:r(g+1),mmm:f.i18n.monthNames[g],mmmm:f.i18n.monthNames[g+12],yy:String(b).slice(2),yyyy:b,h:_%12||12,hh:r(_%12||12),H:_,HH:r(_),M:w,MM:r(w),s:I,ss:r(I),l:r(D,3),L:r(D>99?Math.round(D/10):D),t:_<12?"a":"p",tt:_<12?"am":"pm",T:_<12?"A":"P",TT:_<12?"AM":"PM",Z:u?"UTC":(String(o).match(n)||[""]).pop().replace(a,""),o:(C>0?"-":"+")+r(Math.floor(Math.abs(C)/60)*100+Math.abs(C)%60,4),S:["th","st","nd","rd"][S%10>3?0:(S%100-S%10!=10)*S%10]};return l.replace(t,function(k){return k in T?T[k]:k.slice(1,k.length-1)})}}();dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.applyFormat=function(t,n){return dateFormat(this,t,n)},DateTimeSelector=typeof DateTimeSelector<"u"?DateTimeSelector:new function(){var t=function(n,a){var r=$("#"+n).getKendoDateTimePicker();r.value(a),r.trigger("change")};this.SetCurrentDate=function(n,a){return t(n,new Date().applyFormat(a)),!1},this.ClearDate=function(n){return t(n,""),!1}};function DsF(){var t=arguments;$(function(){for(var n=1;n<t.length;n++){var a=t[n];$("#"+a.d).dateSelector($.extend({showOn:"button",buttonImageOnly:!0,changeMonth:!0,changeYear:!0,showButtonPanel:!0,timeControl:a.t},t[0]))}})}function DiffDate(id1,id2){var pad=function(t,n){for(var a=""+t;a.length<n;)a="0"+a;return a},parseDate=function(date,format){for(var chars=["y","m","d","H","M","s"],output=[],i=0;i<chars.length;i++){var tmp=getPosition(date,format,chars[i]);eval("var "+chars[i]+" = '"+tmp.Value+"'")}return new Date(y,m?m-1:0,d,H,M,s,0)},getPosition=function(t,n,a){var r=n.indexOf(a),o=n.replace(new RegExp("[^"+a+"]+","g"),"").length;return{Character:a,Length:o,Position:r,Value:t.substr(r,o)}};this.getDifferenceInHours=function(){return Math.floor(result/3600)},this.getDifferenceInMinutes=function(){return Math.floor(result/60)},this.getDifferenceInSeconds=function(){return result},this.getFormattedDifference=function(t){if(isNaN(result))return result;var n=Math.abs(result),a=n%60,r=Math.floor(n/60)%60,o=Math.floor(n/3600)%24,l=Math.floor(n/86400);return(result<0?"- ":"")+(l>0?l+"d ":"")+pad(o,2)+":"+pad(r,2)+(t?"":":"+pad(a,2))};var idExists=function(t){var n=IDs[t]!==null;return n||alert('Kontrolka o id "'+t+'" nie istnieje.'),n},result=function(){if(!idExists(id1)||!idExists(id2))return NaN;var t=document.getElementById(IDs[id1]),n=document.getElementById(IDs[id2]);if(t===null||n===null)return alert("Sprawd\u017A identyfikatory p\xF3l."),NaN;var a=t?t.value:null,r=n?n.value:null;if(a===null||a==""||r===null||r=="")return 0;var o=$(t).attr("format"),l=$(n).attr("format"),u=parseDate(a,o),f=parseDate(r,l);return Math.floor((f-u)/1e3)}()}(function($){$.extend($.ui,{dateSelector:{version:"@VERSION"}});var PROP_NAME="dateSelector",dsuuid=new Date().getTime();function DateSelector(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._dateSelectorShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Zatwierd\u017A",prevText:"&#x3c;Poprz",nextText:"Nast&#x3e;",currentText:"Dzisiaj",monthNames:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017Adziernik","Listopad","Grudzie\u0144"],monthNamesShort:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017Adziernik","Listopad","Grudzie\u0144"],dayNames:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015Aroda","Czwartek","Pi\u0105tek","Sobota"],dayNamesShort:["Nie","Pon","Wto","\u015Aro","Czwa","Pi\u0105","Sob"],dayNamesMin:["Ni","Po","Wt","\u015Ar","Cz","Pi","So"],weekHeader:"Tydz",timeName:"Godzina",dateFormat:"mm/dd/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"",showOptions:{},defaultDate:null,appendText:"",buttonText:"Wybierz dzie\u0144",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"_default",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,timeControl:null,insertCurrentTime:!1,timeFormat:null},$.extend(this._defaults,this.regional[""]),this.dsDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}$.extend(DateSelector.prototype,{markerClassName:"hasDateSelector",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDateSelector:function(){return this.dsDiv},setDefaults:function(t){return extendRemove(this._defaults,t||{}),this},_attachDateSelector:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(t){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(target.id="dp"+ ++this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDateSelector(target,inst):inline&&this._inlineDateSelector(target,inst)},_newInst:function(t,n){var a=t[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1");return{id:a,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dsDiv:n?$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'):this.dsDiv}},_connectDateSelector:function(t,n){var a=$(t);n.append=$([]),n.trigger=$([]),!a.hasClass(this.markerClassName)&&(this._attachments(a,n),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.dateSelector",function(r,o,l){n.settings[o]=l}).bind("getData.dateSelector",function(r,o){return this._get(n,o)}),this._autoSize(n),$.data(t,PROP_NAME,n))},_attachments:function(t,n){var a=this._get(n,"appendText"),r=this._get(n,"isRTL");n.append&&n.append.remove(),a&&(n.append=$('<span class="'+this._appendClass+'">'+a+"</span>"),t[r?"before":"after"](n.append)),t.unbind("focus",this._showDateSelector),n.trigger&&n.trigger.remove();var o=this._get(n,"showOn");if((o=="focus"||o=="both")&&t.focus(this._showDateSelector),o=="button"||o=="both"){var l=this._get(n,"buttonText"),u=this._get(n,"buttonImage"),f=$("#SelectDateButton",$("span",n.input.parent()));n.trigger=$(this._get(n,"buttonImageOnly")?$('<input type="button" class="SelectDateButton"/>').attr("title",l):$('<button type="button"></button>').addClass(this._triggerClass).html(u==""?l:$("<img/>").attr({src:u,alt:l,title:l}))),n.trigger.appendTo(f),n.input.attr("readOnly")?n.trigger.addClass("ExtReadOnly"):n.trigger.click(function(){return $.dateSelector._dateSelectorShowing&&$.dateSelector._lastInput==t[0]?$.dateSelector._hideDateSelector():$.dateSelector._showDateSelector(t[0]),!1})}},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var n=new Date(2009,11,20),a=this._get(t,"dateFormat");if(a.match(/[DM]/)){var r=function(o){for(var l=0,u=0,f=0;f<o.length;f++)o[f].length>l&&(l=o[f].length,u=f);return u};n.setMonth(r(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(r(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())}t.input.attr("size",this._formatDate(t,n).length)}},_inlineDateSelector:function(t,n){var a=$(t);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(n.dsDiv).bind("setData.dateSelector",function(r,o,l){n.settings[o]=l}).bind("getData.dateSelector",function(r,o){return this._get(n,o)}),$.data(t,PROP_NAME,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDateSelector(n),this._updateAlternate(n))},_dialogDateSelector:function(t,n,a,r,o){var l=this._dialogInst;if(!l){var u="dp"+ ++this.uuid;this._dialogInput=$('<input type="text" id="'+u+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),l=this._dialogInst=this._newInst(this._dialogInput,!1),l.settings={},$.data(this._dialogInput[0],PROP_NAME,l)}if(extendRemove(l.settings,r||{}),n=n&&n.constructor==Date?this._formatDate(l,n):n,this._dialogInput.val(n),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,!this._pos){var f=document.documentElement.clientWidth,v=document.documentElement.clientHeight,S=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[f/2-100+S,v/2-150+h]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),l.settings.onSelect=a,this._inDialog=!0,this.dsDiv.addClass(this._dialogClass),this._showDateSelector(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dsDiv),$.data(this._dialogInput[0],PROP_NAME,l),this},_destroyDateSelector:function(t){var n=$(t),a=$.data(t,PROP_NAME);if(n.hasClass(this.markerClassName)){var r=t.nodeName.toLowerCase();$.removeData(t,PROP_NAME),r=="input"?(a.append.remove(),a.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDateSelector).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&n.removeClass(this.markerClassName).empty()}},_enableDateSelector:function(t){var n=$(t),a=$.data(t,PROP_NAME);if(n.hasClass(this.markerClassName)){var r=t.nodeName.toLowerCase();if(r=="input")t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({cursor:"pointer"});else if(r=="div"||r=="span"){var o=n.children("."+this._inlineClass);o.children().removeClass("ui-state-disabled")}this._disabledInputs=$.map(this._disabledInputs,function(l){return l==t?null:l})}},_disableDateSelector:function(t){var n=$(t),a=$.data(t,PROP_NAME);if(n.hasClass(this.markerClassName)){var r=t.nodeName.toLowerCase();if(r=="input")t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({cursor:"default"});else if(r=="div"||r=="span"){var o=n.children("."+this._inlineClass);o.children().addClass("ui-state-disabled")}this._disabledInputs=$.map(this._disabledInputs,function(l){return l==t?null:l}),this._disabledInputs[this._disabledInputs.length]=t}},_isDisabledDateSelector:function(t){if(!t)return!1;for(var n=0;n<this._disabledInputs.length;n++)if(this._disabledInputs[n]==t)return!0;return!1},_getInst:function(t){try{return $.data(t,PROP_NAME)}catch{throw"Missing instance data for this dateSelector"}},_optionDateSelector:function(t,n,a){var r=this._getInst(t);if(arguments.length==2&&typeof n=="string")return n=="defaults"?$.extend({},$.dateSelector._defaults):r?n=="all"?$.extend({},r.settings):this._get(r,n):null;var o=n||{};if(typeof n=="string"&&(o={},o[n]=a),r){this._curInst==r&&this._hideDateSelector();var l=this._getDateDateSelector(t,!0);extendRemove(r.settings,o),this._attachments($(t),r),this._autoSize(r),this._setDateDateSelector(t,l),this._updateDateSelector(r)}},_changeDateSelector:function(t,n,a){this._optionDateSelector(t,n,a)},_refreshDateSelector:function(t){var n=this._getInst(t);n&&this._updateDateSelector(n)},_setDateDateSelector:function(t,n){var a=this._getInst(t);a&&this._setDate(a,n)},_getDateDateSelector:function(t,n){var a=this._getInst(t);return a&&!a.inline&&this._setDateFromField(a,n),a?this._getDate(a):null},_doKeyDown:function(t){var n=$.dateSelector._getInst(t.target),a=!0,r=n.dsDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,$.dateSelector._dateSelectorShowing)switch(t.keyCode){case 9:$.dateSelector._hideDateSelector(),a=!1;break;case 13:var o=$("td."+$.dateSelector._dayOverClass,n.dsDiv).add($("td."+$.dateSelector._currentClass,n.dsDiv));return o[0]?$.dateSelector._selectDay(t.target,n.selectedMonth,n.selectedYear,o[0]):$.dateSelector._hideDateSelector(),!1;break;case 27:$.dateSelector._hideDateSelector();break;case 33:$.dateSelector._adjustDate(t.target,t.ctrlKey?-$.dateSelector._get(n,"stepBigMonths"):-$.dateSelector._get(n,"stepMonths"),"M");break;case 34:$.dateSelector._adjustDate(t.target,t.ctrlKey?+$.dateSelector._get(n,"stepBigMonths"):+$.dateSelector._get(n,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&$.dateSelector._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&$.dateSelector._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&$.dateSelector._adjustDate(t.target,r?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.dateSelector._adjustDate(t.target,t.ctrlKey?-$.dateSelector._get(n,"stepBigMonths"):-$.dateSelector._get(n,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&$.dateSelector._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&$.dateSelector._adjustDate(t.target,r?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.dateSelector._adjustDate(t.target,t.ctrlKey?+$.dateSelector._get(n,"stepBigMonths"):+$.dateSelector._get(n,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&$.dateSelector._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else t.keyCode==36&&t.ctrlKey?$.dateSelector._showDateSelector(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n=$.dateSelector._getInst(t.target);if($.dateSelector._get(n,"constrainInput")){var a=$.dateSelector._possibleChars($.dateSelector._get(n,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode);return t.ctrlKey||r<" "||!a||a.indexOf(r)>-1}},_doKeyUp:function(t){var n=$.dateSelector._getInst(t.target);if(n.input.val()!=n.lastVal)try{var a=$.dateSelector.parseDate($.dateSelector._get(n,"dateFormat"),n.input?n.input.val():null,$.dateSelector._getFormatConfig(n));a&&($.dateSelector._setDateFromField(n),$.dateSelector._updateAlternate(n),$.dateSelector._updateDateSelector(n))}catch(r){$.dateSelector.log(r)}return!0},_getTime:function(t){return new Date().applyFormat(this._get(t,"timeFormat"))},_showDateSelector:function(t){if(t=t.target||t,t.nodeName.toLowerCase()!="input"&&(t=$("input",t.parentNode)[0]),!($.dateSelector._isDisabledDateSelector(t)||$.dateSelector._lastInput==t)){var n=$.dateSelector._getInst(t);$.dateSelector._curInst&&$.dateSelector._curInst!=n&&$.dateSelector._curInst.dsDiv.stop(!0,!0);var a=$.dateSelector._get(n,"beforeShow");extendRemove(n.settings,a?a.apply(t,[t,n]):{}),n.lastVal=null,$.dateSelector._lastInput=t,$.dateSelector._setDateFromField(n),$.dateSelector._inDialog&&(t.value=""),$.dateSelector._pos||($.dateSelector._pos=$.dateSelector._findPos(t),$.dateSelector._pos[1]+=t.offsetHeight);var r=!1;$(t).parents().each(function(){return r|=$(this).css("position")=="fixed",!r}),r&&$.browser.opera&&($.dateSelector._pos[0]-=document.documentElement.scrollLeft,$.dateSelector._pos[1]-=document.documentElement.scrollTop);var o=$(t).offset();if(o.top+=$(t).outerHeight(),$.dateSelector._pos=null,n.dsDiv.css({position:"absolute",display:"block",top:"-1000px"}),!n._tc&&(n._tc=$("#"+this._get(n,"timeControl"))),n._tc&&n._tc.length&&(n._tc.val(n.input.val().substr(n.input.val().length-n._tc.VFW_getMask().length))&&n._tc.show(),this._get(n,"insertCurrentTime")&&!this._isTimeControlValid(n)&&n._tc.val(this._getTime(n))),$.dateSelector._updateDateSelector(n),n.dsDiv.css({position:$.dateSelector._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),!n.inline){var l=$.dateSelector._get(n,"showAnim"),u=$.dateSelector._get(n,"duration"),f=function(){$.dateSelector._dateSelectorShowing=!0;var v=$.dateSelector._getBorders(n.dsDiv);n.dsDiv.find("iframe.ui-datepicker-cover").css({left:-v[0],top:-v[1],width:n.dsDiv.outerWidth(),height:n.dsDiv.outerHeight()});var S=n.dsDiv,h=$("body");if(S.outerWidth()+S.offset().left>h.width()+h.scrollLeft()){var g=n.input,b=g.offset().left+g.width()-S.attr("scrollWidth");b>0&&S.css("left",b)}$.dateSelector._updateHeight(S.position().top+S.height())};n.dsDiv.css("zIndex",1e3),$.effects&&$.effects[l]?n.dsDiv.show(l,$.dateSelector._get(n,"showOptions"),u,f):n.dsDiv[l||"show"](l?u:null,f),(!l||!u)&&f(),n.input.is(":visible")&&!n.input.is(":disabled")&&n.input.focus(),$.dateSelector._curInst=n}}},_updateHeight:function(t){$(document.body).height()<t&&($(document.body).height(t),document.forms.length&&$(document.forms[0]).height()<t&&$(document.forms[0]).height(t))},_updateDateSelector:function(t){var n=this,a=$.dateSelector._getBorders(t.dsDiv);t._tc&&t._tc.length&&t._tc.parent().attr("tagName")=="SPAN"&&t._tc.appendTo("body"),t.dsDiv.empty().append(this._generateHTML(t)).find("iframe.ui-datepicker-cover").css({left:-a[0],top:-a[1],width:t.dsDiv.outerWidth(),height:t.dsDiv.outerHeight()}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){n._isDisabledDateSelector(t.inline?t.dsDiv.parent()[0]:t.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();var r=$("#timeControl_"+this._get(t,"timeControl"));r&&t._tc&&t._tc.length&&t._tc.appendTo(r);var o=this._getNumberOfMonths(t),l=o[1],u=17;l>1?t.dsDiv.addClass("ui-datepicker-multi-"+l).css("width",u*l+"em"):t.dsDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),t.dsDiv[(o[0]!=1||o[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dsDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t==$.dateSelector._curInst&&$.dateSelector._dateSelectorShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus()},_getBorders:function(t){var n=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(n(t.css("border-left-width"))),parseFloat(n(t.css("border-top-width")))]},_checkOffset:function(t,n,a){var r=t.dsDiv.outerWidth(),o=t.dsDiv.outerHeight(),l=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,f=document.documentElement.clientWidth+$(document).scrollLeft(),v=document.documentElement.clientHeight+$(document).scrollTop();return n.left-=this._get(t,"isRTL")?r-l:0,n.left-=a&&n.left==t.input.offset().left?$(document).scrollLeft():0,n.top-=a&&n.top==t.input.offset().top+u?$(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>f&&f>r?Math.abs(n.left+r-f):0),n.top-=Math.min(n.top,n.top+o>v&&v>o?Math.abs(o+u):0),n},_findPos:function(t){for(var n=this._getInst(t),a=this._get(n,"isRTL");t&&(t.type=="hidden"||t.nodeType!=1);)t=t[a?"previousSibling":"nextSibling"];var r=$(t).offset();return[r.left,r.top]},_hideDateSelector:function(t){var n=this._curInst;if(!(!n||t&&n!=$.data(t,PROP_NAME))&&this._dateSelectorShowing){this._isTimeControlValid(n)?this._selectDate("#"+n.id,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)):$.dateSelector._clearDate(n.input);var a=this._get(n,"showAnim"),r=this._get(n,"duration"),o=function(){$.dateSelector._tidyDialog(n),this._curInst=null};$.effects&&$.effects[a]?n.dsDiv.hide(a,$.dateSelector._get(n,"showOptions"),r,o):n.dsDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?r:null,o),a||o();var l=this._get(n,"onClose");l&&l.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n]),this._dateSelectorShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dsDiv))),this._inDialog=!1}},_tidyDialog:function(t){t.dsDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if($.dateSelector._curInst){var n=$(t.target);n[0].id!=$.dateSelector._mainDivId&&n.parents("#"+$.dateSelector._mainDivId).length==0&&!n.hasClass($.dateSelector.markerClassName)&&!n.hasClass($.dateSelector._triggerClass)&&$.dateSelector._dateSelectorShowing&&!($.dateSelector._inDialog&&$.blockUI)&&$.dateSelector._hideDateSelector()}},_adjustDate:function(t,n,a){var r=$(t),o=this._getInst(r[0]);this._isDisabledDateSelector(r[0])||(this._adjustInstDate(o,n+(a=="M"?this._get(o,"showCurrentAtPos"):0),a),this._updateDateSelector(o))},_gotoToday:function(t){var n=$(t),a=this._getInst(n[0]);if(this._get(a,"gotoCurrent")&&a.currentDay)a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear;else{var r=new Date;a.selectedDay=r.getDate(),a.drawMonth=a.selectedMonth=r.getMonth(),a.drawYear=a.selectedYear=r.getFullYear()}this._notifyChange(a),this._adjustDate(n)},_selectMonthYear:function(t,n,a){var r=$(t),o=this._getInst(r[0]);o._selectingMonthYear=!1,o["selected"+(a=="M"?"Month":"Year")]=o["draw"+(a=="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(r)},_clickMonthYear:function(t){var n=$(t),a=this._getInst(n[0]);a.input&&a._selectingMonthYear&&!$.browser.msie&&a.input.focus(),a._selectingMonthYear=!a._selectingMonthYear},_selectDay:function(t,n,a,r){var o=$(t);if(!($(r).hasClass(this._unselectableClass)||this._isDisabledDateSelector(o[0]))){var l=this._getInst(o[0]);l.selectedDay=l.currentDay=$("a",r).html(),l.selectedMonth=l.currentMonth=n,l.selectedYear=l.currentYear=a;var u=this._get(l,"timeControl");u?($(".ui-state-active",l.dsDiv).removeClass("ui-state-active"),$("a",r).addClass("ui-state-active"),$("#"+u).select()):(this._selectDate(t,this._formatDate(l,l.currentDay,l.currentMonth,l.currentYear)),this._hideDateSelector())}},_isTimeControlValid:function(t){var n=!0;if(t._tc&&t._tc.length){var a=t._tc.val(),r=t._tc.VFW_getMask();if(a.length==r.length){for(var o=0;o<r.length;o++)if(!(/\d/.test(r[o])&&new RegExp("^[0-"+r[o]+"]$").test(a[o])||r[o]==a[o])){n=!1;break}}else n=!1;!n&&t._tc.css("background-color","#FFE0E0").select()||t._tc.css("background-color","")}return n},_clearDate:function(t){var n=$(t),a=this._getInst(n[0]);this._selectDate(n,"")},_selectDate:function(t,n){var a=$(t),r=this._getInst(a[0]);n=n??this._formatDate(r),r.input&&r.input.val(n),this._updateAlternate(r);var o=this._get(r,"onSelect");o?o.apply(r.input?r.input[0]:null,[n,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDateSelector(r):(this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n=this._get(t,"altField");if(n){var a=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),o=this.formatDate(t,a,r,this._getFormatConfig(t));$(n).each(function(){$(this).val(o)})}},noWeekends:function(t){var n=t.getDay();return[n>0&&n<6,""]},iso8601Week:function(t){var n=new Date(t.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));var a=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((a-n)/864e5)/7)+1},parseDate:function(t,n,a){if(t==null||n==null)throw"Invalid arguments";if(n=typeof n=="object"?n.toString():n+"",n=="")return null;for(var r=(a?a.shortYearCutoff:null)||this._defaults.shortYearCutoff,o=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,l=(a?a.dayNames:null)||this._defaults.dayNames,u=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,f=(a?a.monthNames:null)||this._defaults.monthNames,v=-1,S=-1,h=-1,g=-1,b=!1,_=function(V){var N=T+1<t.length&&t.charAt(T+1)==V;return N&&T++,N},w=function(V){_(V);var N=V=="@"?14:V=="!"?20:V=="y"?4:V=="o"?3:2,F=new RegExp("^\\d{1,"+N+"}"),G=n.substring(C).match(F);if(!G)throw"Missing number at position "+C;return C+=G[0].length,parseInt(G[0],10)},I=function(V,N,F){for(var G=_(V)?F:N,B=0;B<G.length;B++)if(n.substr(C,G[B].length)==G[B])return C+=G[B].length,B+1;throw"Unknown name at position "+C},D=function(){if(n.charAt(C)!=t.charAt(T))throw"Unexpected literal at position "+C;C++},C=0,T=0;T<t.length;T++)if(b)t.charAt(T)=="'"&&!_("'")?b=!1:D();else switch(t.charAt(T)){case"d":h=w("d");break;case"D":I("D",o,l);break;case"o":g=w("o");break;case"m":S=w("m");break;case"M":S=I("M",u,f);break;case"y":v=w("y");break;case"@":var x=new Date(w("@"));v=x.getFullYear(),S=x.getMonth()+1,h=x.getDate();break;case"!":var x=new Date((w("!")-this._ticksTo1970)/1e4);v=x.getFullYear(),S=x.getMonth()+1,h=x.getDate();break;case"'":_("'")?D():b=!0;break;default:D()}if(v==-1?v=new Date().getFullYear():v<100&&(v+=new Date().getFullYear()-new Date().getFullYear()%100+(v<=r?0:-100)),g>-1){S=1,h=g;do{var k=this._getDaysInMonth(v,S-1);if(h<=k)break;S++,h-=k}while(!0)}var x=this._daylightSavingAdjust(new Date(v,S-1,h));if(x.getFullYear()!=v||x.getMonth()+1!=S||x.getDate()!=h)throw"Invalid date";return x},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(t,n,a,r){if(!a)return"";var o=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,l=(r?r.dayNames:null)||this._defaults.dayNames,u=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,f=(r?r.monthNames:null)||this._defaults.monthNames,v=function(w){var I=_+1<n.length&&n.charAt(_+1)==w;return I&&_++,I},S=function(w,I,D){var C=""+I;if(v(w))for(;C.length<D;)C="0"+C;return C},h=function(w,I,D,C){return v(w)?C[I]:D[I]},g="",b=!1;if(a)for(var _=0;_<n.length;_++)if(b)n.charAt(_)=="'"&&!v("'")?b=!1:g+=n.charAt(_);else switch(n.charAt(_)){case"d":g+=S("d",a.getDate(),2);break;case"D":g+=h("D",a.getDay(),o,l);break;case"o":g+=S("o",(a.getTime()-new Date(a.getFullYear(),0,0).getTime())/864e5,3);break;case"m":g+=S("m",a.getMonth()+1,2);break;case"M":g+=h("M",a.getMonth(),u,f);break;case"y":g+=v("y")?a.getFullYear():(a.getYear()%100<10?"0":"")+a.getYear()%100;break;case"@":g+=a.getTime();break;case"!":g+=a.getTime()*1e4+this._ticksTo1970;break;case"'":v("'")?g+="'":b=!0;break;default:g+=n.charAt(_)}return t._tc&&t._tc.length&&(g+=" "+t._tc.val())&&t._tc.hide().appendTo("body"),g},_possibleChars:function(t){for(var n="",a=!1,r=function(l){var u=o+1<t.length&&t.charAt(o+1)==l;return u&&o++,u},o=0;o<t.length;o++)if(a)t.charAt(o)=="'"&&!r("'")?a=!1:n+=t.charAt(o);else switch(t.charAt(o)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":a=!0;break;default:n+=t.charAt(o)}return n},_get:function(t,n){return t.settings[n]!==void 0?t.settings[n]:this._defaults[n]},_setDateFromField:function(t,n){if(t.input.val()!=t.lastVal){var a=this._get(t,"dateFormat"),r=t.lastVal=t.input?t.input.val():null,o,l;o=l=this._getDefaultDate(t);var u=this._getFormatConfig(t);try{o=this.parseDate(a,r,u)||l}catch(f){this.log(f),r=n?"":r}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=r?o.getDate():0,t.currentMonth=r?o.getMonth():0,t.currentYear=r?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(t,n,a){var r=function(l){var u=new Date;return u.setDate(u.getDate()+l),u},o=function(l){try{return $.dateSelector.parseDate($.dateSelector._get(t,"dateFormat"),l,$.dateSelector._getFormatConfig(t))}catch{}for(var u=(l.toLowerCase().match(/^c/)?$.dateSelector._getDate(t):null)||new Date,f=u.getFullYear(),v=u.getMonth(),S=u.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,g=h.exec(l);g;){switch(g[2]||"d"){case"d":case"D":S+=parseInt(g[1],10);break;case"w":case"W":S+=parseInt(g[1],10)*7;break;case"m":case"M":v+=parseInt(g[1],10),S=Math.min(S,$.dateSelector._getDaysInMonth(f,v));break;case"y":case"Y":f+=parseInt(g[1],10),S=Math.min(S,$.dateSelector._getDaysInMonth(f,v));break}g=h.exec(l)}return new Date(f,v,S)};return n=n==null?a:typeof n=="string"?o(n):typeof n=="number"?isNaN(n)?a:r(n):n,n=n&&n.toString()=="Invalid Date"?a:n,n&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,n,a){var r=!n,o=t.selectedMonth,l=t.selectedYear;n=this._restrictMinMax(t,this._determineDate(t,n,new Date)),t.selectedDay=t.currentDay=n.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=n.getMonth(),t.drawYear=t.selectedYear=t.currentYear=n.getFullYear(),(o!=t.selectedMonth||l!=t.selectedYear)&&!a&&this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(r?"":this._formatDate(t))},_getDate:function(t){var n=!t.currentYear||t.input&&t.input.val()==""?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return n},_generateHTML:function(t){var n=new Date,a=this._get(t,"timeControl");n=this._daylightSavingAdjust(new Date(n.getFullYear(),n.getMonth(),n.getDate()));var r=this._get(t,"isRTL"),o=a?this._get(t,"showButtonPanel"):!1,l=this._get(t,"hideIfNoPrevNext"),u=this._get(t,"navigationAsDateFormat"),f=this._getNumberOfMonths(t),v=this._get(t,"showCurrentAtPos"),S=this._get(t,"stepMonths"),h=f[0]!=1||f[1]!=1,g=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),b=this._getMinMaxDate(t,"min"),_=this._getMinMaxDate(t,"max"),w=t.drawMonth-v,I=t.drawYear;if(w<0&&(w+=12,I--),_){var D=this._daylightSavingAdjust(new Date(_.getFullYear(),_.getMonth()-f[0]*f[1]+1,_.getDate()));for(D=b&&D<b?b:D;this._daylightSavingAdjust(new Date(I,w,1))>D;)w--,w<0&&(w=11,I--)}t.drawMonth=w,t.drawYear=I;var C=this._get(t,"prevText");C=u?this.formatDate(t,C,this._daylightSavingAdjust(new Date(I,w-S,1)),this._getFormatConfig(t)):C;var T=this._canAdjustMonth(t,-1,I,w)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DS_jQuery_'+dsuuid+".dateSelector._adjustDate('#"+t.id+"', -"+S+`, 'M');" title="`+C+'"><span class="ui-icon ui-icon-circle-triangle-'+(r?"e":"w")+'">'+C+"</span></a>":l?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+C+'"><span class="ui-icon ui-icon-circle-triangle-'+(r?"e":"w")+'">'+C+"</span></a>",k=this._get(t,"nextText");k=u?this.formatDate(t,k,this._daylightSavingAdjust(new Date(I,w+S,1)),this._getFormatConfig(t)):k;var x=this._canAdjustMonth(t,1,I,w)?'<a class="ui-datepicker-next ui-corner-all" onclick="DS_jQuery_'+dsuuid+".dateSelector._adjustDate('#"+t.id+"', +"+S+`, 'M');" title="`+k+'"><span class="ui-icon ui-icon-circle-triangle-'+(r?"w":"e")+'">'+k+"</span></a>":l?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+k+'"><span class="ui-icon ui-icon-circle-triangle-'+(r?"w":"e")+'">'+k+"</span></a>",V=this._get(t,"currentText"),N=this._get(t,"gotoCurrent")&&t.currentDay?g:n;V=u?this.formatDate(t,V,N,this._getFormatConfig(t)):V;var F=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DS_jQuery_'+dsuuid+'.dateSelector._hideDateSelector();">'+this._get(t,"closeText")+"</button>",G=o?'<div class="ui-datepicker-buttonpane ui-widget-content"><table width="100%" border="0" style="border-collapse:collapse"><tr>'+(r?'<td width="1%">'+F+"</td>":"")+(a?'<td width="1%"><b>'+this._get(t,"timeName")+': </b></td><td align="center" valign="middle" id="timeControl_'+a+'"></td>':"")+(r?"":'<td width="1%">'+F+"</td>")+"</tr></table></div>":"",B=parseInt(this._get(t,"firstDay"),10);B=isNaN(B)?0:B;for(var Z=this._get(t,"showWeek"),te=this._get(t,"dayNames"),re=this._get(t,"dayNamesShort"),ne=this._get(t,"dayNamesMin"),ie=this._get(t,"monthNames"),oe=this._get(t,"monthNamesShort"),E=this._get(t,"beforeShowDay"),P=this._get(t,"showOtherMonths"),L=this._get(t,"selectOtherMonths"),A=this._get(t,"calculateWeek")||this.iso8601Week,O=this._getDefaultDate(t),R="",W=0;W<f[0];W++){for(var U="",z=0;z<f[1];z++){var J=this._daylightSavingAdjust(new Date(I,w,t.selectedDay)),Q=" ui-corner-all",Y="";if(h){if(Y+='<div class="ui-datepicker-group',f[1]>1)switch(z){case 0:Y+=" ui-datepicker-group-first",Q=" ui-corner-"+(r?"right":"left");break;case f[1]-1:Y+=" ui-datepicker-group-last",Q=" ui-corner-"+(r?"left":"right");break;default:Y+=" ui-datepicker-group-middle",Q="";break}Y+='">'}Y+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+Q+'">'+(/all|left/.test(Q)&&W==0?r?x:T:"")+(/all|right/.test(Q)&&W==0?r?T:x:"")+this._generateMonthYearHeader(t,w,I,b,_,W>0||z>0,ie,oe)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var le=Z?'<th class="ui-datepicker-week-col">'+this._get(t,"weekHeader")+"</th>":"",K=0;K<7;K++){var se=(K+B)%7;le+="<th"+((K+B+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+te[se]+'">'+ne[se]+"</span></th>"}Y+=le+"</tr></thead><tbody>";var de=this._getDaysInMonth(I,w);I==t.selectedYear&&w==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,de));for(var ue=(this._getFirstDayOfMonth(I,w)-B+7)%7,he=h?6:Math.ceil((ue+de)/7),q=this._daylightSavingAdjust(new Date(I,w,1-ue)),ce=0;ce<he;ce++){Y+="<tr>";for(var fe=Z?'<td class="ui-datepicker-week-col">'+this._get(t,"calculateWeek")(q)+"</td>":"",K=0;K<7;K++){var ee=E?E.apply(t.input?t.input[0]:null,[q]):[!0,""],X=q.getMonth()!=w,ae=X&&!L||!ee[0]||b&&q<b||_&&q>_;fe+='<td class="'+((K+B+6)%7>=5?" ui-datepicker-week-end":"")+(X?" ui-datepicker-other-month":"")+(q.getTime()==J.getTime()&&w==t.selectedMonth&&t._keyEvent||O.getTime()==q.getTime()&&O.getTime()==J.getTime()?" "+this._dayOverClass:"")+(ae?" "+this._unselectableClass:"")+(X&&!P?"":" "+ee[1]+(q.getTime()==g.getTime()?" "+this._currentClass:"")+(q.getTime()==n.getTime()?" ui-datepicker-today":""))+'"'+((!X||P)&&ee[2]?' title="'+ee[2]+'"':"")+(ae?"":' onclick="DS_jQuery_'+dsuuid+".dateSelector._selectDay('#"+t.id+"',"+q.getMonth()+","+q.getFullYear()+', this);return false;"')+">"+(X&&!P?"&#xa0;":ae?'<span class="ui-state-default">'+q.getDate()+"</span>":'<a class="ui-state-default'+(q.getTime()==n.getTime()?" ui-state-highlight":"")+(q.getTime()==g.getTime()?" ui-state-active":"")+(X?" ui-priority-secondary":"")+'" href="#">'+q.getDate()+"</a>")+"</td>",q.setDate(q.getDate()+1),q=this._daylightSavingAdjust(q)}Y+=fe+"</tr>"}w++,w>11&&(w=0,I++),Y+="</tbody></table>"+(h?"</div>"+(f[0]>0&&z==f[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),U+=Y}R+=U}return R+=G+($.browser.msie&&parseInt($.browser.version,10)<7&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),t._keyEvent=!1,R},_generateMonthYearHeader:function(t,n,a,r,o,l,u,f){var v=this._get(t,"changeMonth"),S=this._get(t,"changeYear"),h=this._get(t,"showMonthAfterYear"),g='<div class="ui-datepicker-title">',b="";if(l||!v)b+='<span class="ui-datepicker-month">'+u[n]+"</span>";else{var _=r&&r.getFullYear()==a,w=o&&o.getFullYear()==a;b+='<select class="ui-datepicker-month" onchange="DS_jQuery_'+dsuuid+".dateSelector._selectMonthYear('#"+t.id+`', this, 'M');" onclick="DS_jQuery_`+dsuuid+".dateSelector._clickMonthYear('#"+t.id+`');">`;for(var I=0;I<12;I++)(!_||I>=r.getMonth())&&(!w||I<=o.getMonth())&&(b+='<option value="'+I+'"'+(I==n?' selected="selected"':"")+">"+f[I]+"</option>");b+="</select>"}if(h||(g+=b+(l||!(v&&S)?"&#xa0;":"")),l||!S)g+='<span class="ui-datepicker-year">'+a+"</span>";else{var D=this._get(t,"yearRange").split(":"),C=new Date().getFullYear(),T=function(V){var N=V.match(/c[+-].*/)?a+parseInt(V.substring(1),10):V.match(/[+-].*/)?C+parseInt(V,10):parseInt(V,10);return isNaN(N)?C:N},k=T(D[0]),x=Math.max(k,T(D[1]||""));for(k=r?Math.max(k,r.getFullYear()):k,x=o?Math.min(x,o.getFullYear()):x,g+='<select class="ui-datepicker-year" onchange="DS_jQuery_'+dsuuid+".dateSelector._selectMonthYear('#"+t.id+`', this, 'Y');" onclick="DS_jQuery_`+dsuuid+".dateSelector._clickMonthYear('#"+t.id+`');">`;k<=x;k++)g+='<option value="'+k+'"'+(k==a?' selected="selected"':"")+">"+k+"</option>";g+="</select>"}return g+=this._get(t,"yearSuffix"),h&&(g+=(l||!(v&&S)?"&#xa0;":"")+b),g+="</div>",g},_adjustInstDate:function(t,n,a){var r=t.drawYear+(a=="Y"?n:0),o=t.drawMonth+(a=="M"?n:0),l=Math.min(t.selectedDay,this._getDaysInMonth(r,o))+(a=="D"?n:0),u=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(r,o,l)));t.selectedDay=u.getDate(),t.drawMonth=t.selectedMonth=u.getMonth(),t.drawYear=t.selectedYear=u.getFullYear(),(a=="M"||a=="Y")&&this._notifyChange(t)},_restrictMinMax:function(t,n){var a=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max");return n=a&&n<a?a:n,n=r&&n>r?r:n,n},_notifyChange:function(t){var n=this._get(t,"onChangeMonthYear");n&&n.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var n=this._get(t,"numberOfMonths");return n==null?[1,1]:typeof n=="number"?[1,n]:n},_getMinMaxDate:function(t,n){return this._determineDate(t,this._get(t,n+"Date"),null)},_getDaysInMonth:function(t,n){return 32-new Date(t,n,32).getDate()},_getFirstDayOfMonth:function(t,n){return new Date(t,n,1).getDay()},_canAdjustMonth:function(t,n,a,r){var o=this._getNumberOfMonths(t),l=this._daylightSavingAdjust(new Date(a,r+(n<0?n:o[0]*o[1]),1));return n<0&&l.setDate(this._getDaysInMonth(l.getFullYear(),l.getMonth())),this._isInRange(t,l)},_isInRange:function(t,n){var a=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max");return(!a||n.getTime()>=a.getTime())&&(!r||n.getTime()<=r.getTime())},_getFormatConfig:function(t){var n=this._get(t,"shortYearCutoff");return n=typeof n!="string"?n:new Date().getFullYear()%100+parseInt(n,10),{shortYearCutoff:n,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,n,a,r){n||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=n?typeof n=="object"?n:this._daylightSavingAdjust(new Date(r,a,n)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(t,this._get(t,"dateFormat"),o,this._getFormatConfig(t))}});function extendRemove(t,n){$.extend(t,n);for(var a in n)(n[a]==null||n[a]==null)&&(t[a]=n[a]);return t}function isArray(t){return t&&($.browser.safari&&typeof t=="object"&&t.length||t.constructor&&t.constructor.toString().match(/\Array\(\)/))}$.fn.dateSelector=function(t){$.dateSelector.initialized||($(document).mousedown($.dateSelector._checkExternalClick).find("body").append($.dateSelector.dsDiv),$.dateSelector.initialized=!0);var n=Array.prototype.slice.call(arguments,1);return typeof t=="string"&&(t=="isDisabled"||t=="getDate"||t=="widget")?$.dateSelector["_"+t+"DateSelector"].apply($.dateSelector,[this[0]].concat(n)):t=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.dateSelector["_"+t+"DateSelector"].apply($.dateSelector,[this[0]].concat(n)):this.each(function(){typeof t=="string"?$.dateSelector["_"+t+"DateSelector"].apply($.dateSelector,[this].concat(n)):$.dateSelector._attachDateSelector(this,t)})},$(document).ready(function(){$.dateSelector=new DateSelector,$.dateSelector.initialized=!1,$.dateSelector.uuid=new Date().getTime(),$.dateSelector.version="@VERSION",window["DS_jQuery_"+dsuuid]=$})})(jQuery),LWPW=function(){var t,n,a,r,o=function(){var h=function(){return typeof Storage<"u"};return{addItem:function(g,b){h()&&window.sessionStorage.setItem(g,b)},getItem:function(g){return h()?window.sessionStorage.getItem(g):null},removeItem:function(g){return h()?window.sessionStorage.removeItem(g):null}}}(),l=function(){var h=$("#"+CLID(t));return h.length?h[0]:null},u=function(){return $('div[data-role="archgrid"]').filter(function(){return $(this).data("kendoArchGrid").options.controlId===r}).data("kendoArchGrid")},f=function(h,g){const b=h.grid.dataSource.data().map(_=>String(_[h.grid.dataSource.options.schema.model.id]));return g.some(_=>b.includes(String(_)))},v=function(h){const g=u();if(h.length>1)return;if(!f(g,h)&&!g.selected().length){$(l()).empty(),o.removeItem(a);return}const b=l();if(b)if(h&&h.length){var _=o.getItem(a);if(_)var w=h.filter(function(D){return!_.includes(D)}),I=w.length&&w[0];else var I=h[h.length-1];(b.lastId||b.lastId!=I)&&(b.lastId=I,S(b.id,I),r&&($("#"+b.id)[0].options.afterRefreshList=function(){return g.refresh()})),o.addItem(a,h)}else b.lastId=null,S(b.id)},S=function(h,g){g&&$.ajax({url:n,cache:!1,data:{id:g},type:"POST",success:function(b){document.getElementById(h).LoadPage(b,{refreshList:!1})}})};return{Init:function(h,g,b,_){t=h,n=g,a=b,r=_,o.removeItem(a)},Show:v}};var qq=qq||{},qqObjsToRemove=typeof qqObjsToRemove<"u"?qqObjsToRemove:[];qq.animationSpeed="fast",qq.extend=function(t,n){for(var a in n)t[a]=n[a]},qq.indexOf=function(t,n,a){if(t.indexOf)return t.indexOf(n,a);a=a||0;var r=t.length;for(a<0&&(a+=r);a<r;a++)if(a in t&&t[a]===n)return a;return-1},qq.getUniqueId=function(){var t=0;return function(){return t++}}(),qq.attach=function(t,n,a){t.addEventListener?t.addEventListener(n,a,!1):t.attachEvent&&t.attachEvent("on"+n,a)},qq.detach=function(t,n,a){t.removeEventListener?t.removeEventListener(n,a,!1):t.attachEvent&&t.detachEvent("on"+n,a)},qq.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},qq.insertBefore=function(t,n){n.parentNode.insertBefore(t,n)},qq.remove=function(t){t.parentNode.removeChild(t)},qq.contains=function(t,n){return t==n?!0:t.contains?t.contains(n):!!(n.compareDocumentPosition(t)&8)},qq.toElement=function(){var t=document.createElement("div");return function(n){t.innerHTML=n;var a=t.firstChild;return t.removeChild(a),a}}(),qq.css=function(t,n){n.opacity!=null&&typeof t.style.opacity!="string"&&typeof t.filters<"u"&&(n.filter="alpha(opacity="+Math.round(100*n.opacity)+")"),qq.extend(t.style,n)},qq.hasClass=function(t,n){var a=new RegExp("(^| )"+n+"( |$)");return a.test(t.className)},qq.addClass=function(t,n){qq.hasClass(t,n)||(t.className+=" "+n)},qq.removeClass=function(t,n){var a=new RegExp("(^| )"+n+"( |$)");t.className=t.className.replace(a," ").replace(/^\s+|\s+$/g,"")},qq.setText=function(t,n){t.innerHTML=n},qq.setTxt=function(t,n,a){var r=t.parent().width();if(t.html(n),t.width()-5>r)if($.browser.mozilla)t.wrap("<div></div>").css("overflow","hidden").width(r);else{var o=$('<marquee behavior="alternate" scrollamount="1" scrolldelay="10"></marquee>');t.replaceWith(o),o.css("color",t.css("color")),t.remove(),t=o,o.attr("id",t.attr("id"))}n&&t.attr("title",n).html(n).show()},qq.setFormat=function(t,n){var a=t.fI;$(".CSS_MU_Format",t).append($("<img>").css("display","none").attr({alt:a.mT,title:a.mT}).bind("load",function(){$(this).fadeIn(qq.animationSpeed)}).attr("src",AppPath+n.cssFolder+a.pic+n.cssPostfix))},qq.setFailMessage=function(t,n){var a=$(".CSS_MU_Name",t)},qq.children=function(t){for(var n=[],a=t.firstChild;a;)a.nodeType==1&&n.push(a),a=a.nextSibling;return n},qq.getByClass=function(t,n){if(t.querySelectorAll)return t.querySelectorAll("."+n);for(var a=[],r=t.getElementsByTagName("*"),o=r.length,l=0;l<o;l++)qq.hasClass(r[l],n)&&a.push(r[l]);return a},qq.obj2url=function(t,n,a){var r=[],o="&",l=function(v,S){var h=n?/\[\]$/.test(n)?n:n+"["+S+"]":S;h!="undefined"&&S!="undefined"&&r.push(typeof v=="object"?qq.obj2url(v,h,!0):Object.prototype.toString.call(v)==="[object Function]"?encodeURIComponent(h)+"="+encodeURIComponent(v()):encodeURIComponent(h)+"="+encodeURIComponent(v))};if(!a&&n)o=/\?/.test(n)?/\?$/.test(n)?"":"&":"?",r.push(n),r.push(qq.obj2url(t));else if(Object.prototype.toString.call(t)==="[object Array]"&&typeof t<"u")for(var u=0,f=t.length;u<f;++u)l(t[u],u);else if(typeof t<"u"&&t!==null&&typeof t=="object")for(var u in t)l(t[u],u);else r.push(encodeURIComponent(n)+"="+encodeURIComponent(t));return r.join(o).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};qq.FileUploaderBasic=function(t){this._options={debug:!1,action:"/server/upload",params:{},button:null,multiple:!0,maxConnections:3,aExt:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(n,a){},onProgress:function(n,a,r,o){},onComplete:function(n,a,r){},onCancel:function(n,a){},messages:{typeError:mfuLoc.typeError,sizeError:mfuLoc.sizeError,minSizeError:mfuLoc.minSizeError,emptyError:mfuLoc.emptyError,onLeave:mfuLoc.onLeave},showMessage:function(n){alert(n)}},qq.extend(this._options,t),this._filesInProgress=0,this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button,t)),this._preventLeaveInProgress()},qq.FileUploaderBasic.prototype={setParams:function(t){this._options.params=t},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(t,n){var a=this;return new qq.UploadButton({element:t,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(r){a._onInputChange(r),MarkDirty()},readOnly:n.readOnly,ext:n.aExt})},_createUploadHandler:function(){var t=this,n;qq.UploadHandlerXhr.isSupported()?n="UploadHandlerXhr":n="UploadHandlerForm";var a=new qq[n]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(r,o,l,u){t._onProgress(r,o,l,u),t._options.onProgress(r,o,l,u)},onComplete:function(r,o,l){t._onComplete(r,o,l),t._options.onComplete(r,o,l)},onCancel:function(r,o){t._onCancel(r,o),t._options.onCancel(r,o)}});return a},_preventLeaveInProgress:function(){},_onSubmit:function(t,n){this._filesInProgress++},_onProgress:function(t,n,a,r){},_onComplete:function(t,n,a){this._filesInProgress--,a.error&&this._options.showMessage(a.error)},_onCancel:function(t,n){this._filesInProgress--},_onInputChange:function(t){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(t.files):this._validateFile(t)&&this._uploadFile(t),this._button.reset()},_uploadFileList:function(t){for(var n=0;n<t.length;n++)if(!this._validateFile(t[n]))return;for(var n=0;n<t.length;n++)this._uploadFile(t[n])},_uploadFile:function(t){var n=this._handler.add(t),a=this._handler.getName(n);this._options.onSubmit(n,a)!==!1&&(this._onSubmit(n,a),this._handler.upload(n,this._options))},_validateFile:function(t){for(var n,a,r=0;r<validationClientsId.id.length;r++)$("#"+validationClientsId.id[r]).empty();if(t.value?n=t.value.replace(/.*(\/|\\)/,""):(n=t.fN!=null?t.fN:t.name,a=t.fS!=null?t.fS:t.size),this._isAllowedExtension(n)){if(a===0)return this._addError(this._generateMessage("emptyError",n)),!1;if(a&&this._options.sizeLimit&&a>this._options.sizeLimit)return this._addError(this._generateMessage("sizeError",n)),!1;if(a&&a<this._options.minSizeLimit)return this._addError(this._generateMessage("minSizeError",n)),!1}else return this._addError(this._generateMessage("typeError",n)),!1;return!0},_generateMessage:function(t,n){var a=this._options.messages[t];function r(o,l){a=a.replace(o,l)}return r("{file}",n),r("{extensions}",this._options.aExt.join(", ")),r("{sizeLimit}",this._formatSize(this._options.sizeLimit)),r("{minSizeLimit}",this._formatSize(this._options.minSizeLimit)),a},_addError:function(t){if(validationClientsId.id.length>0)for(var n=0;n<validationClientsId.id.length;n++)Web.AddValidateError(t,validationClientsId.id[n]);else Web.AddError(t)},_error:function(t){this._options.showMessage(t)},_formatFileName:function(t){return t.length>33&&(t=t.slice(0,19)+"..."+t.slice(-13)),t},_isAllowedExtension:function(t){var n=t.indexOf(".")!==-1?t.replace(/.*[.]/,"").toLowerCase():"",a=this._options.aExt;if(!a.length)return!0;for(var r=0;r<a.length;r++)if(a[r].toLowerCase()==n)return!0;return!1},_formatSize:function(t){var n=-1;do t=t/1024,n++;while(t>99);return Math.max(t,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][n]}},qq.FileUploader=function(t){if(qq.FileUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>'+mfuLoc.dropFile+'</span></div><div class="qq-upload-button k-button k-button-solid-primary k-button-sm">'+mfuLoc.dodajPlik+'</div><table width="100%" border="0" style="border-collapse: collapse"><thead class="CSS_MultipleFileUploaderHead"></thead><tbody class="CSS_MultipleFileUploader"></tbody></table></div>',classes:{button:"qq-upload-button ",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"CSS_MultipleFileUploader",head:"CSS_MultipleFileUploaderHead",file:"CSS_MU_Name",spinner:"qq-upload-spinner",size:"CSS_MU_Size",cancel:"CSS_MU_Remove"}}),qq.extend(this._options,t),this.options=t,this.attachedFiles=[],this.removedFiles=[],this.hfFiles=document.getElementById(t.hfFiles),this.hfRemove=document.getElementById(t.hfRemove),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._listHead=this._find(this._element,"head"),this._classes=this._options.classes,this._button=this._createUploadButton(this._find(this._element,"button"),t),this._bindCancelEvent(),this._setupDragDrop(),this.hfRemove&&this.hfRemove.value)for(var n=this.hfRemove.value.split(";"),a=0;a<n.length;a++)this.removedFiles[n[a]]=!0},qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype),qq.extend(qq.FileUploader.prototype,{_find:function(t,n){var a=qq.getByClass(t,this._options.classes[n])[0];if(!a)throw new Error("element not found "+n);return a},_setupDragDrop:function(){var t=this,n=this._find(this._element,"drop");if(this._options.readOnly){n.style.display="none";return}var a=new qq.UploadDropZone({element:n,onEnter:function(r){qq.addClass(n,t._classes.dropActive),r.stopPropagation()},onLeave:function(r){r.stopPropagation()},onLeaveNotDescendants:function(r){qq.removeClass(n,t._classes.dropActive)},onDrop:function(r){qq.removeClass(n,t._classes.dropActive),t._uploadFileList(r.dataTransfer.files),$("."+t._classes.drop+":visible").hide(),MarkDirty()}});n.style.display="none",qq.attach(document,"dragenter",function(r){a._isValidFileDrag(r)&&(n.style.display="block")}),qq.attach(document,"dragleave",function(r){if(a._isValidFileDrag(r)){var o=document.elementFromPoint(r.clientX,r.clientY);(!o||o.nodeName=="HTML")&&(n.style.display="none")}})},_onSubmit:function(t,n){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(t,n)},_onProgress:function(t,n,a,r){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var o=this._getItemByFileId(t),l=this._find(o,"size"),u;a!=r?u=Math.round(a/r*100)+"% from "+this._formatSize(r):u=this._formatSize(r),qq.setText(l,u)},_formatSize:function(t){return t>1048576?Math.round(t/10485.76)/100+" MB":t>1024?Math.round(t/10.24)/100+" kB":t+" b"},_onComplete:function(t,n,a){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var r=this._getItemByFileId(t);if(a.s){var o=a.fI,l=this;r.fI=o,this.AddFileId(r.fI.id),o.iFC&&$("#NotSaved",r).show()&&qq.setTxt($("#FailMessage",r),mfuLoc.nieZapisany),$(".CSS_MU_Size",r).html(this._formatSize(o.fS)),o.pL&&$("#Preview",r).show().click(function(){l.PreviewItem(r)}),o.dL&&$("#Download",r).show().click(function(){l.DownloadItem(r)}),$("#Success",r).show(),$("#Remove",r).click(function(){l.RemoveItem(r)}),$("#Cancel",r).click(function(){l.RemoveCancelItem(r)}),qq.setFormat(r,this.options),o.m&&qq.setTxt($("#FailMessage",r),o.m)}else{var u=typeof a.m>"u"?mfuLoc.blad:a.m;qq.setTxt($("#FailMessage",r),u,1),$("#Remove, #Cancel, #Download, #Preview",r).remove(),$("#Fail",r).show(),$(r).addClass("CSS_MU_Red")}return $("#Uploading",r).remove(),r},_addToList:function(t,n){var a=this._buildItem();a.qqFileId=t;var r=this._find(a,"file");qq.setTxt($("#Name",r),n),this._listElement.appendChild(a),this._setShading(),window.frameElement&&$(function(){ResizeIFrame(window.frameElement,1)})},_setShading:function(){$("tr",this._listElement).each(function(t){t++,(t%2?$(this).removeClass("CSS_MU_Gray"):$(this).addClass("CSS_MU_Gray"))&&$(".CSS_MU_Lp",this).html(t+".")})},_getItemByFileId:function(t){for(var n=this._listElement.firstChild;n;){if(n.qqFileId==t)return n;n=n.nextSibling}},_buildHeader:function(){var t=mfuLoc;if(!(this._listElement.rows.length>0)){var n=this._listHead.insertRow(-1);this._buildHeaderCell(n,t.lp,"1%"),this._buildHeaderCell(n,t.status,"90px"),this._buildHeaderCell(n,t.nazwa),this._buildHeaderCell(n,t.rozmiar,"80px"),this._buildHeaderCell(n,t.format,"80px"),this._buildHeaderCell(n,t.akcja,"100px")}},_buildItem:function(){var t=mfuLoc;this._buildHeader();var n=this._listElement.insertRow(-1);this._buildCell(n,"CSS_MU_Lp");var a=this._buildCell(n,"CSS_MU_State"),r=this._buildCell(n,"CSS_MU_Name");r.innerHTML='<div id="Name"></div><div id="FailMessage" style="display:none;color:red;"></div>',r.style.width=$(this._listElement.rows[0].cells[2]).width()+"px",this._buildCell(n,"CSS_MU_Size"),this._buildCell(n,"CSS_MU_Format");var o=this._buildCell(n,"CSS_MU_Actions");return this._addImage(a,"Uploading",t.wysylanie,1),this._addImage(a,"Success",t.sukces).hide(),this._addImage(a,"NotSaved",t.nieZapisany).hide(),this._addImage(a,"Fail",t.niepowodzenie).hide(),!this._options.readOnly&&this._options.showDeleteButton&&this._addImage(o,"Remove",t.usun),this._addImage(o,"Download",t.pobierz).hide(),this._addImage(o,"Preview",t.podglad).hide(),this._addImage(o,"Cancel",t.anuluj).hide(),$("#Download, #Remove, #Preview, #Cancel",o).hover(function(){$(this).fadeTo(qq.animationSpeed,1)},function(){$(this).fadeTo(qq.animationSpeed,.7)}).css({opacity:.7,cursor:"pointer"}),n},_addImage:function(t,n,a,r){var o=document.createElement("img");return o.title=a,o.src=AppPath+this._options.cssFolder+n.toLowerCase()+(r?".gif":".png")+this._options.cssPostfix,r||(o.style.width="24px",o.style.height="24px"),o.id=n,t.appendChild(o),$(o)},_buildCell:function(t,n,a){var r=document.createElement("td");return n&&(r.className=n),a&&(r.innerHTML=a),t.appendChild(r),r},_buildHeaderCell:function(t,n,a){var r=document.createElement("th");r.innerHTML=n,a&&(r.style.width=a),t.appendChild(r)},AddItem:function(t){typeof t.s>"u"&&(t={s:!0,m:null,fI:t});var n=t.fI;this._addToList(n.id,n.fN);var a=this._onComplete(n.id,n.fN,t);return t.s&&this.removedFiles[n.id]&&this.RemoveItem(a),this},AddItems:function(){for(var t=0;t<arguments.length;t++)this.AddItem(arguments[t])},RemoveItem:function(t){this.RemoveFileId(t.fI.id),$(t).addClass("CSS_MU_Red").find("#Cancel").css("visibility","visible").hide().fadeTo(qq.animationSpeed,.7).end().find("#Download, #Preview, #Remove").fadeOut(qq.animationSpeed,function(){$(this).css("visibility","hidden").show()}),MarkDirty()},RemoveCancelItem:function(t){this.AddFileId(t.fI.id,1),$(t).removeClass("CSS_MU_Red").find("#Cancel").fadeOut(qq.animationSpeed,function(){$(this).css("visibility","hidden").show()}).end().find("#Download, #Preview, #Remove").css("visibility","visible").hide().fadeTo(qq.animationSpeed,.7)},PreviewItem:function(t){var n=t.fI.id,a,r=[],o=this,l=$("<div/>").appendTo(top.document.body).css({opacity:0,position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"black",zIndex:1e4}).fadeTo(qq.animationSpeed,.7,function(){var u=function(h,g,b){r.push(h),g=g||v,b=b||S;var _=$("<div/>").appendTo(top.document.body).css({backgroundColor:"white",zIndex:10010,border:"2px solid white",width:g,height:b,position:"fixed",left:"50%",top:"50%",marginTop:-(b/2),marginLeft:-(g/2),overflow:"hidden"}).append(h.css({position:"absolute",top:"0px"}));r.push(_,h)};a=$("<"+t.fI.pT+"/>");var f=$(top),v=f.width()*.7,S=f.height()*.95;typeof a[0].src<"u"&&(a[0].tagName.toLowerCase()=="img"?a.bind("load",function(){var h=this;h.jObj=$(this),h.title=mfuLoc.zamknij,v=Math.min(v,h.jObj.width()),S=Math.min(S,h.jObj.height()),h.jObj.width()>v||h.jObj.height>S?(u(h.jObj,v,S),h.jObj.css("cursor","pointer").mousedown(function(g){var b=h.jObj.position();h.tmpEvent=document.onselectstart,document.onselectstart=function(){return!1},h.startX=g.clientX,h.startY=g.clientY,h.posX=b.left,h.posY=b.top,h.minX=-(h.jObj.width()-v),h.minY=-(h.jObj.height()-S)}).mouseup(function(g){document.onselectstart=h.tmpEvent,h.tmpEvent=null,h.jObj.css("cursor","pointer")}).bind("drag",function(g,b){var _=h.posX+g.clientX-h.startX,w=h.posY+g.clientY-h.startY;_>0&&(_=0),_<h.minX&&(_=h.minX),w>0&&(w=0),w<h.minY&&(w=h.minY),h.style.left=_,h.style.top=w,h.jObj.css("cursor","move")})):u(h.jObj)}).css({position:"absolute",top:"-10000px"}).appendTo(top.document.body):a.ready(function(){u(a),a.width(v).height(S)}),a[0].src=t.fI.pL)}).click(function(){for(;r.length;)r.pop().remove();a.attr("src","").remove(),$(this).fadeOut(qq.animationSpeed,function(){$(this).remove()})})},DownloadItem:function(t){for(var n=t.fI.id;qqObjsToRemove.length;)qq.remove(qqObjsToRemove.pop());var a=cm._createIframe(n),r=cm._createForm(a,null,null);r.action=t.fI.dL,$(a).bind("load",function(){var o=cm._getIframeContentJSON(a);o&&qq.setTxt($("#FailMessage",t),o.m,1)}),r.submit(),qq.remove(r),qqObjsToRemove.push(a)},AddFileId:function(t,n){n&&(this.removedFiles[t]=null),this.attachedFiles[t]||(this.attachedFiles[t]=!0),this.SerializeItems()},RemoveFileId:function(t){this.attachedFiles[t]=null,this.removedFiles[t]||(this.removedFiles[t]=!0),this.SerializeItems()},SerializeItems:function(){var t=[],n=[];for(var a in this.attachedFiles)this.attachedFiles.hasOwnProperty(a)&&this.attachedFiles[a]&&t.push(a);for(var a in this.removedFiles)this.removedFiles.hasOwnProperty(a)&&this.removedFiles[a]&&n.push(a);this.hfFiles.value=t.join(";"),this.hfRemove.value=n.join(";")},_bindCancelEvent:function(){var t=this,n=this._listElement;qq.attach(n,"click",function(a){a=a||window.event;var r=a.target||a.srcElement;if(r.id=="Remove"){qq.preventDefault(a);var o=$(r).parents("tr:first")[0];o.fI||(t._handler.cancel(o.qqFileId),qq.remove(o))}})}}),qq.UploadDropZone=function(t){this._options={element:null,onEnter:function(n){},onLeave:function(n){},onLeaveNotDescendants:function(n){},onDrop:function(n){}},qq.extend(this._options,t),this._element=this._options.element,this._disableDropOutside(),this._attachEvents()},qq.UploadDropZone.prototype={_disableDropOutside:function(t){qq.UploadDropZone.dropOutsideDisabled||(qq.attach(document,"dragover",function(n){n.dataTransfer&&(n.dataTransfer.dropEffect="none",n.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var t=this;qq.attach(t._element,"dragover",function(n){if(t._isValidFileDrag(n)){var a=n.dataTransfer.effectAllowed;a=="move"||a=="linkMove"?n.dataTransfer.dropEffect="move":n.dataTransfer.dropEffect="copy",n.stopPropagation(),n.preventDefault()}}),qq.attach(t._element,"dragenter",function(n){t._isValidFileDrag(n)&&t._options.onEnter(n)}),qq.attach(t._element,"dragleave",function(n){if(t._isValidFileDrag(n)){t._options.onLeave(n);var a=document.elementFromPoint(n.clientX,n.clientY);qq.contains(this,a)||t._options.onLeaveNotDescendants(n)}}),qq.attach(t._element,"drop",function(n){t._isValidFileDrag(n)&&(n.preventDefault(),t._options.onDrop(n))})},_isValidFileDrag:function(t){var n=t.dataTransfer,a=navigator.userAgent.indexOf("AppleWebKit")>-1;return n&&n.effectAllowed!="none"&&(n.files||!a&&typeof n.types<"u"&&n.types.contains&&n.types.contains("Files"))}},qq.UploadButton=function(t){this._options={element:null,multiple:!1,name:"file",onChange:function(n){},aExt:[]},qq.extend(this._options,t),this._element=this._options.element,qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr",display:this._options.readOnly?"none":"block"}),!this._options.readOnly&&(this._input=this._createInput())},qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input),qq.removeClass(this._element,this._options.focusClass),this._input=this._createInput()},_createInput:function(){var t=document.createElement("input");this._options.multiple&&t.setAttribute("multiple","multiple"),t.setAttribute("type","file"),t.setAttribute("name",this._options.name),t.dataset.multiUpload=!0,this._options.ext&&this._options.ext.length&&t.setAttribute("accept",this._options.ext.map(a=>"."+a).join(",")),qq.css(t,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(t);var n=this;return qq.attach(t,"change",function(){n._options.onChange(t)}),qq.attach(t,"mouseover",function(){qq.addClass(n._element,n._options.hoverClass)}),qq.attach(t,"mouseout",function(){qq.removeClass(n._element,n._options.hoverClass)}),qq.attach(t,"focus",function(){qq.addClass(n._element,n._options.focusClass)}),qq.attach(t,"blur",function(){qq.removeClass(n._element,n._options.focusClass)}),window.attachEvent&&t.setAttribute("tabIndex","-1"),t}},qq.UploadHandlerAbstract=function(t){this._options={debug:!1,action:"/upload.php",maxConnections:999,onProgress:function(n,a,r,o){},onComplete:function(n,a,r){},onCancel:function(n,a){}},qq.extend(this._options,t),qq.extend(cm._options,t),this._queue=[],this._params=[]},qq.UploadHandlerAbstract.prototype={add:function(t){},upload:function(t,n){var a=this._queue.push(t),r={};qq.extend(r,n.params),this._params[t]=r,a<=this._options.maxConnections&&this._upload(t,this._params[t],n)},cancel:function(t){this._cancel(t),this._dequeue(t)},cancelAll:function(){for(var t=0;t<this._queue.length;t++)this._cancel(this._queue[t]);this._queue=[]},getName:function(t){},getSize:function(t){},getQueue:function(){return this._queue},_upload:function(t){},_cancel:function(t){},_dequeue:function(t){var n=qq.indexOf(this._queue,t);this._queue.splice(n,1);var a=this._options.maxConnections;if(this._queue.length>=a&&n<a){var r=this._queue[a-1];this._upload(r,this._params[r])}}},qq.UploadHandlerForm=function(t){qq.UploadHandlerAbstract.apply(this,arguments),this._inputs={}},qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerForm.prototype,{add:function(t){t.setAttribute("name","qqfile");var n="qq-upload-handler-iframe"+qq.getUniqueId();return this._inputs[n]=t,t.parentNode&&qq.remove(t),n},getName:function(t){return this._inputs[t].value.replace(/.*(\/|\\)/,"")},_cancel:function(t){this._options.onCancel(t,this.getName(t)),delete this._inputs[t];var n=document.getElementById(t);n&&(n.setAttribute("src","javascript:false;"),qq.remove(n))},_upload:function(t,n,a){var r=this._inputs[t];if(!r)throw new Error("file with passed id was not added, or already uploaded or cancelled");var o=this.getName(t),l=cm._createIframe(t),u=cm._createForm(l,n,a.action);u.appendChild(r);var f=this;l.onError=function(){f._options.onComplete(t,o,{m:mfuLoc.uploadError})},cm._attachLoadEvent(l,function(){cm.log("iframe loaded");var v=cm._getIframeContentJSON(l);f._options.onComplete(t,o,v),f._dequeue(t),delete f._inputs[t],setTimeout(function(){qq.remove(l)},1)});try{u.submit()}catch(v){this._options.onComplete(t,o,{m:/32 bit/.test(v.message)?mfuLoc.uploadError:v.message})}return qq.remove(u),t}}),qq.extend(qq.UploadHandlerForm.prototype,cm);var cm={_options:{},log:function(t){this._options.debug&&window.console&&console.log("[uploader] "+t)},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;cm.log("converting iframe's innerHTML to JSON"),cm.log("innerHTML = "+doc.body.innerHTML);try{response=eval("("+(doc.body.textContent||doc.body.innerText||"")+")")}catch(t){response={}}return response},_attachLoadEvent:function(t,n){qq.attach(t,"load",function(){if(t.parentNode){try{if(t.contentDocument&&t.contentDocument.body&&t.contentDocument.body.innerHTML=="false")return}catch{t.onError&&t.onError();return}n()}})},_createIframe:function(t){var n=qq.toElement('<iframe src="javascript:false;" name="'+t+'" />');return n.setAttribute("id",t),n.style.display="none",document.body.appendChild(n),n},_createForm:function(t,n,a){var r=qq.toElement('<form method="post" enctype="multipart/form-data"></form>');return r.setAttribute("action",a),r.setAttribute("target",t.name),r.style.display="none",document.body.appendChild(r),r}};qq.UploadHandlerXhr=function(t){qq.UploadHandlerAbstract.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},qq.UploadHandlerXhr.isSupported=function(){var t=document.createElement("input");return t.type="file","multiple"in t&&typeof File<"u"&&typeof new XMLHttpRequest().upload<"u"},qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerXhr.prototype,{add:function(t){if(!(t instanceof File))throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(t)-1},getName:function(t){var n=this._files[t];return n.fN!=null?n.fN:n.name},getSize:function(t){var n=this._files[t];return n.fS!=null?n.fS:n.size},getLoaded:function(t){return this._loaded[t]||0},_upload:function(t,n){var a=this._files[t],r=this.getName(t),o=this.getSize(t);this._loaded[t]=0;var l=this._xhrs[t]=new XMLHttpRequest,u=this;l.upload.onprogress=function(v){v.lengthComputable&&(u._loaded[t]=v.loaded,u._options.onProgress(t,r,v.loaded,v.total))},l.onreadystatechange=function(){l.readyState==4&&u._onComplete(t,l)},n=n||{},n.qqfile=r;var f=qq.obj2url(n,this._options.action);l.open("POST",f,!0),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.setRequestHeader("X-File-Name",encodeURIComponent(r)),l.setRequestHeader("Content-Type","application/octet-stream"),l.send(a)},_onComplete:function(id,xhr){if(this._files[id]){var name=this.getName(id),size=this.getSize(id);if(this._options.onProgress(id,name,size,size),xhr.status==200){cm.log("xhr - server response received"),cm.log("responseText = "+xhr.responseText);var response;try{response=eval("("+xhr.responseText+")")}catch(t){response={}}this._options.onComplete(id,name,response)}else this._options.onComplete(id,name,{});this._files[id]=null,this._xhrs[id]=null,this._dequeue(id)}},_cancel:function(t){this._options.onCancel(t,this.getName(t)),this._files[t]=null,this._xhrs[t]&&(this._xhrs[t].abort(),this._xhrs[t]=null)}}),window.qq=qq,RadioButtonClick=function(t){if(!t)return!1;var n=$(t).parents("ul:first"),a=n.attr("data-value");if(a!==t.value){var r=t.id.replace(/_(_)?/g,"$$$1");setTimeout("__doPostBack('"+r+"','')",0),n.attr("pv",t.value)}return!1},window.tabStrip=window.tabStrip||function(){var t="asyncPanel",n=function(a,r){var o="kendoTabStrip";if(!a.data("initialized")){var l=a[o]($.extend(r,{select:tabStrip.Show,animation:!1})).data(o);l.contentElements.each(function(){var u=$(this);u.data(t,$("#"+u.data(t))[0])}),a.data("initialized",!0)}};return $.fn.tabStrip=function(a){this.each(function(){window.tabStrip.Init($(this),a)})},{Init:function(a,r){n(a,r)},Show:function(a){if(a.sender.options.saveState&&a.item.id){var r=$("#"+a.item.id);$("#"+a.sender.options.saveState).val(r.data("add-button")?"":a.item.id)}$("#"+a.sender.tabGroup.data("input")).val($(a.item).data("index"));var o=$(a.contentElement).data(t);o&&o.childNodes&&!o.childNodes.length&&o.ClientRefresh()},Hide:function(a){},StopPropagation:function(a){a.stopPropagation()}}}(),InitUploadControl=function(t,n){var a="";n&&n.target?a=n.target.value.split("\\").pop():t.files&&t.files.length>0&&(a=t.files[0]);var r=t.parentElement.querySelector("span");a.length>0&&(r.innerHTML=a)},window.onload=function(){var t=document.querySelectorAll('input[type=file]:not([data-multi-upload="true"])');Array.prototype.forEach.call(t,function(n){n.addEventListener("change",function(a){InitUploadControl(n,a)})})},window.MainMenu=window.MainMenu||function(){return{SwitchTo:{Horizontal:function(){window.menu&&window.menu.$refs.menu.changeOrientation("horizontal")},Vertical:function(){window.menu&&window.menu.$refs.menu.changeOrientation("verical")}},OpenDialog:function(t,n,a){VSF.JQDialog({url:t,width:n,height:a,showHeader:!1},"popup","popupFrame")},ReloadPage:function(){window.location.reload()},Unsupported:function(t){alert("Option "+t+" is not supported.")},ClearBreadcrumbs:function(){ArchITect.Breadcrumbs.clear()}}}();
